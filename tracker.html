<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href="/vite.svg" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Tracker App</title>
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="theme-color" content="#ffffff" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <meta name="apple-mobile-web-app-title" content="tracker" />
      <script type="module" crossorigin>(function(){const C=document.createElement("link").relList;if(C&&C.supports&&C.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))I(g);new MutationObserver(g=>{for(const y of g)if(y.type==="childList")for(const b of y.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&I(b)}).observe(document,{childList:!0,subtree:!0});function f(g){const y={};return g.integrity&&(y.integrity=g.integrity),g.referrerPolicy&&(y.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?y.credentials="include":g.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function I(g){if(g.ep)return;g.ep=!0;const y=f(g);fetch(g.href,y)}})();var Nt,we,An,dt,Cn,wn,On,Pn,rn,Yt,Xt,In,_t={},Nn=[],tr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ut=Array.isArray;function ot(v,C){for(var f in C)v[f]=C[f];return v}function on(v){v&&v.parentNode&&v.parentNode.removeChild(v)}function nr(v,C,f){var I,g,y,b={};for(y in C)y=="key"?I=C[y]:y=="ref"?g=C[y]:b[y]=C[y];if(arguments.length>2&&(b.children=arguments.length>3?Nt.call(arguments,2):f),typeof v=="function"&&v.defaultProps!=null)for(y in v.defaultProps)b[y]===void 0&&(b[y]=v.defaultProps[y]);return At(v,b,I,g,null)}function At(v,C,f,I,g){var y={type:v,props:C,key:f,ref:I,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:g??++An,__i:-1,__u:0};return g==null&&we.vnode!=null&&we.vnode(y),y}function bt(v){return v.children}function wt(v,C){this.props=v,this.context=C}function pt(v,C){if(C==null)return v.__?pt(v.__,v.__i+1):null;for(var f;C<v.__k.length;C++)if((f=v.__k[C])!=null&&f.__e!=null)return f.__e;return typeof v.type=="function"?pt(v):null}function Un(v){var C,f;if((v=v.__)!=null&&v.__c!=null){for(v.__e=v.__c.base=null,C=0;C<v.__k.length;C++)if((f=v.__k[C])!=null&&f.__e!=null){v.__e=v.__c.base=f.__e;break}return Un(v)}}function en(v){(!v.__d&&(v.__d=!0)&&dt.push(v)&&!Pt.__r++||Cn!=we.debounceRendering)&&((Cn=we.debounceRendering)||wn)(Pt)}function Pt(){for(var v,C,f,I,g,y,b,B=1;dt.length;)dt.length>B&&dt.sort(On),v=dt.shift(),B=dt.length,v.__d&&(f=void 0,I=void 0,g=(I=(C=v).__v).__e,y=[],b=[],C.__P&&((f=ot({},I)).__v=I.__v+1,we.vnode&&we.vnode(f),sn(C.__P,f,I,C.__n,C.__P.namespaceURI,32&I.__u?[g]:null,y,g??pt(I),!!(32&I.__u),b),f.__v=I.__v,f.__.__k[f.__i]=f,Ln(y,f,b),I.__e=I.__=null,f.__e!=g&&Un(f)));Pt.__r=0}function Mn(v,C,f,I,g,y,b,B,A,E,o){var c,l,_,h,x,w,N,L=I&&I.__k||Nn,K=C.length;for(A=rr(f,C,L,A,K),c=0;c<K;c++)(_=f.__k[c])!=null&&(l=_.__i==-1?_t:L[_.__i]||_t,_.__i=c,w=sn(v,_,l,g,y,b,B,A,E,o),h=_.__e,_.ref&&l.ref!=_.ref&&(l.ref&&cn(l.ref,null,_),o.push(_.ref,_.__c||h,_)),x==null&&h!=null&&(x=h),(N=!!(4&_.__u))||l.__k===_.__k?A=jn(_,A,v,N):typeof _.type=="function"&&w!==void 0?A=w:h&&(A=h.nextSibling),_.__u&=-7);return f.__e=x,A}function rr(v,C,f,I,g){var y,b,B,A,E,o=f.length,c=o,l=0;for(v.__k=new Array(g),y=0;y<g;y++)(b=C[y])!=null&&typeof b!="boolean"&&typeof b!="function"?(typeof b=="string"||typeof b=="number"||typeof b=="bigint"||b.constructor==String?b=v.__k[y]=At(null,b,null,null,null):Ut(b)?b=v.__k[y]=At(bt,{children:b},null,null,null):b.constructor===void 0&&b.__b>0?b=v.__k[y]=At(b.type,b.props,b.key,b.ref?b.ref:null,b.__v):v.__k[y]=b,A=y+l,b.__=v,b.__b=v.__b+1,B=null,(E=b.__i=or(b,f,A,c))!=-1&&(c--,(B=f[E])&&(B.__u|=2)),B==null||B.__v==null?(E==-1&&(g>o?l--:g<o&&l++),typeof b.type!="function"&&(b.__u|=4)):E!=A&&(E==A-1?l--:E==A+1?l++:(E>A?l--:l++,b.__u|=4))):v.__k[y]=null;if(c)for(y=0;y<o;y++)(B=f[y])!=null&&!(2&B.__u)&&(B.__e==I&&(I=pt(B)),Hn(B,B));return I}function jn(v,C,f,I){var g,y;if(typeof v.type=="function"){for(g=v.__k,y=0;g&&y<g.length;y++)g[y]&&(g[y].__=v,C=jn(g[y],C,f,I));return C}v.__e!=C&&(I&&(C&&v.type&&!C.parentNode&&(C=pt(v)),f.insertBefore(v.__e,C||null)),C=v.__e);do C=C&&C.nextSibling;while(C!=null&&C.nodeType==8);return C}function or(v,C,f,I){var g,y,b,B=v.key,A=v.type,E=C[f],o=E!=null&&(2&E.__u)==0;if(E===null&&B==null||o&&B==E.key&&A==E.type)return f;if(I>(o?1:0)){for(g=f-1,y=f+1;g>=0||y<C.length;)if((E=C[b=g>=0?g--:y++])!=null&&!(2&E.__u)&&B==E.key&&A==E.type)return b}return-1}function kn(v,C,f){C[0]=="-"?v.setProperty(C,f??""):v[C]=f==null?"":typeof f!="number"||tr.test(C)?f:f+"px"}function Et(v,C,f,I,g){var y,b;e:if(C=="style")if(typeof f=="string")v.style.cssText=f;else{if(typeof I=="string"&&(v.style.cssText=I=""),I)for(C in I)f&&C in f||kn(v.style,C,"");if(f)for(C in f)I&&f[C]==I[C]||kn(v.style,C,f[C])}else if(C[0]=="o"&&C[1]=="n")y=C!=(C=C.replace(Pn,"$1")),b=C.toLowerCase(),C=b in v||C=="onFocusOut"||C=="onFocusIn"?b.slice(2):C.slice(2),v.l||(v.l={}),v.l[C+y]=f,f?I?f.u=I.u:(f.u=rn,v.addEventListener(C,y?Xt:Yt,y)):v.removeEventListener(C,y?Xt:Yt,y);else{if(g=="http://www.w3.org/2000/svg")C=C.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(C!="width"&&C!="height"&&C!="href"&&C!="list"&&C!="form"&&C!="tabIndex"&&C!="download"&&C!="rowSpan"&&C!="colSpan"&&C!="role"&&C!="popover"&&C in v)try{v[C]=f??"";break e}catch{}typeof f=="function"||(f==null||f===!1&&C[4]!="-"?v.removeAttribute(C):v.setAttribute(C,C=="popover"&&f==1?"":f))}}function Sn(v){return function(C){if(this.l){var f=this.l[C.type+v];if(C.t==null)C.t=rn++;else if(C.t<f.u)return;return f(we.event?we.event(C):C)}}}function sn(v,C,f,I,g,y,b,B,A,E){var o,c,l,_,h,x,w,N,L,K,$,q,k,p,P,s,n,t=C.type;if(C.constructor!==void 0)return null;128&f.__u&&(A=!!(32&f.__u),y=[B=C.__e=f.__e]),(o=we.__b)&&o(C);e:if(typeof t=="function")try{if(N=C.props,L="prototype"in t&&t.prototype.render,K=(o=t.contextType)&&I[o.__c],$=o?K?K.props.value:o.__:I,f.__c?w=(c=C.__c=f.__c).__=c.__E:(L?C.__c=c=new t(N,$):(C.__c=c=new wt(N,$),c.constructor=t,c.render=sr),K&&K.sub(c),c.state||(c.state={}),c.__n=I,l=c.__d=!0,c.__h=[],c._sb=[]),L&&c.__s==null&&(c.__s=c.state),L&&t.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=ot({},c.__s)),ot(c.__s,t.getDerivedStateFromProps(N,c.__s))),_=c.props,h=c.state,c.__v=C,l)L&&t.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),L&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(L&&t.getDerivedStateFromProps==null&&N!==_&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(N,$),C.__v==f.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(N,c.__s,$)===!1){for(C.__v!=f.__v&&(c.props=N,c.state=c.__s,c.__d=!1),C.__e=f.__e,C.__k=f.__k,C.__k.some(function(i){i&&(i.__=C)}),q=0;q<c._sb.length;q++)c.__h.push(c._sb[q]);c._sb=[],c.__h.length&&b.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(N,c.__s,$),L&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(_,h,x)})}if(c.context=$,c.props=N,c.__P=v,c.__e=!1,k=we.__r,p=0,L){for(c.state=c.__s,c.__d=!1,k&&k(C),o=c.render(c.props,c.state,c.context),P=0;P<c._sb.length;P++)c.__h.push(c._sb[P]);c._sb=[]}else do c.__d=!1,k&&k(C),o=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++p<25);c.state=c.__s,c.getChildContext!=null&&(I=ot(ot({},I),c.getChildContext())),L&&!l&&c.getSnapshotBeforeUpdate!=null&&(x=c.getSnapshotBeforeUpdate(_,h)),s=o,o!=null&&o.type===bt&&o.key==null&&(s=Fn(o.props.children)),B=Mn(v,Ut(s)?s:[s],C,f,I,g,y,b,B,A,E),c.base=C.__e,C.__u&=-161,c.__h.length&&b.push(c),w&&(c.__E=c.__=null)}catch(i){if(C.__v=null,A||y!=null)if(i.then){for(C.__u|=A?160:128;B&&B.nodeType==8&&B.nextSibling;)B=B.nextSibling;y[y.indexOf(B)]=null,C.__e=B}else{for(n=y.length;n--;)on(y[n]);tn(C)}else C.__e=f.__e,C.__k=f.__k,i.then||tn(C);we.__e(i,C,f)}else y==null&&C.__v==f.__v?(C.__k=f.__k,C.__e=f.__e):B=C.__e=ir(f.__e,C,f,I,g,y,b,A,E);return(o=we.diffed)&&o(C),128&C.__u?void 0:B}function tn(v){v&&v.__c&&(v.__c.__e=!0),v&&v.__k&&v.__k.forEach(tn)}function Ln(v,C,f){for(var I=0;I<f.length;I++)cn(f[I],f[++I],f[++I]);we.__c&&we.__c(C,v),v.some(function(g){try{v=g.__h,g.__h=[],v.some(function(y){y.call(g)})}catch(y){we.__e(y,g.__v)}})}function Fn(v){return typeof v!="object"||v==null||v.__b&&v.__b>0?v:Ut(v)?v.map(Fn):ot({},v)}function ir(v,C,f,I,g,y,b,B,A){var E,o,c,l,_,h,x,w=f.props||_t,N=C.props,L=C.type;if(L=="svg"?g="http://www.w3.org/2000/svg":L=="math"?g="http://www.w3.org/1998/Math/MathML":g||(g="http://www.w3.org/1999/xhtml"),y!=null){for(E=0;E<y.length;E++)if((_=y[E])&&"setAttribute"in _==!!L&&(L?_.localName==L:_.nodeType==3)){v=_,y[E]=null;break}}if(v==null){if(L==null)return document.createTextNode(N);v=document.createElementNS(g,L,N.is&&N),B&&(we.__m&&we.__m(C,y),B=!1),y=null}if(L==null)w===N||B&&v.data==N||(v.data=N);else{if(y=y&&Nt.call(v.childNodes),!B&&y!=null)for(w={},E=0;E<v.attributes.length;E++)w[(_=v.attributes[E]).name]=_.value;for(E in w)if(_=w[E],E!="children"){if(E=="dangerouslySetInnerHTML")c=_;else if(!(E in N)){if(E=="value"&&"defaultValue"in N||E=="checked"&&"defaultChecked"in N)continue;Et(v,E,null,_,g)}}for(E in N)_=N[E],E=="children"?l=_:E=="dangerouslySetInnerHTML"?o=_:E=="value"?h=_:E=="checked"?x=_:B&&typeof _!="function"||w[E]===_||Et(v,E,_,w[E],g);if(o)B||c&&(o.__html==c.__html||o.__html==v.innerHTML)||(v.innerHTML=o.__html),C.__k=[];else if(c&&(v.innerHTML=""),Mn(C.type=="template"?v.content:v,Ut(l)?l:[l],C,f,I,L=="foreignObject"?"http://www.w3.org/1999/xhtml":g,y,b,y?y[0]:f.__k&&pt(f,0),B,A),y!=null)for(E=y.length;E--;)on(y[E]);B||(E="value",L=="progress"&&h==null?v.removeAttribute("value"):h!=null&&(h!==v[E]||L=="progress"&&!h||L=="option"&&h!=w[E])&&Et(v,E,h,w[E],g),E="checked",x!=null&&x!=v[E]&&Et(v,E,x,w[E],g))}return v}function cn(v,C,f){try{if(typeof v=="function"){var I=typeof v.__u=="function";I&&v.__u(),I&&C==null||(v.__u=v(C))}else v.current=C}catch(g){we.__e(g,f)}}function Hn(v,C,f){var I,g;if(we.unmount&&we.unmount(v),(I=v.ref)&&(I.current&&I.current!=v.__e||cn(I,null,C)),(I=v.__c)!=null){if(I.componentWillUnmount)try{I.componentWillUnmount()}catch(y){we.__e(y,C)}I.base=I.__P=null}if(I=v.__k)for(g=0;g<I.length;g++)I[g]&&Hn(I[g],C,f||typeof v.type!="function");f||on(v.__e),v.__c=v.__=v.__e=void 0}function sr(v,C,f){return this.constructor(v,f)}function cr(v,C,f){var I,g,y,b;C==document&&(C=document.documentElement),we.__&&we.__(v,C),g=(I=!1)?null:C.__k,y=[],b=[],sn(C,v=C.__k=nr(bt,null,[v]),g||_t,_t,C.namespaceURI,g?null:C.firstChild?Nt.call(C.childNodes):null,y,g?g.__e:C.firstChild,I,b),Ln(y,v,b)}function ar(v){function C(f){var I,g;return this.getChildContext||(I=new Set,(g={})[C.__c]=this,this.getChildContext=function(){return g},this.componentWillUnmount=function(){I=null},this.shouldComponentUpdate=function(y){this.props.value!=y.value&&I.forEach(function(b){b.__e=!0,en(b)})},this.sub=function(y){I.add(y);var b=y.componentWillUnmount;y.componentWillUnmount=function(){I&&I.delete(y),b&&b.call(y)}}),f.children}return C.__c="__cC"+In++,C.__=v,C.Provider=C.__l=(C.Consumer=function(f,I){return f.children(I)}).contextType=C,C}Nt=Nn.slice,we={__e:function(v,C,f,I){for(var g,y,b;C=C.__;)if((g=C.__c)&&!g.__)try{if((y=g.constructor)&&y.getDerivedStateFromError!=null&&(g.setState(y.getDerivedStateFromError(v)),b=g.__d),g.componentDidCatch!=null&&(g.componentDidCatch(v,I||{}),b=g.__d),b)return g.__E=g}catch(B){v=B}throw v}},An=0,wt.prototype.setState=function(v,C){var f;f=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ot({},this.state),typeof v=="function"&&(v=v(ot({},f),this.props)),v&&ot(f,v),v!=null&&this.__v&&(C&&this._sb.push(C),en(this))},wt.prototype.forceUpdate=function(v){this.__v&&(this.__e=!0,v&&this.__h.push(v),en(this))},wt.prototype.render=bt,dt=[],wn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,On=function(v,C){return v.__v.__b-C.__v.__b},Pt.__r=0,Pn=/(PointerCapture)$|Capture$/i,rn=0,Yt=Sn(!1),Xt=Sn(!0),In=0;var ur=0;function pe(v,C,f,I,g,y){C||(C={});var b,B,A=C;if("ref"in A)for(B in A={},C)B=="ref"?b=C[B]:A[B]=C[B];var E={type:v,props:A,key:f,ref:b,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ur,__i:-1,__u:0,__source:g,__self:y};if(typeof v=="function"&&(b=v.defaultProps))for(B in b)A[B]===void 0&&(A[B]=b[B]);return we.vnode&&we.vnode(E),E}var vt,Ie,Jt,_n,It=0,Kn=[],je=we,mn=je.__b,bn=je.__r,Tn=je.diffed,Rn=je.__c,xn=je.unmount,Bn=je.__;function Mt(v,C){je.__h&&je.__h(Ie,v,It||C),It=0;var f=Ie.__H||(Ie.__H={__:[],__h:[]});return v>=f.__.length&&f.__.push({}),f.__[v]}function yt(v){return It=1,lr(zn,v)}function lr(v,C,f){var I=Mt(vt++,2);if(I.t=v,!I.__c&&(I.__=[zn(void 0,C),function(B){var A=I.__N?I.__N[0]:I.__[0],E=I.t(A,B);A!==E&&(I.__N=[E,I.__[1]],I.__c.setState({}))}],I.__c=Ie,!Ie.__f)){var g=function(B,A,E){if(!I.__c.__H)return!0;var o=I.__c.__H.__.filter(function(l){return!!l.__c});if(o.every(function(l){return!l.__N}))return!y||y.call(this,B,A,E);var c=I.__c.props!==B;return o.forEach(function(l){if(l.__N){var _=l.__[0];l.__=l.__N,l.__N=void 0,_!==l.__[0]&&(c=!0)}}),y&&y.call(this,B,A,E)||c};Ie.__f=!0;var y=Ie.shouldComponentUpdate,b=Ie.componentWillUpdate;Ie.componentWillUpdate=function(B,A,E){if(this.__e){var o=y;y=void 0,g(B,A,E),y=o}b&&b.call(this,B,A,E)},Ie.shouldComponentUpdate=g}return I.__N||I.__}function mt(v,C){var f=Mt(vt++,3);!je.__s&&Vn(f.__H,C)&&(f.__=v,f.u=C,Ie.__H.__h.push(f))}function dr(v){return It=5,fr(function(){return{current:v}},[])}function fr(v,C){var f=Mt(vt++,7);return Vn(f.__H,C)&&(f.__=v(),f.__H=C,f.__h=v),f.__}function hr(v){var C=Ie.context[v.__c],f=Mt(vt++,9);return f.c=v,C?(f.__==null&&(f.__=!0,C.sub(Ie)),C.props.value):v.__}function gr(){for(var v;v=Kn.shift();)if(v.__P&&v.__H)try{v.__H.__h.forEach(Ot),v.__H.__h.forEach(nn),v.__H.__h=[]}catch(C){v.__H.__h=[],je.__e(C,v.__v)}}je.__b=function(v){Ie=null,mn&&mn(v)},je.__=function(v,C){v&&C.__k&&C.__k.__m&&(v.__m=C.__k.__m),Bn&&Bn(v,C)},je.__r=function(v){bn&&bn(v),vt=0;var C=(Ie=v.__c).__H;C&&(Jt===Ie?(C.__h=[],Ie.__h=[],C.__.forEach(function(f){f.__N&&(f.__=f.__N),f.u=f.__N=void 0})):(C.__h.forEach(Ot),C.__h.forEach(nn),C.__h=[],vt=0)),Jt=Ie},je.diffed=function(v){Tn&&Tn(v);var C=v.__c;C&&C.__H&&(C.__H.__h.length&&(Kn.push(C)!==1&&_n===je.requestAnimationFrame||((_n=je.requestAnimationFrame)||pr)(gr)),C.__H.__.forEach(function(f){f.u&&(f.__H=f.u),f.u=void 0})),Jt=Ie=null},je.__c=function(v,C){C.some(function(f){try{f.__h.forEach(Ot),f.__h=f.__h.filter(function(I){return!I.__||nn(I)})}catch(I){C.some(function(g){g.__h&&(g.__h=[])}),C=[],je.__e(I,f.__v)}}),Rn&&Rn(v,C)},je.unmount=function(v){xn&&xn(v);var C,f=v.__c;f&&f.__H&&(f.__H.__.forEach(function(I){try{Ot(I)}catch(g){C=g}}),f.__H=void 0,C&&je.__e(C,f.__v))};var En=typeof requestAnimationFrame=="function";function pr(v){var C,f=function(){clearTimeout(I),En&&cancelAnimationFrame(C),setTimeout(v)},I=setTimeout(f,35);En&&(C=requestAnimationFrame(f))}function Ot(v){var C=Ie,f=v.__c;typeof f=="function"&&(v.__c=void 0,f()),Ie=C}function nn(v){var C=Ie;v.__c=v.__(),Ie=C}function Vn(v,C){return!v||v.length!==C.length||C.some(function(f,I){return f!==v[I]})}function zn(v,C){return typeof C=="function"?C(v):C}const rt={},$n=async()=>{rt.db||(rt.db=await new Promise(f=>{const I=indexedDB.open("crypto-db",1);I.onupgradeneeded=()=>I.result.createObjectStore("keys"),I.onsuccess=()=>f(I.result)}));const v=await new Promise(f=>{const I=rt.db.transaction("keys");I.objectStore("keys").get("rsa-public").onsuccess=g=>f(g.target.result)}),C=await new Promise(f=>{const I=rt.db.transaction("keys");I.objectStore("keys").get("rsa-private").onsuccess=g=>f(g.target.result)});return v&&(rt.pub=v),C&&(rt.pri=C),rt},an=async()=>Object.keys(rt).length?rt:await $n(),Zt=v=>{let C="";const f=new Uint8Array(v),I=32768;for(let g=0;g<f.length;g+=I)C+=String.fromCharCode(...f.subarray(g,g+I));return btoa(C)},St=v=>{const C=atob(v),f=new Uint8Array(C.length);for(let I=0;I<C.length;I++)f[I]=C.charCodeAt(I);return f.buffer},vr=v=>btoa(unescape(encodeURIComponent(JSON.stringify(v)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),yr=v=>(v=v.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape(atob(v))))),Cr=()=>pe("div",{children:pe("input",{type:"file",accept:".json",onChange:async C=>{const f=C.target.files[0];if(!f)return;const I=JSON.parse(await f.text()),g=await crypto.subtle.importKey("spki",St(I.pub),{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),y=await crypto.subtle.importKey("pkcs8",St(I.pri),{name:"RSA-OAEP",hash:"SHA-256"},!1,["decrypt"]),{db:b}=await an(),B=b.transaction("keys","readwrite");B.objectStore("keys").put(g,"rsa-public"),B.objectStore("keys").put(y,"rsa-private"),setTimeout(()=>{location.reload()},200)}})}),Dn=()=>{const{globalState:v,setGlobalState:C}=hr(Zn);return[v,C]};var Gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wn(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}var qn={exports:{}};(function(v,C){(function(f,I){v.exports=I()})(Gn,function(){var f=1e3,I=6e4,g=36e5,y="millisecond",b="second",B="minute",A="hour",E="day",o="week",c="month",l="quarter",_="year",h="date",x="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,L={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(S){var O=["th","st","nd","rd"],m=S%100;return"["+S+(O[(m-20)%10]||O[m]||O[0])+"]"}},K=function(S,O,m){var F=String(S);return!F||F.length>=O?S:""+Array(O+1-F.length).join(m)+S},$={s:K,z:function(S){var O=-S.utcOffset(),m=Math.abs(O),F=Math.floor(m/60),j=m%60;return(O<=0?"+":"-")+K(F,2,"0")+":"+K(j,2,"0")},m:function S(O,m){if(O.date()<m.date())return-S(m,O);var F=12*(m.year()-O.year())+(m.month()-O.month()),j=O.clone().add(F,c),G=m-j<0,D=O.clone().add(F+(G?-1:1),c);return+(-(F+(m-j)/(G?j-D:D-j))||0)},a:function(S){return S<0?Math.ceil(S)||0:Math.floor(S)},p:function(S){return{M:c,y:_,w:o,d:E,D:h,h:A,m:B,s:b,ms:y,Q:l}[S]||String(S||"").toLowerCase().replace(/s$/,"")},u:function(S){return S===void 0}},q="en",k={};k[q]=L;var p="$isDayjsObject",P=function(S){return S instanceof i||!(!S||!S[p])},s=function S(O,m,F){var j;if(!O)return q;if(typeof O=="string"){var G=O.toLowerCase();k[G]&&(j=G),m&&(k[G]=m,j=G);var D=O.split("-");if(!j&&D.length>1)return S(D[0])}else{var Z=O.name;k[Z]=O,j=Z}return!F&&j&&(q=j),j||!F&&q},n=function(S,O){if(P(S))return S.clone();var m=typeof O=="object"?O:{};return m.date=S,m.args=arguments,new i(m)},t=$;t.l=s,t.i=P,t.w=function(S,O){return n(S,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var i=function(){function S(m){this.$L=s(m.locale,null,!0),this.parse(m),this.$x=this.$x||m.x||{},this[p]=!0}var O=S.prototype;return O.parse=function(m){this.$d=function(F){var j=F.date,G=F.utc;if(j===null)return new Date(NaN);if(t.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var D=j.match(w);if(D){var Z=D[2]-1||0,ee=(D[7]||"0").substring(0,3);return G?new Date(Date.UTC(D[1],Z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,ee)):new Date(D[1],Z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,ee)}}return new Date(j)}(m),this.init()},O.init=function(){var m=this.$d;this.$y=m.getFullYear(),this.$M=m.getMonth(),this.$D=m.getDate(),this.$W=m.getDay(),this.$H=m.getHours(),this.$m=m.getMinutes(),this.$s=m.getSeconds(),this.$ms=m.getMilliseconds()},O.$utils=function(){return t},O.isValid=function(){return this.$d.toString()!==x},O.isSame=function(m,F){var j=n(m);return this.startOf(F)<=j&&j<=this.endOf(F)},O.isAfter=function(m,F){return n(m)<this.startOf(F)},O.isBefore=function(m,F){return this.endOf(F)<n(m)},O.$g=function(m,F,j){return t.u(m)?this[F]:this.set(j,m)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(m,F){var j=this,G=!!t.u(F)||F,D=t.p(m),Z=function(le,ae){var ce=t.w(j.$u?Date.UTC(j.$y,ae,le):new Date(j.$y,ae,le),j);return G?ce:ce.endOf(E)},ee=function(le,ae){return t.w(j.toDate()[le].apply(j.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(ae)),j)},he=this.$W,ie=this.$M,re=this.$D,ne="set"+(this.$u?"UTC":"");switch(D){case _:return G?Z(1,0):Z(31,11);case c:return G?Z(1,ie):Z(0,ie+1);case o:var J=this.$locale().weekStart||0,oe=(he<J?he+7:he)-J;return Z(G?re-oe:re+(6-oe),ie);case E:case h:return ee(ne+"Hours",0);case A:return ee(ne+"Minutes",1);case B:return ee(ne+"Seconds",2);case b:return ee(ne+"Milliseconds",3);default:return this.clone()}},O.endOf=function(m){return this.startOf(m,!1)},O.$set=function(m,F){var j,G=t.p(m),D="set"+(this.$u?"UTC":""),Z=(j={},j[E]=D+"Date",j[h]=D+"Date",j[c]=D+"Month",j[_]=D+"FullYear",j[A]=D+"Hours",j[B]=D+"Minutes",j[b]=D+"Seconds",j[y]=D+"Milliseconds",j)[G],ee=G===E?this.$D+(F-this.$W):F;if(G===c||G===_){var he=this.clone().set(h,1);he.$d[Z](ee),he.init(),this.$d=he.set(h,Math.min(this.$D,he.daysInMonth())).$d}else Z&&this.$d[Z](ee);return this.init(),this},O.set=function(m,F){return this.clone().$set(m,F)},O.get=function(m){return this[t.p(m)]()},O.add=function(m,F){var j,G=this;m=Number(m);var D=t.p(F),Z=function(ie){var re=n(G);return t.w(re.date(re.date()+Math.round(ie*m)),G)};if(D===c)return this.set(c,this.$M+m);if(D===_)return this.set(_,this.$y+m);if(D===E)return Z(1);if(D===o)return Z(7);var ee=(j={},j[B]=I,j[A]=g,j[b]=f,j)[D]||1,he=this.$d.getTime()+m*ee;return t.w(he,this)},O.subtract=function(m,F){return this.add(-1*m,F)},O.format=function(m){var F=this,j=this.$locale();if(!this.isValid())return j.invalidDate||x;var G=m||"YYYY-MM-DDTHH:mm:ssZ",D=t.z(this),Z=this.$H,ee=this.$m,he=this.$M,ie=j.weekdays,re=j.months,ne=j.meridiem,J=function(ae,ce,ue,ve){return ae&&(ae[ce]||ae(F,G))||ue[ce].slice(0,ve)},oe=function(ae){return t.s(Z%12||12,ae,"0")},le=ne||function(ae,ce,ue){var ve=ae<12?"AM":"PM";return ue?ve.toLowerCase():ve};return G.replace(N,function(ae,ce){return ce||function(ue){switch(ue){case"YY":return String(F.$y).slice(-2);case"YYYY":return t.s(F.$y,4,"0");case"M":return he+1;case"MM":return t.s(he+1,2,"0");case"MMM":return J(j.monthsShort,he,re,3);case"MMMM":return J(re,he);case"D":return F.$D;case"DD":return t.s(F.$D,2,"0");case"d":return String(F.$W);case"dd":return J(j.weekdaysMin,F.$W,ie,2);case"ddd":return J(j.weekdaysShort,F.$W,ie,3);case"dddd":return ie[F.$W];case"H":return String(Z);case"HH":return t.s(Z,2,"0");case"h":return oe(1);case"hh":return oe(2);case"a":return le(Z,ee,!0);case"A":return le(Z,ee,!1);case"m":return String(ee);case"mm":return t.s(ee,2,"0");case"s":return String(F.$s);case"ss":return t.s(F.$s,2,"0");case"SSS":return t.s(F.$ms,3,"0");case"Z":return D}return null}(ae)||D.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(m,F,j){var G,D=this,Z=t.p(F),ee=n(m),he=(ee.utcOffset()-this.utcOffset())*I,ie=this-ee,re=function(){return t.m(D,ee)};switch(Z){case _:G=re()/12;break;case c:G=re();break;case l:G=re()/3;break;case o:G=(ie-he)/6048e5;break;case E:G=(ie-he)/864e5;break;case A:G=ie/g;break;case B:G=ie/I;break;case b:G=ie/f;break;default:G=ie}return j?G:t.a(G)},O.daysInMonth=function(){return this.endOf(c).$D},O.$locale=function(){return k[this.$L]},O.locale=function(m,F){if(!m)return this.$L;var j=this.clone(),G=s(m,F,!0);return G&&(j.$L=G),j},O.clone=function(){return t.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},S}(),u=i.prototype;return n.prototype=u,[["$ms",y],["$s",b],["$m",B],["$H",A],["$W",E],["$M",c],["$y",_],["$D",h]].forEach(function(S){u[S[1]]=function(O){return this.$g(O,S[0],S[1])}}),n.extend=function(S,O){return S.$i||(S(O,i,n),S.$i=!0),n},n.locale=s,n.isDayjs=P,n.unix=function(S){return n(1e3*S)},n.en=k[q],n.Ls=k,n.p={},n})})(qn);var kr=qn.exports;const ct=Wn(kr),Sr=()=>{const[v,C]=yt([]),[{checkData:f},I]=Dn(),g=dr(null),y=ct();mt(()=>{const B=Object.keys(f);let A=y;if(B.length>0){const h=B.sort((x,w)=>ct(x).valueOf()-ct(w).valueOf());A=ct(h[0])}const E=A.startOf("month"),l=y.startOf("month").add(2,"month").diff(E,"month")+1,_=[];for(let h=0;h<l;h++){const x=E.add(h,"month"),w=x.daysInMonth(),N=x.startOf("month").day(),L=[];for(let $=1;$<=w;$++){const q=x.date($),k=q.format("YYYY-MM-DD"),p=q.day()===0||q.day()===6,P=q.isSame(y,"day");L.push({day:$,isCurrentMonth:!0,date:k,isWeekend:p,isToday:P})}const K=[];for(let $=0;$<N;$++)K.push({isBlank:!0});_.push({month:x.format("YYYY年MM月"),yearMonth:x.format("YYYY-MM"),days:[...K,...L],isCurrentMonth:x.isSame(y,"month")})}C(_)},[f]),mt(()=>{g.current&&g.current.scrollIntoView({block:"start"})},[v]);const b=B=>{I({page:it.CHECK,checkDay:B})};return pe("div",{className:"h-screen",children:pe("div",{className:"max-w-4xl mx-auto",children:v.map(B=>pe("div",{ref:B.isCurrentMonth?g:null,className:"mb-4 p-4",children:[pe("h2",{className:"text-xl font-bold mb-4 px-2 py-1 rounded text-gray-800",onClick:()=>b(B.yearMonth),children:B.month}),pe("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["日","一","二","三","四","五","六"].map(A=>pe("div",{className:"text-center font-semibold text-sm text-gray-600",children:A},A))}),pe("div",{className:"grid grid-cols-7 gap-1",children:B.days.map((A,E)=>{var o,c,l;return A.isBlank?pe("div",{className:"h-10"},`blank-${E}`):pe("div",{onClick:()=>b(A.date),className:`relative h-10 flex items-center justify-center rounded cursor-pointer transition-colors ${A.isToday?"bg-blue-500 font-bold":A.isWeekend?"bg-red-50 text-red-600":"bg-gray-50 hover:bg-gray-100"} ${(o=f[A.date])!=null&&o.length?"bg-green-100 text-green-800 border-2 border-green-400":""}`,children:pe("div",{className:"flex items-center gap-1",children:[A.day,!!((c=f[A.date])!=null&&c.length)&&pe("span",{className:"absolute right-0 top-0 text-green-800 text-xs rounded-full w-4 h-4 flex items-center justify-center",children:["(",(l=f[A.date])==null?void 0:l.length,")"]})]})},A.date)})})]},B.yearMonth))})})},_r=v=>typeof v=="string"?new TextEncoder().encode(v).buffer:v.arrayBuffer?v.arrayBuffer():v,mr=async v=>{const{pub:C}=await an(),f=await _r(v),I=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),g=crypto.getRandomValues(new Uint8Array(12)),y=await crypto.subtle.encrypt({name:"AES-GCM",iv:g},I,f),b=await crypto.subtle.exportKey("raw",I),B=await crypto.subtle.encrypt({name:"RSA-OAEP"},C,b);return vr({c:Zt(y),iv:Zt(g),k:Zt(B),t:v.type})},Je=async v=>{const{pri:C}=await an(),{c:f,iv:I,k:g,t:y}=yr(v),b=await crypto.subtle.decrypt({name:"RSA-OAEP"},C,St(g)),B=await crypto.subtle.importKey("raw",b,"AES-GCM",!1,["decrypt"]),A=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(St(I))},B,St(f));return new Blob([A],{type:y})};var Qn={exports:{}};(function(v,C){(function(I,g){v.exports=g()})(Gn,function(){return function(f){var I={};function g(y){if(I[y])return I[y].exports;var b=I[y]={i:y,l:!1,exports:{}};return f[y].call(b.exports,b,b.exports,g),b.l=!0,b.exports}return g.m=f,g.c=I,g.d=function(y,b,B){g.o(y,b)||Object.defineProperty(y,b,{enumerable:!0,get:B})},g.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},g.t=function(y,b){if(b&1&&(y=g(y)),b&8||b&4&&typeof y=="object"&&y&&y.__esModule)return y;var B=Object.create(null);if(g.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:y}),b&2&&typeof y!="string")for(var A in y)g.d(B,A,(function(E){return y[E]}).bind(null,A));return B},g.n=function(y){var b=y&&y.__esModule?function(){return y.default}:function(){return y};return g.d(b,"a",b),b},g.o=function(y,b){return Object.prototype.hasOwnProperty.call(y,b)},g.p="/dist/",g(g.s="./index.js")}({"./index.js":function(f,I,g){var y=g("./src/cos.js");f.exports=y},"./lib/base64.js":function(f,I){var g=function(y){y=y||{};var b=y.Base64,B="2.1.9",A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=function(i){for(var u={},S=0,O=i.length;S<O;S++)u[i.charAt(S)]=S;return u}(A),o=String.fromCharCode,c=function(u){if(u.length<2){var S=u.charCodeAt(0);return S<128?u:S<2048?o(192|S>>>6)+o(128|S&63):o(224|S>>>12&15)+o(128|S>>>6&63)+o(128|S&63)}else{var S=65536+(u.charCodeAt(0)-55296)*1024+(u.charCodeAt(1)-56320);return o(240|S>>>18&7)+o(128|S>>>12&63)+o(128|S>>>6&63)+o(128|S&63)}},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,_=function(u){return u.replace(l,c)},h=function(u){var S=[0,2,1][u.length%3],O=u.charCodeAt(0)<<16|(u.length>1?u.charCodeAt(1):0)<<8|(u.length>2?u.charCodeAt(2):0),m=[A.charAt(O>>>18),A.charAt(O>>>12&63),S>=2?"=":A.charAt(O>>>6&63),S>=1?"=":A.charAt(O&63)];return m.join("")},x=y.btoa?function(i){return y.btoa(i)}:function(i){return i.replace(/[\s\S]{1,3}/g,h)},w=function(i){return x(_(i))},N=function(u,S){return S?w(String(u)).replace(/[+\/]/g,function(O){return O=="+"?"-":"_"}).replace(/=/g,""):w(String(u))},L=function(u){return N(u,!0)},K=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),$=function(u){switch(u.length){case 4:var S=(7&u.charCodeAt(0))<<18|(63&u.charCodeAt(1))<<12|(63&u.charCodeAt(2))<<6|63&u.charCodeAt(3),O=S-65536;return o((O>>>10)+55296)+o((O&1023)+56320);case 3:return o((15&u.charCodeAt(0))<<12|(63&u.charCodeAt(1))<<6|63&u.charCodeAt(2));default:return o((31&u.charCodeAt(0))<<6|63&u.charCodeAt(1))}},q=function(u){return u.replace(K,$)},k=function(u){var S=u.length,O=S%4,m=(S>0?E[u.charAt(0)]<<18:0)|(S>1?E[u.charAt(1)]<<12:0)|(S>2?E[u.charAt(2)]<<6:0)|(S>3?E[u.charAt(3)]:0),F=[o(m>>>16),o(m>>>8&255),o(m&255)];return F.length-=[0,0,2,1][O],F.join("")},p=y.atob?function(i){return y.atob(i)}:function(i){return i.replace(/[\s\S]{1,4}/g,k)},P=function(i){return q(p(i))},s=function(u){return P(String(u).replace(/[-_]/g,function(S){return S=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},n=function(){var u=y.Base64;return y.Base64=b,u},t={VERSION:B,atob:p,btoa:x,fromBase64:s,toBase64:N,utob:_,encode:N,encodeURI:L,btou:q,decode:s,noConflict:n};return t}();f.exports=g},"./lib/crypto.js":function(f,I,g){(function(y){var b=g("./node_modules/@babel/runtime/helpers/typeof.js"),B=B||function(A,E){var o={},c=o.lib={},l=function(){},_=c.Base={extend:function(k){l.prototype=this;var p=new l;return k&&p.mixIn(k),p.hasOwnProperty("init")||(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var k=this.extend();return k.init.apply(k,arguments),k},init:function(){},mixIn:function(k){for(var p in k)k.hasOwnProperty(p)&&(this[p]=k[p]);k.hasOwnProperty("toString")&&(this.toString=k.toString)},clone:function(){return this.init.prototype.extend(this)}},h=c.WordArray=_.extend({init:function(k,p){k=this.words=k||[],this.sigBytes=p!=E?p:4*k.length},toString:function(k){return(k||w).stringify(this)},concat:function(k){var p=this.words,P=k.words,s=this.sigBytes;if(k=k.sigBytes,this.clamp(),s%4)for(var n=0;n<k;n++)p[s+n>>>2]|=(P[n>>>2]>>>24-8*(n%4)&255)<<24-8*((s+n)%4);else if(65535<P.length)for(n=0;n<k;n+=4)p[s+n>>>2]=P[n>>>2];else p.push.apply(p,P);return this.sigBytes+=k,this},clamp:function(){var k=this.words,p=this.sigBytes;k[p>>>2]&=4294967295<<32-8*(p%4),k.length=A.ceil(p/4)},clone:function(){var k=_.clone.call(this);return k.words=this.words.slice(0),k},random:function(k){for(var p=[],P=0;P<k;P+=4)p.push(4294967296*A.random()|0);return new h.init(p,k)}}),x=o.enc={},w=x.Hex={stringify:function(k){var p=k.words;k=k.sigBytes;for(var P=[],s=0;s<k;s++){var n=p[s>>>2]>>>24-8*(s%4)&255;P.push((n>>>4).toString(16)),P.push((n&15).toString(16))}return P.join("")},parse:function(k){for(var p=k.length,P=[],s=0;s<p;s+=2)P[s>>>3]|=parseInt(k.substr(s,2),16)<<24-4*(s%8);return new h.init(P,p/2)}},N=x.Latin1={stringify:function(k){var p=k.words;k=k.sigBytes;for(var P=[],s=0;s<k;s++)P.push(String.fromCharCode(p[s>>>2]>>>24-8*(s%4)&255));return P.join("")},parse:function(k){for(var p=k.length,P=[],s=0;s<p;s++)P[s>>>2]|=(k.charCodeAt(s)&255)<<24-8*(s%4);return new h.init(P,p)}},L=x.Utf8={stringify:function(k){try{return decodeURIComponent(escape(N.stringify(k)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(k){return N.parse(unescape(encodeURIComponent(k)))}},K=c.BufferedBlockAlgorithm=_.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(k){typeof k=="string"&&(k=L.parse(k)),this._data.concat(k),this._nDataBytes+=k.sigBytes},_process:function(k){var p=this._data,P=p.words,s=p.sigBytes,n=this.blockSize,t=s/(4*n),t=k?A.ceil(t):A.max((t|0)-this._minBufferSize,0);if(k=t*n,s=A.min(4*k,s),k){for(var i=0;i<k;i+=n)this._doProcessBlock(P,i);i=P.splice(0,k),p.sigBytes-=s}return new h.init(i,s)},clone:function(){var k=_.clone.call(this);return k._data=this._data.clone(),k},_minBufferSize:0});c.Hasher=K.extend({cfg:_.extend(),init:function(k){this.cfg=this.cfg.extend(k),this.reset()},reset:function(){K.reset.call(this),this._doReset()},update:function(k){return this._append(k),this._process(),this},finalize:function(k){return k&&this._append(k),this._doFinalize()},blockSize:16,_createHelper:function(k){return function(p,P){return new k.init(P).finalize(p)}},_createHmacHelper:function(k){return function(p,P){return new $.HMAC.init(k,P).finalize(p)}}});var $=o.algo={};return o}(Math);(function(){var A=B,l=A.lib,E=l.WordArray,o=l.Hasher,c=[],l=A.algo.SHA1=o.extend({_doReset:function(){this._hash=new E.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(h,x){for(var w=this._hash.words,N=w[0],L=w[1],K=w[2],$=w[3],q=w[4],k=0;80>k;k++){if(16>k)c[k]=h[x+k]|0;else{var p=c[k-3]^c[k-8]^c[k-14]^c[k-16];c[k]=p<<1|p>>>31}p=(N<<5|N>>>27)+q+c[k],p=20>k?p+((L&K|~L&$)+1518500249):40>k?p+((L^K^$)+1859775393):60>k?p+((L&K|L&$|K&$)-1894007588):p+((L^K^$)-899497514),q=$,$=K,K=L<<30|L>>>2,L=N,N=p}w[0]=w[0]+N|0,w[1]=w[1]+L|0,w[2]=w[2]+K|0,w[3]=w[3]+$|0,w[4]=w[4]+q|0},_doFinalize:function(){var h=this._data,x=h.words,w=8*this._nDataBytes,N=8*h.sigBytes;return x[N>>>5]|=128<<24-N%32,x[(N+64>>>9<<4)+14]=Math.floor(w/4294967296),x[(N+64>>>9<<4)+15]=w,h.sigBytes=4*x.length,this._process(),this._hash},clone:function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h}});A.SHA1=o._createHelper(l),A.HmacSHA1=o._createHmacHelper(l)})(),function(){var A=B,E=A.enc.Utf8;A.algo.HMAC=A.lib.Base.extend({init:function(c,l){c=this._hasher=new c.init,typeof l=="string"&&(l=E.parse(l));var _=c.blockSize,h=4*_;l.sigBytes>h&&(l=c.finalize(l)),l.clamp();for(var x=this._oKey=l.clone(),w=this._iKey=l.clone(),N=x.words,L=w.words,K=0;K<_;K++)N[K]^=1549556828,L[K]^=909522486;x.sigBytes=w.sigBytes=h,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var l=this._hasher;return c=l.finalize(c),l.reset(),l.finalize(this._oKey.clone().concat(c))}})}(),function(){var A=B,E=A.lib,o=E.WordArray,c=A.enc;c.Base64={stringify:function(_){var h=_.words,x=_.sigBytes,w=this._map;_.clamp();for(var N=[],L=0;L<x;L+=3)for(var K=h[L>>>2]>>>24-L%4*8&255,$=h[L+1>>>2]>>>24-(L+1)%4*8&255,q=h[L+2>>>2]>>>24-(L+2)%4*8&255,k=K<<16|$<<8|q,p=0;p<4&&L+p*.75<x;p++)N.push(w.charAt(k>>>6*(3-p)&63));var P=w.charAt(64);if(P)for(;N.length%4;)N.push(P);return N.join("")},parse:function(_){var h=_.length,x=this._map,w=x.charAt(64);if(w){var N=_.indexOf(w);N!=-1&&(h=N)}for(var L=[],K=0,$=0;$<h;$++)if($%4){var q=x.indexOf(_.charAt($-1))<<$%4*2,k=x.indexOf(_.charAt($))>>>6-$%4*2;L[K>>>2]|=(q|k)<<24-K%4*8,K++}return o.create(L,K)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),b(y)==="object"?y.exports=B:window.CryptoJS=B}).call(this,g("./node_modules/webpack/buildin/module.js")(f))},"./lib/md5.js":function(f,I,g){(function(y){var b,B=g("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var A=(typeof window>"u"?"undefined":B(window))==="object",E=A?window:{};E.JS_MD5_NO_WINDOW&&(A=!1);var o=!A&&(typeof self>"u"?"undefined":B(self))==="object";o&&(E=self);var c=!E.JS_MD5_NO_COMMON_JS&&B(y)==="object"&&y.exports,l=g("./node_modules/webpack/buildin/amd-options.js"),_=!E.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",h="0123456789abcdef".split(""),x=[128,32768,8388608,-2147483648],w=[0,8,16,24],N=["hex","array","digest","buffer","arrayBuffer","base64"],L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),K=[],$;if(_){var q=new ArrayBuffer(68);$=new Uint8Array(q),K=new Uint32Array(q)}(E.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),_&&(E.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return B(n)==="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var k=function(t){return function(i,u){return new P(!0).update(i,u)[t]()}},p=function(){var t=k("hex");t.getCtx=t.create=function(){return new P},t.update=function(S){return t.create().update(S)};for(var i=0;i<N.length;++i){var u=N[i];t[u]=k(u)}return t};function P(n){if(n)K[0]=K[16]=K[1]=K[2]=K[3]=K[4]=K[5]=K[6]=K[7]=K[8]=K[9]=K[10]=K[11]=K[12]=K[13]=K[14]=K[15]=0,this.blocks=K,this.buffer8=$;else if(_){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}P.prototype.update=function(n,t){if(!this.finalized){for(var i,u=0,S,O=n.length,m=this.blocks,F=this.buffer8;u<O;){if(this.hashed&&(this.hashed=!1,m[0]=m[16],m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0),_)for(S=this.start;u<O&&S<64;++u)i=n.charCodeAt(u),t||i<128?F[S++]=i:i<2048?(F[S++]=192|i>>6,F[S++]=128|i&63):i<55296||i>=57344?(F[S++]=224|i>>12,F[S++]=128|i>>6&63,F[S++]=128|i&63):(i=65536+((i&1023)<<10|n.charCodeAt(++u)&1023),F[S++]=240|i>>18,F[S++]=128|i>>12&63,F[S++]=128|i>>6&63,F[S++]=128|i&63);else for(S=this.start;u<O&&S<64;++u)i=n.charCodeAt(u),t||i<128?m[S>>2]|=i<<w[S++&3]:i<2048?(m[S>>2]|=(192|i>>6)<<w[S++&3],m[S>>2]|=(128|i&63)<<w[S++&3]):i<55296||i>=57344?(m[S>>2]|=(224|i>>12)<<w[S++&3],m[S>>2]|=(128|i>>6&63)<<w[S++&3],m[S>>2]|=(128|i&63)<<w[S++&3]):(i=65536+((i&1023)<<10|n.charCodeAt(++u)&1023),m[S>>2]|=(240|i>>18)<<w[S++&3],m[S>>2]|=(128|i>>12&63)<<w[S++&3],m[S>>2]|=(128|i>>6&63)<<w[S++&3],m[S>>2]|=(128|i&63)<<w[S++&3]);this.lastByteIndex=S,this.bytes+=S-this.start,S>=64?(this.start=S-64,this.hash(),this.hashed=!0):this.start=S}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},P.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,t=this.lastByteIndex;n[t>>2]|=x[t&3],t>=56&&(this.hashed||this.hash(),n[0]=n[16],n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.bytes<<3,n[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},P.prototype.hash=function(){var n,t,i,u,S,O,m=this.blocks;this.first?(n=m[0]-680876937,n=(n<<7|n>>>25)-271733879<<0,u=(-1732584194^n&2004318071)+m[1]-117830708,u=(u<<12|u>>>20)+n<<0,i=(-271733879^u&(n^-271733879))+m[2]-1126478375,i=(i<<17|i>>>15)+u<<0,t=(n^i&(u^n))+m[3]-1316259209,t=(t<<22|t>>>10)+i<<0):(n=this.h0,t=this.h1,i=this.h2,u=this.h3,n+=(u^t&(i^u))+m[0]-680876936,n=(n<<7|n>>>25)+t<<0,u+=(i^n&(t^i))+m[1]-389564586,u=(u<<12|u>>>20)+n<<0,i+=(t^u&(n^t))+m[2]+606105819,i=(i<<17|i>>>15)+u<<0,t+=(n^i&(u^n))+m[3]-1044525330,t=(t<<22|t>>>10)+i<<0),n+=(u^t&(i^u))+m[4]-176418897,n=(n<<7|n>>>25)+t<<0,u+=(i^n&(t^i))+m[5]+1200080426,u=(u<<12|u>>>20)+n<<0,i+=(t^u&(n^t))+m[6]-1473231341,i=(i<<17|i>>>15)+u<<0,t+=(n^i&(u^n))+m[7]-45705983,t=(t<<22|t>>>10)+i<<0,n+=(u^t&(i^u))+m[8]+1770035416,n=(n<<7|n>>>25)+t<<0,u+=(i^n&(t^i))+m[9]-1958414417,u=(u<<12|u>>>20)+n<<0,i+=(t^u&(n^t))+m[10]-42063,i=(i<<17|i>>>15)+u<<0,t+=(n^i&(u^n))+m[11]-1990404162,t=(t<<22|t>>>10)+i<<0,n+=(u^t&(i^u))+m[12]+1804603682,n=(n<<7|n>>>25)+t<<0,u+=(i^n&(t^i))+m[13]-40341101,u=(u<<12|u>>>20)+n<<0,i+=(t^u&(n^t))+m[14]-1502002290,i=(i<<17|i>>>15)+u<<0,t+=(n^i&(u^n))+m[15]+1236535329,t=(t<<22|t>>>10)+i<<0,n+=(i^u&(t^i))+m[1]-165796510,n=(n<<5|n>>>27)+t<<0,u+=(t^i&(n^t))+m[6]-1069501632,u=(u<<9|u>>>23)+n<<0,i+=(n^t&(u^n))+m[11]+643717713,i=(i<<14|i>>>18)+u<<0,t+=(u^n&(i^u))+m[0]-373897302,t=(t<<20|t>>>12)+i<<0,n+=(i^u&(t^i))+m[5]-701558691,n=(n<<5|n>>>27)+t<<0,u+=(t^i&(n^t))+m[10]+38016083,u=(u<<9|u>>>23)+n<<0,i+=(n^t&(u^n))+m[15]-660478335,i=(i<<14|i>>>18)+u<<0,t+=(u^n&(i^u))+m[4]-405537848,t=(t<<20|t>>>12)+i<<0,n+=(i^u&(t^i))+m[9]+568446438,n=(n<<5|n>>>27)+t<<0,u+=(t^i&(n^t))+m[14]-1019803690,u=(u<<9|u>>>23)+n<<0,i+=(n^t&(u^n))+m[3]-187363961,i=(i<<14|i>>>18)+u<<0,t+=(u^n&(i^u))+m[8]+1163531501,t=(t<<20|t>>>12)+i<<0,n+=(i^u&(t^i))+m[13]-1444681467,n=(n<<5|n>>>27)+t<<0,u+=(t^i&(n^t))+m[2]-51403784,u=(u<<9|u>>>23)+n<<0,i+=(n^t&(u^n))+m[7]+1735328473,i=(i<<14|i>>>18)+u<<0,t+=(u^n&(i^u))+m[12]-1926607734,t=(t<<20|t>>>12)+i<<0,S=t^i,n+=(S^u)+m[5]-378558,n=(n<<4|n>>>28)+t<<0,u+=(S^n)+m[8]-2022574463,u=(u<<11|u>>>21)+n<<0,O=u^n,i+=(O^t)+m[11]+1839030562,i=(i<<16|i>>>16)+u<<0,t+=(O^i)+m[14]-35309556,t=(t<<23|t>>>9)+i<<0,S=t^i,n+=(S^u)+m[1]-1530992060,n=(n<<4|n>>>28)+t<<0,u+=(S^n)+m[4]+1272893353,u=(u<<11|u>>>21)+n<<0,O=u^n,i+=(O^t)+m[7]-155497632,i=(i<<16|i>>>16)+u<<0,t+=(O^i)+m[10]-1094730640,t=(t<<23|t>>>9)+i<<0,S=t^i,n+=(S^u)+m[13]+681279174,n=(n<<4|n>>>28)+t<<0,u+=(S^n)+m[0]-358537222,u=(u<<11|u>>>21)+n<<0,O=u^n,i+=(O^t)+m[3]-722521979,i=(i<<16|i>>>16)+u<<0,t+=(O^i)+m[6]+76029189,t=(t<<23|t>>>9)+i<<0,S=t^i,n+=(S^u)+m[9]-640364487,n=(n<<4|n>>>28)+t<<0,u+=(S^n)+m[12]-421815835,u=(u<<11|u>>>21)+n<<0,O=u^n,i+=(O^t)+m[15]+530742520,i=(i<<16|i>>>16)+u<<0,t+=(O^i)+m[2]-995338651,t=(t<<23|t>>>9)+i<<0,n+=(i^(t|~u))+m[0]-198630844,n=(n<<6|n>>>26)+t<<0,u+=(t^(n|~i))+m[7]+1126891415,u=(u<<10|u>>>22)+n<<0,i+=(n^(u|~t))+m[14]-1416354905,i=(i<<15|i>>>17)+u<<0,t+=(u^(i|~n))+m[5]-57434055,t=(t<<21|t>>>11)+i<<0,n+=(i^(t|~u))+m[12]+1700485571,n=(n<<6|n>>>26)+t<<0,u+=(t^(n|~i))+m[3]-1894986606,u=(u<<10|u>>>22)+n<<0,i+=(n^(u|~t))+m[10]-1051523,i=(i<<15|i>>>17)+u<<0,t+=(u^(i|~n))+m[1]-2054922799,t=(t<<21|t>>>11)+i<<0,n+=(i^(t|~u))+m[8]+1873313359,n=(n<<6|n>>>26)+t<<0,u+=(t^(n|~i))+m[15]-30611744,u=(u<<10|u>>>22)+n<<0,i+=(n^(u|~t))+m[6]-1560198380,i=(i<<15|i>>>17)+u<<0,t+=(u^(i|~n))+m[13]+1309151649,t=(t<<21|t>>>11)+i<<0,n+=(i^(t|~u))+m[4]-145523070,n=(n<<6|n>>>26)+t<<0,u+=(t^(n|~i))+m[11]-1120210379,u=(u<<10|u>>>22)+n<<0,i+=(n^(u|~t))+m[2]+718787259,i=(i<<15|i>>>17)+u<<0,t+=(u^(i|~n))+m[9]-343485551,t=(t<<21|t>>>11)+i<<0,this.first?(this.h0=n+1732584193<<0,this.h1=t-271733879<<0,this.h2=i-1732584194<<0,this.h3=u+271733878<<0,this.first=!1):(this.h0=this.h0+n<<0,this.h1=this.h1+t<<0,this.h2=this.h2+i<<0,this.h3=this.h3+u<<0)},P.prototype.hex=function(){this.finalize();var n=this.h0,t=this.h1,i=this.h2,u=this.h3;return h[n>>4&15]+h[n&15]+h[n>>12&15]+h[n>>8&15]+h[n>>20&15]+h[n>>16&15]+h[n>>28&15]+h[n>>24&15]+h[t>>4&15]+h[t&15]+h[t>>12&15]+h[t>>8&15]+h[t>>20&15]+h[t>>16&15]+h[t>>28&15]+h[t>>24&15]+h[i>>4&15]+h[i&15]+h[i>>12&15]+h[i>>8&15]+h[i>>20&15]+h[i>>16&15]+h[i>>28&15]+h[i>>24&15]+h[u>>4&15]+h[u&15]+h[u>>12&15]+h[u>>8&15]+h[u>>20&15]+h[u>>16&15]+h[u>>28&15]+h[u>>24&15]},P.prototype.toString=P.prototype.hex,P.prototype.digest=function(n){if(n==="hex")return this.hex();this.finalize();var t=this.h0,i=this.h1,u=this.h2,S=this.h3,O=[t&255,t>>8&255,t>>16&255,t>>24&255,i&255,i>>8&255,i>>16&255,i>>24&255,u&255,u>>8&255,u>>16&255,u>>24&255,S&255,S>>8&255,S>>16&255,S>>24&255];return O},P.prototype.array=P.prototype.digest,P.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(16),t=new Uint32Array(n);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,n},P.prototype.buffer=P.prototype.arrayBuffer,P.prototype.base64=function(){for(var n,t,i,u="",S=this.array(),O=0;O<15;)n=S[O++],t=S[O++],i=S[O++],u+=L[n>>>2]+L[(n<<4|t>>>4)&63]+L[(t<<2|i>>>6)&63]+L[i&63];return n=S[O],u+=L[n>>>2]+L[n<<4&63]+"==",u};var s=p();c?y.exports=s:(E.md5=s,l&&(b=(function(){return s}).call(s,g,s,y),b!==void 0&&(y.exports=b)))})()}).call(this,g("./node_modules/webpack/buildin/module.js")(f))},"./lib/request.js":function(f,I,g){var y=g("./node_modules/@babel/runtime/helpers/typeof.js"),b=function(l){switch(y(l)){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}},B=function(l,_,h,x){return _=_||"&",h=h||"=",l===null&&(l=void 0),y(l)==="object"?Object.keys(l).map(function(w){var N=encodeURIComponent(b(w))+h;return Array.isArray(l[w])?l[w].map(function(L){return N+encodeURIComponent(b(L))}).join(_):N+encodeURIComponent(b(l[w]))}).filter(Boolean).join(_):""},A=function(l,_,h){var x={},w=_.getAllResponseHeaders();return w&&w.length>0&&w.trim().split(`
`).forEach(function(N){if(N){var L=N.indexOf(":"),K=N.substr(0,L).trim().toLowerCase(),$=N.substr(L+1).trim();x[K]=$}}),{error:l,statusCode:_.status,statusMessage:_.statusText,headers:x,body:h}},E=function(l,_){return!_&&_==="text"?l.responseText:l.response},o=function(l,_){var h=(l.method||"GET").toUpperCase(),x=l.url;if(l.qs){var w=B(l.qs);w&&(x+=(x.indexOf("?")===-1?"?":"&")+w)}var N=new XMLHttpRequest;if(N.open(h,x,!0),N.responseType=l.dataType||"text",l.xhrFields)for(var L in l.xhrFields)N[L]=l.xhrFields[L];var K=l.headers;if(K)for(var $ in K)K.hasOwnProperty($)&&$.toLowerCase()!=="content-length"&&$.toLowerCase()!=="user-agent"&&$.toLowerCase()!=="origin"&&$.toLowerCase()!=="host"&&N.setRequestHeader($,K[$]);return l.onProgress&&N.upload&&(N.upload.onprogress=l.onProgress),l.onDownloadProgress&&(N.onprogress=l.onDownloadProgress),l.timeout&&(N.timeout=l.timeout),N.ontimeout=function(q){var k=new Error("timeout");_(A(k,N))},N.onload=function(){_(A(null,N,E(N,l.dataType)))},N.onerror=function(q){var k=E(N,l.dataType);if(k)_(A(null,N,k));else{var p=N.statusText;!p&&N.status===0&&(p=new Error("CORS blocked or network error")),_(A(p,N,k))}},N.send(l.body||""),N};f.exports=o},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(f,I){function g(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}f.exports=g,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(f,I,g){var y=g("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function b(A,E){for(var o=0;o<E.length;o++){var c=E[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(A,y(c.key),c)}}function B(A,E,o){return E&&b(A.prototype,E),o&&b(A,o),Object.defineProperty(A,"prototype",{writable:!1}),A}f.exports=B,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(f,I,g){var y=g("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function b(B,A,E){return(A=y(A))in B?Object.defineProperty(B,A,{value:E,enumerable:!0,configurable:!0,writable:!0}):B[A]=E,B}f.exports=b,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(f,I,g){var y=g("./node_modules/@babel/runtime/helpers/typeof.js").default;function b(B,A){if(y(B)!="object"||!B)return B;var E=B[Symbol.toPrimitive];if(E!==void 0){var o=E.call(B,A||"default");if(y(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(B)}f.exports=b,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(f,I,g){var y=g("./node_modules/@babel/runtime/helpers/typeof.js").default,b=g("./node_modules/@babel/runtime/helpers/toPrimitive.js");function B(A){var E=b(A,"string");return y(E)=="symbol"?E:E+""}f.exports=B,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(f,I){function g(y){"@babel/helpers - typeof";return f.exports=g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f.exports.__esModule=!0,f.exports.default=f.exports,g(y)}f.exports=g,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/fast-xml-parser/src/fxp.js":function(f,I,g){const y=g("./node_modules/fast-xml-parser/src/validator.js"),b=g("./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js"),B=g("./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js");f.exports={XMLParser:b,XMLValidator:y,XMLBuilder:B}},"./node_modules/fast-xml-parser/src/ignoreAttributes.js":function(f,I){function g(y){return typeof y=="function"?y:Array.isArray(y)?b=>{for(const B of y)if(typeof B=="string"&&b===B||B instanceof RegExp&&B.test(b))return!0}:()=>!1}f.exports=g},"./node_modules/fast-xml-parser/src/util.js":function(f,I,g){const y=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",b=y+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",B="["+y+"]["+b+"]*",A=new RegExp("^"+B+"$"),E=function(c,l){const _=[];let h=l.exec(c);for(;h;){const x=[];x.startIndex=l.lastIndex-h[0].length;const w=h.length;for(let N=0;N<w;N++)x.push(h[N]);_.push(x),h=l.exec(c)}return _},o=function(c){const l=A.exec(c);return!(l===null||typeof l>"u")};I.isExist=function(c){return typeof c<"u"},I.isEmptyObject=function(c){return Object.keys(c).length===0},I.merge=function(c,l,_){if(l){const h=Object.keys(l),x=h.length;for(let w=0;w<x;w++)_==="strict"?c[h[w]]=[l[h[w]]]:c[h[w]]=l[h[w]]}},I.getValue=function(c){return I.isExist(c)?c:""},I.isName=o,I.getAllMatches=E,I.nameRegexp=B},"./node_modules/fast-xml-parser/src/validator.js":function(f,I,g){const y=g("./node_modules/fast-xml-parser/src/util.js"),b={allowBooleanAttributes:!1,unpairedTags:[]};I.validate=function(k,p){p=Object.assign({},b,p);const P=[];let s=!1,n=!1;k[0]==="\uFEFF"&&(k=k.substr(1));for(let t=0;t<k.length;t++)if(k[t]==="<"&&k[t+1]==="?"){if(t+=2,t=A(k,t),t.err)return t}else if(k[t]==="<"){let i=t;if(t++,k[t]==="!"){t=E(k,t);continue}else{let u=!1;k[t]==="/"&&(u=!0,t++);let S="";for(;t<k.length&&k[t]!==">"&&k[t]!==" "&&k[t]!=="	"&&k[t]!==`
`&&k[t]!=="\r";t++)S+=k[t];if(S=S.trim(),S[S.length-1]==="/"&&(S=S.substring(0,S.length-1),t--),!K(S)){let F;return S.trim().length===0?F="Invalid space after '<'.":F="Tag '"+S+"' is an invalid name.",N("InvalidTag",F,$(k,t))}const O=l(k,t);if(O===!1)return N("InvalidAttr","Attributes for '"+S+"' have open quote.",$(k,t));let m=O.value;if(t=O.index,m[m.length-1]==="/"){const F=t-m.length;m=m.substring(0,m.length-1);const j=h(m,p);if(j===!0)s=!0;else return N(j.err.code,j.err.msg,$(k,F+j.err.line))}else if(u)if(O.tagClosed){if(m.trim().length>0)return N("InvalidTag","Closing tag '"+S+"' can't have attributes or invalid starting.",$(k,i));if(P.length===0)return N("InvalidTag","Closing tag '"+S+"' has not been opened.",$(k,i));{const F=P.pop();if(S!==F.tagName){let j=$(k,F.tagStartPos);return N("InvalidTag","Expected closing tag '"+F.tagName+"' (opened in line "+j.line+", col "+j.col+") instead of closing tag '"+S+"'.",$(k,i))}P.length==0&&(n=!0)}}else return N("InvalidTag","Closing tag '"+S+"' doesn't have proper closing.",$(k,t));else{const F=h(m,p);if(F!==!0)return N(F.err.code,F.err.msg,$(k,t-m.length+F.err.line));if(n===!0)return N("InvalidXml","Multiple possible root nodes found.",$(k,t));p.unpairedTags.indexOf(S)!==-1||P.push({tagName:S,tagStartPos:i}),s=!0}for(t++;t<k.length;t++)if(k[t]==="<")if(k[t+1]==="!"){t++,t=E(k,t);continue}else if(k[t+1]==="?"){if(t=A(k,++t),t.err)return t}else break;else if(k[t]==="&"){const F=w(k,t);if(F==-1)return N("InvalidChar","char '&' is not expected.",$(k,t));t=F}else if(n===!0&&!B(k[t]))return N("InvalidXml","Extra text at the end",$(k,t));k[t]==="<"&&t--}}else{if(B(k[t]))continue;return N("InvalidChar","char '"+k[t]+"' is not expected.",$(k,t))}if(s){if(P.length==1)return N("InvalidTag","Unclosed tag '"+P[0].tagName+"'.",$(k,P[0].tagStartPos));if(P.length>0)return N("InvalidXml","Invalid '"+JSON.stringify(P.map(t=>t.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return N("InvalidXml","Start tag expected.",1);return!0};function B(k){return k===" "||k==="	"||k===`
`||k==="\r"}function A(k,p){const P=p;for(;p<k.length;p++)if(k[p]=="?"||k[p]==" "){const s=k.substr(P,p-P);if(p>5&&s==="xml")return N("InvalidXml","XML declaration allowed only at the start of the document.",$(k,p));if(k[p]=="?"&&k[p+1]==">"){p++;break}else continue}return p}function E(k,p){if(k.length>p+5&&k[p+1]==="-"&&k[p+2]==="-"){for(p+=3;p<k.length;p++)if(k[p]==="-"&&k[p+1]==="-"&&k[p+2]===">"){p+=2;break}}else if(k.length>p+8&&k[p+1]==="D"&&k[p+2]==="O"&&k[p+3]==="C"&&k[p+4]==="T"&&k[p+5]==="Y"&&k[p+6]==="P"&&k[p+7]==="E"){let P=1;for(p+=8;p<k.length;p++)if(k[p]==="<")P++;else if(k[p]===">"&&(P--,P===0))break}else if(k.length>p+9&&k[p+1]==="["&&k[p+2]==="C"&&k[p+3]==="D"&&k[p+4]==="A"&&k[p+5]==="T"&&k[p+6]==="A"&&k[p+7]==="["){for(p+=8;p<k.length;p++)if(k[p]==="]"&&k[p+1]==="]"&&k[p+2]===">"){p+=2;break}}return p}const o='"',c="'";function l(k,p){let P="",s="",n=!1;for(;p<k.length;p++){if(k[p]===o||k[p]===c)s===""?s=k[p]:s!==k[p]||(s="");else if(k[p]===">"&&s===""){n=!0;break}P+=k[p]}return s!==""?!1:{value:P,index:p,tagClosed:n}}const _=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function h(k,p){const P=y.getAllMatches(k,_),s={};for(let n=0;n<P.length;n++){if(P[n][1].length===0)return N("InvalidAttr","Attribute '"+P[n][2]+"' has no space in starting.",q(P[n]));if(P[n][3]!==void 0&&P[n][4]===void 0)return N("InvalidAttr","Attribute '"+P[n][2]+"' is without value.",q(P[n]));if(P[n][3]===void 0&&!p.allowBooleanAttributes)return N("InvalidAttr","boolean attribute '"+P[n][2]+"' is not allowed.",q(P[n]));const t=P[n][2];if(!L(t))return N("InvalidAttr","Attribute '"+t+"' is an invalid name.",q(P[n]));if(!s.hasOwnProperty(t))s[t]=1;else return N("InvalidAttr","Attribute '"+t+"' is repeated.",q(P[n]))}return!0}function x(k,p){let P=/\d/;for(k[p]==="x"&&(p++,P=/[\da-fA-F]/);p<k.length;p++){if(k[p]===";")return p;if(!k[p].match(P))break}return-1}function w(k,p){if(p++,k[p]===";")return-1;if(k[p]==="#")return p++,x(k,p);let P=0;for(;p<k.length;p++,P++)if(!(k[p].match(/\w/)&&P<20)){if(k[p]===";")break;return-1}return p}function N(k,p,P){return{err:{code:k,msg:p,line:P.line||P,col:P.col}}}function L(k){return y.isName(k)}function K(k){return y.isName(k)}function $(k,p){const P=k.substring(0,p).split(/\r?\n/);return{line:P.length,col:P[P.length-1].length+1}}function q(k){return k.startIndex+k[1].length}},"./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js":function(f,I,g){const y=g("./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js"),b=g("./node_modules/fast-xml-parser/src/ignoreAttributes.js"),B={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(l,_){return _},attributeValueProcessor:function(l,_){return _},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function A(l){this.options=Object.assign({},B,l),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=b(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=c),this.processTextOrObjNode=E,this.options.format?(this.indentate=o,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}A.prototype.build=function(l){return this.options.preserveOrder?y(l,this.options):(Array.isArray(l)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(l={[this.options.arrayNodeName]:l}),this.j2x(l,0,[]).val)},A.prototype.j2x=function(l,_,h){let x="",w="";const N=h.join(".");for(let L in l)if(Object.prototype.hasOwnProperty.call(l,L))if(typeof l[L]>"u")this.isAttribute(L)&&(w+="");else if(l[L]===null)this.isAttribute(L)?w+="":L[0]==="?"?w+=this.indentate(_)+"<"+L+"?"+this.tagEndChar:w+=this.indentate(_)+"<"+L+"/"+this.tagEndChar;else if(l[L]instanceof Date)w+=this.buildTextValNode(l[L],L,"",_);else if(typeof l[L]!="object"){const K=this.isAttribute(L);if(K&&!this.ignoreAttributesFn(K,N))x+=this.buildAttrPairStr(K,""+l[L]);else if(!K)if(L===this.options.textNodeName){let $=this.options.tagValueProcessor(L,""+l[L]);w+=this.replaceEntitiesValue($)}else w+=this.buildTextValNode(l[L],L,"",_)}else if(Array.isArray(l[L])){const K=l[L].length;let $="",q="";for(let k=0;k<K;k++){const p=l[L][k];if(!(typeof p>"u"))if(p===null)L[0]==="?"?w+=this.indentate(_)+"<"+L+"?"+this.tagEndChar:w+=this.indentate(_)+"<"+L+"/"+this.tagEndChar;else if(typeof p=="object")if(this.options.oneListGroup){const P=this.j2x(p,_+1,h.concat(L));$+=P.val,this.options.attributesGroupName&&p.hasOwnProperty(this.options.attributesGroupName)&&(q+=P.attrStr)}else $+=this.processTextOrObjNode(p,L,_,h);else if(this.options.oneListGroup){let P=this.options.tagValueProcessor(L,p);P=this.replaceEntitiesValue(P),$+=P}else $+=this.buildTextValNode(p,L,"",_)}this.options.oneListGroup&&($=this.buildObjectNode($,L,q,_)),w+=$}else if(this.options.attributesGroupName&&L===this.options.attributesGroupName){const K=Object.keys(l[L]),$=K.length;for(let q=0;q<$;q++)x+=this.buildAttrPairStr(K[q],""+l[L][K[q]])}else w+=this.processTextOrObjNode(l[L],L,_,h);return{attrStr:x,val:w}},A.prototype.buildAttrPairStr=function(l,_){return _=this.options.attributeValueProcessor(l,""+_),_=this.replaceEntitiesValue(_),this.options.suppressBooleanAttributes&&_==="true"?" "+l:" "+l+'="'+_+'"'};function E(l,_,h,x){const w=this.j2x(l,h+1,x.concat(_));return l[this.options.textNodeName]!==void 0&&Object.keys(l).length===1?this.buildTextValNode(l[this.options.textNodeName],_,w.attrStr,h):this.buildObjectNode(w.val,_,w.attrStr,h)}A.prototype.buildObjectNode=function(l,_,h,x){if(l==="")return _[0]==="?"?this.indentate(x)+"<"+_+h+"?"+this.tagEndChar:this.indentate(x)+"<"+_+h+this.closeTag(_)+this.tagEndChar;{let w="</"+_+this.tagEndChar,N="";return _[0]==="?"&&(N="?",w=""),(h||h==="")&&l.indexOf("<")===-1?this.indentate(x)+"<"+_+h+N+">"+l+w:this.options.commentPropName!==!1&&_===this.options.commentPropName&&N.length===0?this.indentate(x)+`\x3C!--${l}-->`+this.newLine:this.indentate(x)+"<"+_+h+N+this.tagEndChar+l+this.indentate(x)+w}},A.prototype.closeTag=function(l){let _="";return this.options.unpairedTags.indexOf(l)!==-1?this.options.suppressUnpairedNode||(_="/"):this.options.suppressEmptyNode?_="/":_=`></${l}`,_},A.prototype.buildTextValNode=function(l,_,h,x){if(this.options.cdataPropName!==!1&&_===this.options.cdataPropName)return this.indentate(x)+`<![CDATA[${l}]]>`+this.newLine;if(this.options.commentPropName!==!1&&_===this.options.commentPropName)return this.indentate(x)+`\x3C!--${l}-->`+this.newLine;if(_[0]==="?")return this.indentate(x)+"<"+_+h+"?"+this.tagEndChar;{let w=this.options.tagValueProcessor(_,l);return w=this.replaceEntitiesValue(w),w===""?this.indentate(x)+"<"+_+h+this.closeTag(_)+this.tagEndChar:this.indentate(x)+"<"+_+h+">"+w+"</"+_+this.tagEndChar}},A.prototype.replaceEntitiesValue=function(l){if(l&&l.length>0&&this.options.processEntities)for(let _=0;_<this.options.entities.length;_++){const h=this.options.entities[_];l=l.replace(h.regex,h.val)}return l};function o(l){return this.options.indentBy.repeat(l)}function c(l){return l.startsWith(this.options.attributeNamePrefix)&&l!==this.options.textNodeName?l.substr(this.attrPrefixLen):!1}f.exports=A},"./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js":function(f,I){const g=`
`;function y(c,l){let _="";return l.format&&l.indentBy.length>0&&(_=g),b(c,l,"",_)}function b(c,l,_,h){let x="",w=!1;for(let N=0;N<c.length;N++){const L=c[N],K=B(L);if(K===void 0)continue;let $="";if(_.length===0?$=K:$=`${_}.${K}`,K===l.textNodeName){let s=L[K];E($,l)||(s=l.tagValueProcessor(K,s),s=o(s,l)),w&&(x+=h),x+=s,w=!1;continue}else if(K===l.cdataPropName){w&&(x+=h),x+=`<![CDATA[${L[K][0][l.textNodeName]}]]>`,w=!1;continue}else if(K===l.commentPropName){x+=h+`\x3C!--${L[K][0][l.textNodeName]}-->`,w=!0;continue}else if(K[0]==="?"){const s=A(L[":@"],l),n=K==="?xml"?"":h;let t=L[K][0][l.textNodeName];t=t.length!==0?" "+t:"",x+=n+`<${K}${t}${s}?>`,w=!0;continue}let q=h;q!==""&&(q+=l.indentBy);const k=A(L[":@"],l),p=h+`<${K}${k}`,P=b(L[K],l,$,q);l.unpairedTags.indexOf(K)!==-1?l.suppressUnpairedNode?x+=p+">":x+=p+"/>":(!P||P.length===0)&&l.suppressEmptyNode?x+=p+"/>":P&&P.endsWith(">")?x+=p+`>${P}${h}</${K}>`:(x+=p+">",P&&h!==""&&(P.includes("/>")||P.includes("</"))?x+=h+l.indentBy+P+h:x+=P,x+=`</${K}>`),w=!0}return x}function B(c){const l=Object.keys(c);for(let _=0;_<l.length;_++){const h=l[_];if(c.hasOwnProperty(h)&&h!==":@")return h}}function A(c,l){let _="";if(c&&!l.ignoreAttributes)for(let h in c){if(!c.hasOwnProperty(h))continue;let x=l.attributeValueProcessor(h,c[h]);x=o(x,l),x===!0&&l.suppressBooleanAttributes?_+=` ${h.substr(l.attributeNamePrefix.length)}`:_+=` ${h.substr(l.attributeNamePrefix.length)}="${x}"`}return _}function E(c,l){c=c.substr(0,c.length-l.textNodeName.length-1);let _=c.substr(c.lastIndexOf(".")+1);for(let h in l.stopNodes)if(l.stopNodes[h]===c||l.stopNodes[h]==="*."+_)return!0;return!1}function o(c,l){if(c&&c.length>0&&l.processEntities)for(let _=0;_<l.entities.length;_++){const h=l.entities[_];c=c.replace(h.regex,h.val)}return c}f.exports=y},"./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js":function(f,I,g){const y=g("./node_modules/fast-xml-parser/src/util.js");function b(h,x){const w={};if(h[x+3]==="O"&&h[x+4]==="C"&&h[x+5]==="T"&&h[x+6]==="Y"&&h[x+7]==="P"&&h[x+8]==="E"){x=x+9;let N=1,L=!1,K=!1,$="";for(;x<h.length;x++)if(h[x]==="<"&&!K){if(L&&E(h,x))x+=7,[entityName,val,x]=B(h,x+1),val.indexOf("&")===-1&&(w[_(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(L&&o(h,x))x+=8;else if(L&&c(h,x))x+=8;else if(L&&l(h,x))x+=9;else if(A)K=!0;else throw new Error("Invalid DOCTYPE");N++,$=""}else if(h[x]===">"){if(K?h[x-1]==="-"&&h[x-2]==="-"&&(K=!1,N--):N--,N===0)break}else h[x]==="["?L=!0:$+=h[x];if(N!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:w,i:x}}function B(h,x){let w="";for(;x<h.length&&h[x]!=="'"&&h[x]!=='"';x++)w+=h[x];if(w=w.trim(),w.indexOf(" ")!==-1)throw new Error("External entites are not supported");const N=h[x++];let L="";for(;x<h.length&&h[x]!==N;x++)L+=h[x];return[w,L,x]}function A(h,x){return h[x+1]==="!"&&h[x+2]==="-"&&h[x+3]==="-"}function E(h,x){return h[x+1]==="!"&&h[x+2]==="E"&&h[x+3]==="N"&&h[x+4]==="T"&&h[x+5]==="I"&&h[x+6]==="T"&&h[x+7]==="Y"}function o(h,x){return h[x+1]==="!"&&h[x+2]==="E"&&h[x+3]==="L"&&h[x+4]==="E"&&h[x+5]==="M"&&h[x+6]==="E"&&h[x+7]==="N"&&h[x+8]==="T"}function c(h,x){return h[x+1]==="!"&&h[x+2]==="A"&&h[x+3]==="T"&&h[x+4]==="T"&&h[x+5]==="L"&&h[x+6]==="I"&&h[x+7]==="S"&&h[x+8]==="T"}function l(h,x){return h[x+1]==="!"&&h[x+2]==="N"&&h[x+3]==="O"&&h[x+4]==="T"&&h[x+5]==="A"&&h[x+6]==="T"&&h[x+7]==="I"&&h[x+8]==="O"&&h[x+9]==="N"}function _(h){if(y.isName(h))return h;throw new Error(`Invalid entity name ${h}`)}f.exports=b},"./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js":function(f,I){const g={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(b,B){return B},attributeValueProcessor:function(b,B){return B},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(b,B,A){return b}},y=function(b){return Object.assign({},g,b)};I.buildOptions=y,I.defaultOptions=g},"./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js":function(f,I,g){const y=g("./node_modules/fast-xml-parser/src/util.js"),b=g("./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js"),B=g("./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js"),A=g("./node_modules/strnum/strnum.js"),E=g("./node_modules/fast-xml-parser/src/ignoreAttributes.js");class o{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(i,u)=>String.fromCharCode(Number.parseInt(u,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(i,u)=>String.fromCharCode(Number.parseInt(u,16))}},this.addExternalEntities=c,this.parseXml=w,this.parseTextData=l,this.resolveNameSpace=_,this.buildAttributesMap=x,this.isItStopNode=$,this.replaceEntitiesValue=L,this.readStopNodeData=P,this.saveTextToParentTag=K,this.addChild=N,this.ignoreAttributesFn=E(this.options.ignoreAttributes)}}function c(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const u=t[i];this.lastEntities[u]={regex:new RegExp("&"+u+";","g"),val:n[u]}}}function l(n,t,i,u,S,O,m){if(n!==void 0&&(this.options.trimValues&&!u&&(n=n.trim()),n.length>0)){m||(n=this.replaceEntitiesValue(n));const F=this.options.tagValueProcessor(t,n,i,S,O);return F==null?n:typeof F!=typeof n||F!==n?F:this.options.trimValues?s(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?s(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function _(n){if(this.options.removeNSPrefix){const t=n.split(":"),i=n.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(n=i+t[1])}return n}const h=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function x(n,t,i){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const u=y.getAllMatches(n,h),S=u.length,O={};for(let m=0;m<S;m++){const F=this.resolveNameSpace(u[m][1]);if(this.ignoreAttributesFn(F,t))continue;let j=u[m][4],G=this.options.attributeNamePrefix+F;if(F.length)if(this.options.transformAttributeName&&(G=this.options.transformAttributeName(G)),G==="__proto__"&&(G="#__proto__"),j!==void 0){this.options.trimValues&&(j=j.trim()),j=this.replaceEntitiesValue(j);const D=this.options.attributeValueProcessor(F,j,t);D==null?O[G]=j:typeof D!=typeof j||D!==j?O[G]=D:O[G]=s(j,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(O[G]=!0)}if(!Object.keys(O).length)return;if(this.options.attributesGroupName){const m={};return m[this.options.attributesGroupName]=O,m}return O}}const w=function(n){const t=new b("!xml");let i=t,u="",S="";for(let O=0;O<n.length;O++)if(n[O]==="<")if(n[O+1]==="/"){const F=k(n,">",O,"Closing Tag is not closed.");let j=n.substring(O+2,F).trim();if(this.options.removeNSPrefix){const Z=j.indexOf(":");Z!==-1&&(j=j.substr(Z+1))}this.options.transformTagName&&(j=this.options.transformTagName(j)),i&&(u=this.saveTextToParentTag(u,i,S));const G=S.substring(S.lastIndexOf(".")+1);if(j&&this.options.unpairedTags.indexOf(j)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${j}>`);let D=0;G&&this.options.unpairedTags.indexOf(G)!==-1?(D=S.lastIndexOf(".",S.lastIndexOf(".")-1),this.tagsNodeStack.pop()):D=S.lastIndexOf("."),S=S.substring(0,D),i=this.tagsNodeStack.pop(),u="",O=F}else if(n[O+1]==="?"){let F=p(n,O,!1,"?>");if(!F)throw new Error("Pi Tag is not closed.");if(u=this.saveTextToParentTag(u,i,S),!(this.options.ignoreDeclaration&&F.tagName==="?xml"||this.options.ignorePiTags)){const j=new b(F.tagName);j.add(this.options.textNodeName,""),F.tagName!==F.tagExp&&F.attrExpPresent&&(j[":@"]=this.buildAttributesMap(F.tagExp,S,F.tagName)),this.addChild(i,j,S)}O=F.closeIndex+1}else if(n.substr(O+1,3)==="!--"){const F=k(n,"-->",O+4,"Comment is not closed.");if(this.options.commentPropName){const j=n.substring(O+4,F-2);u=this.saveTextToParentTag(u,i,S),i.add(this.options.commentPropName,[{[this.options.textNodeName]:j}])}O=F}else if(n.substr(O+1,2)==="!D"){const F=B(n,O);this.docTypeEntities=F.entities,O=F.i}else if(n.substr(O+1,2)==="!["){const F=k(n,"]]>",O,"CDATA is not closed.")-2,j=n.substring(O+9,F);u=this.saveTextToParentTag(u,i,S);let G=this.parseTextData(j,i.tagname,S,!0,!1,!0,!0);G==null&&(G=""),this.options.cdataPropName?i.add(this.options.cdataPropName,[{[this.options.textNodeName]:j}]):i.add(this.options.textNodeName,G),O=F+2}else{let F=p(n,O,this.options.removeNSPrefix),j=F.tagName;const G=F.rawTagName;let D=F.tagExp,Z=F.attrExpPresent,ee=F.closeIndex;this.options.transformTagName&&(j=this.options.transformTagName(j)),i&&u&&i.tagname!=="!xml"&&(u=this.saveTextToParentTag(u,i,S,!1));const he=i;if(he&&this.options.unpairedTags.indexOf(he.tagname)!==-1&&(i=this.tagsNodeStack.pop(),S=S.substring(0,S.lastIndexOf("."))),j!==t.tagname&&(S+=S?"."+j:j),this.isItStopNode(this.options.stopNodes,S,j)){let ie="";if(D.length>0&&D.lastIndexOf("/")===D.length-1)j[j.length-1]==="/"?(j=j.substr(0,j.length-1),S=S.substr(0,S.length-1),D=j):D=D.substr(0,D.length-1),O=F.closeIndex;else if(this.options.unpairedTags.indexOf(j)!==-1)O=F.closeIndex;else{const ne=this.readStopNodeData(n,G,ee+1);if(!ne)throw new Error(`Unexpected end of ${G}`);O=ne.i,ie=ne.tagContent}const re=new b(j);j!==D&&Z&&(re[":@"]=this.buildAttributesMap(D,S,j)),ie&&(ie=this.parseTextData(ie,j,S,!0,Z,!0,!0)),S=S.substr(0,S.lastIndexOf(".")),re.add(this.options.textNodeName,ie),this.addChild(i,re,S)}else{if(D.length>0&&D.lastIndexOf("/")===D.length-1){j[j.length-1]==="/"?(j=j.substr(0,j.length-1),S=S.substr(0,S.length-1),D=j):D=D.substr(0,D.length-1),this.options.transformTagName&&(j=this.options.transformTagName(j));const ie=new b(j);j!==D&&Z&&(ie[":@"]=this.buildAttributesMap(D,S,j)),this.addChild(i,ie,S),S=S.substr(0,S.lastIndexOf("."))}else{const ie=new b(j);this.tagsNodeStack.push(i),j!==D&&Z&&(ie[":@"]=this.buildAttributesMap(D,S,j)),this.addChild(i,ie,S),i=ie}u="",O=ee}}else u+=n[O];return t.child};function N(n,t,i){const u=this.options.updateTag(t.tagname,i,t[":@"]);u===!1||(typeof u=="string"&&(t.tagname=u),n.addChild(t))}const L=function(n){if(this.options.processEntities){for(let t in this.docTypeEntities){const i=this.docTypeEntities[t];n=n.replace(i.regx,i.val)}for(let t in this.lastEntities){const i=this.lastEntities[t];n=n.replace(i.regex,i.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const i=this.htmlEntities[t];n=n.replace(i.regex,i.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function K(n,t,i,u){return n&&(u===void 0&&(u=Object.keys(t.child).length===0),n=this.parseTextData(n,t.tagname,i,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,u),n!==void 0&&n!==""&&t.add(this.options.textNodeName,n),n=""),n}function $(n,t,i){const u="*."+i;for(const S in n){const O=n[S];if(u===O||t===O)return!0}return!1}function q(n,t,i=">"){let u,S="";for(let O=t;O<n.length;O++){let m=n[O];if(u)m===u&&(u="");else if(m==='"'||m==="'")u=m;else if(m===i[0])if(i[1]){if(n[O+1]===i[1])return{data:S,index:O}}else return{data:S,index:O};else m==="	"&&(m=" ");S+=m}}function k(n,t,i,u){const S=n.indexOf(t,i);if(S===-1)throw new Error(u);return S+t.length-1}function p(n,t,i,u=">"){const S=q(n,t+1,u);if(!S)return;let O=S.data;const m=S.index,F=O.search(/\s/);let j=O,G=!0;F!==-1&&(j=O.substring(0,F),O=O.substring(F+1).trimStart());const D=j;if(i){const Z=j.indexOf(":");Z!==-1&&(j=j.substr(Z+1),G=j!==S.data.substr(Z+1))}return{tagName:j,tagExp:O,closeIndex:m,attrExpPresent:G,rawTagName:D}}function P(n,t,i){const u=i;let S=1;for(;i<n.length;i++)if(n[i]==="<")if(n[i+1]==="/"){const O=k(n,">",i,`${t} is not closed`);if(n.substring(i+2,O).trim()===t&&(S--,S===0))return{tagContent:n.substring(u,i),i:O};i=O}else if(n[i+1]==="?")i=k(n,"?>",i+1,"StopNode is not closed.");else if(n.substr(i+1,3)==="!--")i=k(n,"-->",i+3,"StopNode is not closed.");else if(n.substr(i+1,2)==="![")i=k(n,"]]>",i,"StopNode is not closed.")-2;else{const O=p(n,i,">");O&&((O&&O.tagName)===t&&O.tagExp[O.tagExp.length-1]!=="/"&&S++,i=O.closeIndex)}}function s(n,t,i){if(t&&typeof n=="string"){const u=n.trim();return u==="true"?!0:u==="false"?!1:A(n,i)}else return y.isExist(n)?n:""}f.exports=o},"./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js":function(f,I,g){const{buildOptions:y}=g("./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js"),b=g("./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js"),{prettify:B}=g("./node_modules/fast-xml-parser/src/xmlparser/node2json.js"),A=g("./node_modules/fast-xml-parser/src/validator.js");class E{constructor(c){this.externalEntities={},this.options=y(c)}parse(c,l){if(typeof c!="string")if(c.toString)c=c.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(l){l===!0&&(l={});const x=A.validate(c,l);if(x!==!0)throw Error(`${x.err.msg}:${x.err.line}:${x.err.col}`)}const _=new b(this.options);_.addExternalEntities(this.externalEntities);const h=_.parseXml(c);return this.options.preserveOrder||h===void 0?h:B(h,this.options)}addEntity(c,l){if(l.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(c.indexOf("&")!==-1||c.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(l==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[c]=l}}f.exports=E},"./node_modules/fast-xml-parser/src/xmlparser/node2json.js":function(f,I,g){function y(o,c){return b(o,c)}function b(o,c,l){let _;const h={};for(let x=0;x<o.length;x++){const w=o[x],N=B(w);let L="";if(l===void 0?L=N:L=l+"."+N,N===c.textNodeName)_===void 0?_=w[N]:_+=""+w[N];else{if(N===void 0)continue;if(w[N]){let K=b(w[N],c,L);const $=E(K,c);w[":@"]?A(K,w[":@"],L,c):Object.keys(K).length===1&&K[c.textNodeName]!==void 0&&!c.alwaysCreateTextNode?K=K[c.textNodeName]:Object.keys(K).length===0&&(c.alwaysCreateTextNode?K[c.textNodeName]="":K=""),h[N]!==void 0&&h.hasOwnProperty(N)?(Array.isArray(h[N])||(h[N]=[h[N]]),h[N].push(K)):c.isArray(N,L,$)?h[N]=[K]:h[N]=K}}}return typeof _=="string"?_.length>0&&(h[c.textNodeName]=_):_!==void 0&&(h[c.textNodeName]=_),h}function B(o){const c=Object.keys(o);for(let l=0;l<c.length;l++){const _=c[l];if(_!==":@")return _}}function A(o,c,l,_){if(c){const h=Object.keys(c),x=h.length;for(let w=0;w<x;w++){const N=h[w];_.isArray(N,l+"."+N,!0,!0)?o[N]=[c[N]]:o[N]=c[N]}}}function E(o,c){const{textNodeName:l}=c,_=Object.keys(o).length;return!!(_===0||_===1&&(o[l]||typeof o[l]=="boolean"||o[l]===0))}I.prettify=y},"./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js":function(f,I,g){class y{constructor(B){this.tagname=B,this.child=[],this[":@"]={}}add(B,A){B==="__proto__"&&(B="#__proto__"),this.child.push({[B]:A})}addChild(B){B.tagname==="__proto__"&&(B.tagname="#__proto__"),B[":@"]&&Object.keys(B[":@"]).length>0?this.child.push({[B.tagname]:B.child,":@":B[":@"]}):this.child.push({[B.tagname]:B.child})}}f.exports=y},"./node_modules/process/browser.js":function(f,I){var g=f.exports={},y,b;function B(){throw new Error("setTimeout has not been defined")}function A(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?y=setTimeout:y=B}catch{y=B}try{typeof clearTimeout=="function"?b=clearTimeout:b=A}catch{b=A}})();function E(K){if(y===setTimeout)return setTimeout(K,0);if((y===B||!y)&&setTimeout)return y=setTimeout,setTimeout(K,0);try{return y(K,0)}catch{try{return y.call(null,K,0)}catch{return y.call(this,K,0)}}}function o(K){if(b===clearTimeout)return clearTimeout(K);if((b===A||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(K);try{return b(K)}catch{try{return b.call(null,K)}catch{return b.call(this,K)}}}var c=[],l=!1,_,h=-1;function x(){!l||!_||(l=!1,_.length?c=_.concat(c):h=-1,c.length&&w())}function w(){if(!l){var K=E(x);l=!0;for(var $=c.length;$;){for(_=c,c=[];++h<$;)_&&_[h].run();h=-1,$=c.length}_=null,l=!1,o(K)}}g.nextTick=function(K){var $=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)$[q-1]=arguments[q];c.push(new N(K,$)),c.length===1&&!l&&E(w)};function N(K,$){this.fun=K,this.array=$}N.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={};function L(){}g.on=L,g.addListener=L,g.once=L,g.off=L,g.removeListener=L,g.removeAllListeners=L,g.emit=L,g.prependListener=L,g.prependOnceListener=L,g.listeners=function(K){return[]},g.binding=function(K){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(K){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},"./node_modules/strnum/strnum.js":function(f,I){const g=/^[-+]?0x[a-fA-F0-9]+$/,y=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,b={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function B(o,c={}){if(c=Object.assign({},b,c),!o||typeof o!="string")return o;let l=o.trim();if(c.skipLike!==void 0&&c.skipLike.test(l))return o;if(o==="0")return 0;if(c.hex&&g.test(l))return E(l,16);if(l.search(/[eE]/)!==-1){const _=l.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(_){if(c.leadingZeros)l=(_[1]||"")+_[3];else if(!(_[2]==="0"&&_[3][0]==="."))return o;return c.eNotation?Number(l):o}else return o}else{const _=y.exec(l);if(_){const h=_[1],x=_[2];let w=A(_[3]);if(!c.leadingZeros&&x.length>0&&h&&l[2]!==".")return o;if(!c.leadingZeros&&x.length>0&&!h&&l[1]!==".")return o;if(c.leadingZeros&&x===o)return 0;{const N=Number(l),L=""+N;return L.search(/[eE]/)!==-1?c.eNotation?N:o:l.indexOf(".")!==-1?L==="0"&&w===""||L===w||h&&L==="-"+w?N:o:x?w===L||h+w===L?N:o:l===L||l===h+L?N:o}}else return o}}function A(o){return o&&o.indexOf(".")!==-1&&(o=o.replace(/0+$/,""),o==="."?o="0":o[0]==="."?o="0"+o:o[o.length-1]==="."&&(o=o.substr(0,o.length-1))),o}function E(o,c){if(parseInt)return parseInt(o,c);if(Number.parseInt)return Number.parseInt(o,c);if(window&&window.parseInt)return window.parseInt(o,c);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}f.exports=B},"./node_modules/webpack/buildin/amd-options.js":function(f,I){(function(g){f.exports=g}).call(this,{})},"./node_modules/webpack/buildin/module.js":function(f,I){f.exports=function(g){return g.webpackPolyfill||(g.deprecate=function(){},g.paths=[],g.children||(g.children=[]),Object.defineProperty(g,"loaded",{enumerable:!0,get:function(){return g.l}}),Object.defineProperty(g,"id",{enumerable:!0,get:function(){return g.i}}),g.webpackPolyfill=1),g}},"./package.json":function(f){f.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.10.1","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js demo/CIDemos/*.js test/test.js server/sts.js lib/request.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage","postinstall":"node scripts/patch-check.js"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"fast-xml-parser":"4.5.0"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"29.7.0","jest-environment-jsdom":"29.7.0","patch-package":"^8.0.0","prettier":"^3.0.1","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(f,I,g){var y=g("./node_modules/@babel/runtime/helpers/typeof.js"),b=g("./src/session.js"),B=g("./src/async.js"),A=g("./src/event.js").EventProxy,E=g("./src/util.js"),o=g("./src/tracker.js");function c(s,n){var t=this,i=new A,u=s.TaskId,S=s.Bucket,O=s.Region,m=s.Key,F=s.Body,j=s.ChunkSize||s.SliceSize||t.options.ChunkSize,G=s.AsyncLimit,D=s.StorageClass,Z=s.ServerSideEncryption,ee,he,ie=s.onHashProgress,re=s.tracker;re&&re.setParams({chunkSize:j}),t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 分块上传开始")}),i.on("error",function(ne){if(t._isRunningTask(u))return s.UploadData.UploadId&&b.removeUsing(s.UploadData.UploadId),ne.UploadId=s.UploadData.UploadId||"",t.logger.error({cate:"RESULT",tag:"upload",msg:"[key=".concat(s.Key,"] 分块上传失败: ").concat(JSON.stringify(ne))}),n(ne)}),i.on("upload_complete",function(ne){var J=E.extend({UploadId:s.UploadData.UploadId||""},ne);n(null,J)}),i.on("upload_slice_complete",function(ne){var J={};E.each(s.Headers,function(oe,le){var ae=le.toLowerCase();(ae.indexOf("x-cos-meta-")===0||["pic-operations","x-cos-callback","x-cos-callback-var","x-cos-return-body"].includes(ae))&&(J[le]=oe)}),t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 开始完成分块请求")}),N.call(t,{Bucket:S,Region:O,Key:m,UploadId:ne.UploadId,SliceList:ne.SliceList,Headers:J,tracker:re},function(oe,le){if(t._isRunningTask(u)){if(b.removeUsing(ne.UploadId),oe)return he(null,!0),t.logger.error({cate:"RESULT",tag:"upload",msg:"[key=".concat(s.Key,"] 完成分块请求失败")}),i.emit("error",oe);b.removeUploadId.call(t,ne.UploadId),he({loaded:ee,total:ee},!0),t.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(s.Key,"] 完成分块请求成功")}),i.emit("upload_complete",le)}})}),i.on("get_upload_data_finish",function(ne){var J=b.getFileId(F,s.ChunkSize,S,m);J&&b.saveUploadId.call(t,J,ne.UploadId,t.options.UploadIdCacheLimit),b.setUsing(ne.UploadId),he(null,!0),t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 开始上传各个分块")}),x.call(t,{TaskId:u,Bucket:S,Region:O,Key:m,Body:F,FileSize:ee,SliceSize:j,AsyncLimit:G,ServerSideEncryption:Z,UploadData:ne,Headers:s.Headers,onProgress:he,tracker:re},function(oe,le){if(t._isRunningTask(u)){if(oe)return he(null,!0),t.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 分块上传失败")}),i.emit("error",oe);t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 所有分块上传完成")}),i.emit("upload_slice_complete",le)}})}),i.on("get_file_size_finish",function(){if(he=E.throttleOnProgress.call(t,ee,s.onProgress),s.UploadData.UploadId)t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 已经获取到 uploadId, ").concat(s.UploadData.UploadId)}),i.emit("get_upload_data_finish",s.UploadData);else{var ne=E.extend({TaskId:u,Bucket:S,Region:O,Key:m,Headers:s.Headers,StorageClass:D,Body:F,FileSize:ee,SliceSize:j,onHashProgress:ie,tracker:re},s);t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 去获取 uploadId")}),l.call(t,ne,function(J,oe){if(t._isRunningTask(u)){if(J)return i.emit("error",J);s.UploadData.UploadId=oe.UploadId,s.UploadData.PartList=oe.PartList,t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 获取到 uploadId, ").concat(s.UploadData.UploadId)}),i.emit("get_upload_data_finish",s.UploadData)}})}}),ee=s.ContentLength,delete s.ContentLength,!s.Headers&&(s.Headers={}),E.each(s.Headers,function(ne,J){J.toLowerCase()==="content-length"&&delete s.Headers[J]}),function(){for(var ne=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],J=1024*1024,oe=0;oe<ne.length&&(J=ne[oe]*1024*1024,!(ee/J<=t.options.MaxPartNumber));oe++);s.ChunkSize=s.SliceSize=j=Math.max(j,J)}(),ee===0?(s.Body="",s.ContentLength=0,s.SkipTask=!0,t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 文件大小为 0，执行简单上传")}),t.putObject(s,n)):i.emit("get_file_size_finish")}function l(s,n){var t=s.TaskId,i=s.Bucket,u=s.Region,S=s.Key,O=s.StorageClass,m=this,F={},j=s.FileSize,G=s.SliceSize,D=Math.ceil(j/G),Z=0,ee=E.throttleOnProgress.call(m,j,s.onHashProgress),he=function(J,oe){var le=G*(J-1),ae=Math.min(le+G,j),ce=ae-le;F[J]?oe(null,{PartNumber:J,ETag:F[J],Size:ce}):E.fileSlice(s.Body,le,ae,!1,function(ue){E.getFileMd5(ue,function(ve,Ce){if(ve)return oe(E.error(ve));var Se='"'+Ce+'"';F[J]=Se,Z+=ce,ee({loaded:Z,total:j}),oe(null,{PartNumber:J,ETag:Se,Size:ce})})})},ie=function(J,oe){var le=J.length;if(le===0)return oe(null,!0);if(le>D)return oe(null,!1);if(le>1){var ae=Math.max(J[0].Size,J[1].Size);if(ae!==G)return oe(null,!1)}var ce=function(ve){if(ve<le){var Ce=J[ve];he(Ce.PartNumber,function(Se,Ae){Ae&&Ae.ETag===Ce.ETag&&Ae.Size===Ce.Size?ce(ve+1):oe(null,!1)})}else oe(null,!0)};ce(0)},re=new A;re.on("error",function(ne){if(m._isRunningTask(t))return n(ne)}),re.on("upload_id_available",function(ne){var J={},oe=[];E.each(ne.PartList,function(ce){J[ce.PartNumber]=ce});for(var le=1;le<=D;le++){var ae=J[le];ae?(ae.PartNumber=le,ae.Uploaded=!0):ae={PartNumber:le,ETag:null,Uploaded:!1},oe.push(ae)}ne.PartList=oe,n(null,ne)}),re.on("no_available_upload_id",function(){if(m._isRunningTask(t)){var ne=E.extend({Bucket:i,Region:u,Key:S,Query:E.clone(s.Query),StorageClass:O,Body:s.Body,calledBySdk:"sliceUploadFile",tracker:s.tracker},s),J=E.clone(s.Headers);delete J["x-cos-mime-limit"],ne.Headers=J,m.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 准备初始化分块上传")}),m.multipartInit(ne,function(oe,le){if(m._isRunningTask(t)){if(oe)return m.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 初始化分块上传失败, ").concat(JSON.stringify(oe))}),re.emit("error",oe);var ae=le.UploadId;if(!ae)return n(E.error(new Error("no such upload id")));m.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 初始化分块上传成功")}),re.emit("upload_id_available",{UploadId:ae,PartList:[]})}})}}),re.on("has_and_check_upload_id",function(ne){ne=ne.reverse(),B.eachLimit(ne,1,function(J,oe){if(m._isRunningTask(t)){if(b.using[J]){oe();return}h.call(m,{Bucket:i,Region:u,Key:S,UploadId:J,tracker:s.tracker},function(le,ae){if(m._isRunningTask(t)){if(le)return b.removeUsing(J),re.emit("error",le);var ce=ae.PartList;ce.forEach(function(ue){ue.PartNumber*=1,ue.Size*=1,ue.ETag=ue.ETag||""}),ie(ce,function(ue,ve){if(m._isRunningTask(t)){if(ue)return re.emit("error",ue);ve?oe({UploadId:J,PartList:ce}):oe()}})}})}},function(J){m._isRunningTask(t)&&(ee(null,!0),J&&J.UploadId?re.emit("upload_id_available",J):re.emit("no_available_upload_id"))})}),re.on("seek_local_avail_upload_id",function(ne){var J=b.getFileId(s.Body,s.ChunkSize,i,S),oe=b.getUploadIdList.call(m,J);if(!J||!oe){re.emit("has_and_check_upload_id",ne);return}var le=function(ce){if(ce>=oe.length){re.emit("has_and_check_upload_id",ne);return}var ue=oe[ce];if(!E.isInArray(ne,ue)){b.removeUploadId.call(m,ue),le(ce+1);return}if(b.using[ue]){le(ce+1);return}h.call(m,{Bucket:i,Region:u,Key:S,UploadId:ue,tracker:s.tracker},function(ve,Ce){m._isRunningTask(t)&&(ve?(b.removeUploadId.call(m,ue),le(ce+1)):re.emit("upload_id_available",{UploadId:ue,PartList:Ce.PartList}))})};le(0)}),re.on("get_remote_upload_id_list",function(){_.call(m,{Bucket:i,Region:u,Key:S,tracker:s.tracker},function(ne,J){if(m._isRunningTask(t)){if(ne)return re.emit("error",ne);var oe=E.filter(J.UploadList,function(ce){return ce.Key===S&&(!O||ce.StorageClass.toUpperCase()===O.toUpperCase())}).reverse().map(function(ce){return ce.UploadId||ce.UploadID});if(oe.length)re.emit("seek_local_avail_upload_id",oe);else{var le=b.getFileId(s.Body,s.ChunkSize,i,S),ae;le&&(ae=b.getUploadIdList.call(m,le))&&E.each(ae,function(ce){b.removeUploadId.call(m,ce)}),re.emit("no_available_upload_id")}}})}),re.emit("get_remote_upload_id_list")}function _(s,n){var t=this,i=[],u={Bucket:s.Bucket,Region:s.Region,Prefix:s.Key,calledBySdk:s.calledBySdk||"sliceUploadFile",tracker:s.tracker},S=function(){t.multipartList(u,function(m,F){if(m)return n(m);i.push.apply(i,F.Upload||[]),F.IsTruncated==="true"?(u.KeyMarker=F.NextKeyMarker,u.UploadIdMarker=F.NextUploadIdMarker,S()):n(null,{UploadList:i})})};S()}function h(s,n){var t=this,i=[],u={Bucket:s.Bucket,Region:s.Region,Key:s.Key,UploadId:s.UploadId,calledBySdk:"sliceUploadFile",tracker:s.tracker},S=function(){t.multipartListPart(u,function(m,F){if(m)return n(m);i.push.apply(i,F.Part||[]),F.IsTruncated==="true"?(u.PartNumberMarker=F.NextPartNumberMarker,S()):n(null,{PartList:i})})};S()}function x(s,n){var t=this,i=s.TaskId,u=s.Bucket,S=s.Region,O=s.Key,m=s.UploadData,F=s.FileSize,j=s.SliceSize,G=Math.min(s.AsyncLimit||t.options.ChunkParallelLimit||1,256),D=s.Body,Z=Math.ceil(F/j),ee=0,he=s.ServerSideEncryption,ie=s.Headers,re=E.filter(m.PartList,function(J){return J.Uploaded&&(ee+=J.PartNumber>=Z&&F%j||j),!J.Uploaded}),ne=s.onProgress;t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 开始并发上传各个分块")}),B.eachLimit(re,G,function(J,oe){if(t._isRunningTask(i)){var le=J.PartNumber,ae=Math.min(F,J.PartNumber*j)-(J.PartNumber-1)*j,ce=0;t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 分块").concat(le,"开始上传")}),w.call(t,{TaskId:i,Bucket:u,Region:S,Key:O,SliceSize:j,FileSize:F,PartNumber:le,ServerSideEncryption:he,Body:D,UploadData:m,Headers:ie,onProgress:function(ve){ee+=ve.loaded-ce,ce=ve.loaded,ne({loaded:ee,total:F})},tracker:s.tracker},function(ue,ve){t._isRunningTask(i)&&(!ue&&!ve.ETag&&(ue='get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )',t.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 分块").concat(le,"上传请求成功，但是未获取到 eTag")})),ue?(ee-=ce,t.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(s.Key,"] 分块").concat(le,"上传失败")})):(ee+=ae-ce,J.ETag=ve.ETag),t.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(s.Key,"] 分块").concat(le,"上传成功")}),ne({loaded:ee,total:F}),oe(ue||null,ve))})}},function(J){if(t._isRunningTask(i)){if(J)return n(J);n(null,{UploadId:m.UploadId,SliceList:m.PartList})}})}function w(s,n){var t=this,i=s.TaskId,u=s.Bucket,S=s.Region,O=s.Key,m=s.FileSize,F=s.Body,j=s.PartNumber*1,G=s.SliceSize,D=s.ServerSideEncryption,Z=s.UploadData,ee=s.Headers||{},he=t.options.ChunkRetryTimes+1,ie=G*(j-1),re=G,ne=ie+G;ne>m&&(ne=m,re=ne-ie);var J=["x-cos-traffic-limit","x-cos-mime-limit"],oe={};E.each(ee,function(ae,ce){J.indexOf(ce)>-1&&(oe[ce]=ae)});var le=Z.PartList[j-1];B.retry(he,function(ae){t._isRunningTask(i)&&E.fileSlice(F,ie,ne,!0,function(ce){t.multipartUpload({TaskId:i,Bucket:u,Region:S,Key:O,ContentLength:re,PartNumber:j,UploadId:Z.UploadId,ServerSideEncryption:D,Body:ce,Headers:oe,onProgress:s.onProgress,calledBySdk:"sliceUploadFile",tracker:s.tracker},function(ue,ve){if(t._isRunningTask(i))return ue?ae(ue):(le.Uploaded=!0,ae(null,ve))})})},function(ae,ce){if(t._isRunningTask(i))return n(ae,ce)})}function N(s,n){var t=s.Bucket,i=s.Region,u=s.Key,S=s.UploadId,O=s.SliceList,m=this,F=this.options.ChunkRetryTimes+1,j=s.Headers,G=O.map(function(D){return{PartNumber:D.PartNumber,ETag:D.ETag}});B.retry(F,function(D){m.multipartComplete({Bucket:t,Region:i,Key:u,UploadId:S,Parts:G,Headers:j,calledBySdk:"sliceUploadFile",tracker:s.tracker},D)},function(D,Z){n(D,Z)})}function L(s,n){var t=s.Bucket,i=s.Region,u=s.Key,S=s.UploadId,O=s.Level||"task",m=s.AsyncLimit,F=this,j=new A;if(j.on("error",function(G){return n(G)}),j.on("get_abort_array",function(G){K.call(F,{Bucket:t,Region:i,Key:u,Headers:s.Headers,AsyncLimit:m,AbortArray:G},n)}),O==="bucket")_.call(F,{Bucket:t,Region:i,calledBySdk:"abortUploadTask"},function(G,D){if(G)return n(G);j.emit("get_abort_array",D.UploadList||[])});else if(O==="file"){if(!u)return n(E.error(new Error("abort_upload_task_no_key")));_.call(F,{Bucket:t,Region:i,Key:u,calledBySdk:"abortUploadTask"},function(G,D){if(G)return n(G);j.emit("get_abort_array",D.UploadList||[])})}else if(O==="task"){if(!S)return n(E.error(new Error("abort_upload_task_no_id")));if(!u)return n(E.error(new Error("abort_upload_task_no_key")));j.emit("get_abort_array",[{Key:u,UploadId:S}])}else return n(E.error(new Error("abort_unknown_level")))}function K(s,n){var t=s.Bucket,i=s.Region,u=s.Key,S=s.AbortArray,O=s.AsyncLimit||1,m=this,F=0,j=new Array(S.length);B.eachLimit(S,O,function(G,D){var Z=F;if(u&&u!==G.Key){j[Z]={error:{KeyNotMatch:!0}},D(null);return}var ee=G.UploadId||G.UploadID;m.multipartAbort({Bucket:t,Region:i,Key:G.Key,Headers:s.Headers,UploadId:ee},function(he){var ie={Bucket:t,Region:i,Key:G.Key,UploadId:ee};j[Z]={error:he,task:ie},D(null)}),F++},function(G){if(G)return n(G);for(var D=[],Z=[],ee=0,he=j.length;ee<he;ee++){var ie=j[ee];ie.task&&(ie.error?Z.push(ie.task):D.push(ie.task))}return n(null,{successList:D,errorList:Z})})}function $(s,n){var t=this,i=s.SliceSize===void 0?t.options.SliceSize:s.SliceSize,u=[],S=s.Body,O=S.size||S.length||0,m={TaskId:""};if(t.options.EnableReporter){var F=t.options.UseAccelerate||typeof t.options.Domain=="string"&&t.options.Domain.includes("accelerate."),j=O>i?"sliceUploadFile":"putObject";s.tracker=new o({Beacon:t.options.BeaconReporter,clsReporter:t.options.ClsReporter,bucket:s.Bucket,region:s.Region,apiName:"uploadFile",realApi:j,fileKey:s.Key,fileSize:O,accelerate:F,deepTracker:t.options.DeepTracker,customId:t.options.CustomId,delay:t.options.TrackerDelay})}E.each(s,function(ie,re){y(ie)!=="object"&&typeof ie!="function"&&(m[re]=ie)});var G=s.onTaskReady,D=function(re){m.TaskId=re,G&&G(re)};s.onTaskReady=D;var Z=O>i?"sliceUploadFile":"putObject",ee=s.onFileFinish,he=function(re,ne){s.tracker&&s.tracker.report(re,ne),ee&&ee(re,ne,m),n&&n(re,ne)};u.push({api:Z,params:s,callback:he}),t._addTasks(u)}function q(s,n){var t=this,i=s.SliceSize===void 0?t.options.SliceSize:s.SliceSize,u=0,S=0,O=E.throttleOnProgress.call(t,S,s.onProgress),m=s.files.length,F=s.onFileFinish,j=Array(m),G=function(ee,he,ie){O(null,!0),F&&F(ee,he,ie),j[ie.Index]={options:ie,error:ee,data:he},--m<=0&&n&&n(null,{files:j})},D=[];E.each(s.files,function(Z,ee){(function(){var he=Z.Body,ie=he.size||he.length||0,re={Index:ee,TaskId:""};if(!t.options.UseRawKey&&Z.Key&&Z.Key.substr(0,1)==="/"&&(Z.Key=Z.Key.substr(1)),u+=ie,t.options.EnableReporter){var ne=t.options.UseAccelerate||typeof t.options.Domain=="string"&&t.options.Domain.includes("accelerate."),J=ie>i?"sliceUploadFile":"putObject";Z.tracker=new o({Beacon:t.options.BeaconReporter,clsReporter:t.options.ClsReporter,bucket:Z.Bucket,region:Z.Region,apiName:"uploadFiles",realApi:J,fileKey:Z.Key,fileSize:ie,accelerate:ne,deepTracker:t.options.DeepTracker,customId:t.options.CustomId,delay:t.options.TrackerDelay})}E.each(Z,function(Ae,be){y(Ae)!=="object"&&typeof Ae!="function"&&(re[be]=Ae)});var oe=Z.onTaskReady,le=function(be){re.TaskId=be,oe&&oe(be)};Z.onTaskReady=le;var ae=0,ce=Z.onProgress,ue=function(be){S=S-ae+be.loaded,ae=be.loaded,ce&&ce(be),O({loaded:S,total:u})};Z.onProgress=ue;var ve=ie>i?"sliceUploadFile":"putObject",Ce=Z.onFileFinish,Se=function(be,Ue){Z.tracker&&Z.tracker.report(be,Ue),Ce&&Ce(be,Ue),G&&G(be,Ue,re)};D.push({api:ve,params:Z,callback:Se})})()}),t._addTasks(D)}function k(s,n){var t=new A,i=this,u=s.Bucket,S=s.Region,O=s.Key,m=s.CopySource,F=E.getSourceParams.call(this,m);if(!F){n(E.error(new Error("CopySource format error")));return}var j=F.Bucket,G=F.Region,D=decodeURIComponent(F.Key),Z=s.CopySliceSize===void 0?i.options.CopySliceSize:s.CopySliceSize;Z=Math.max(0,Z);var ee=s.CopyChunkSize||this.options.CopyChunkSize,he=this.options.CopyChunkParallelLimit,ie=this.options.ChunkRetryTimes+1,re=0,ne=0,J,oe,le={},ae={},ce={};t.on("copy_slice_complete",function(ue){E.each(s.Headers,function(Ce,Se){Se.toLowerCase().indexOf("x-cos-meta-")});var ve=E.map(ue.PartList,function(Ce){return{PartNumber:Ce.PartNumber,ETag:Ce.ETag}});B.retry(ie,function(Ce){i.multipartComplete({Bucket:u,Region:S,Key:O,UploadId:ue.UploadId,Parts:ve,tracker:s.tracker,calledBySdk:"sliceCopyFile"},Ce)},function(Ce,Se){if(b.removeUsing(ue.UploadId),Ce)return oe(null,!0),n(Ce);b.removeUploadId(ue.UploadId),oe({loaded:J,total:J},!0),n(null,Se)})}),t.on("get_copy_data_finish",function(ue){var ve=b.getCopyFileId(m,le,ee,u,O);ve&&b.saveUploadId(ve,ue.UploadId,i.options.UploadIdCacheLimit),b.setUsing(ue.UploadId);var Ce=E.filter(ue.PartList,function(Se){return Se.Uploaded&&(ne+=Se.PartNumber>=re&&J%ee||ee),!Se.Uploaded});B.eachLimit(Ce,he,function(Se,Ae){var be=Se.PartNumber,Ue=Se.CopySourceRange,Ze=Se.end-Se.start;B.retry(ie,function($e){p.call(i,{Bucket:u,Region:S,Key:O,CopySource:m,UploadId:ue.UploadId,PartNumber:be,CopySourceRange:Ue,tracker:s.tracker,calledBySdk:"sliceCopyFile"},$e)},function($e,Xe){if($e)return Ae($e);ne+=Ze,oe({loaded:ne,total:J}),Se.ETag=Xe.ETag,Ae($e||null,Xe)})},function(Se){if(Se)return b.removeUsing(ue.UploadId),oe(null,!0),n(Se);t.emit("copy_slice_complete",ue)})}),t.on("get_chunk_size_finish",function(){var ue=function(){i.multipartInit({Bucket:u,Region:S,Key:O,Headers:ce,tracker:s.tracker,calledBySdk:"sliceCopyFile"},function(be,Ue){if(be)return n(be);s.UploadId=Ue.UploadId,t.emit("get_copy_data_finish",{UploadId:s.UploadId,PartList:s.PartList})})},ve=b.getCopyFileId(m,le,ee,u,O),Ce=b.getUploadIdList(ve);if(!ve||!Ce)return ue();var Se=function(be){if(be>=Ce.length)return ue();var Ue=Ce[be];if(b.using[Ue])return Se(be+1);h.call(i,{Bucket:u,Region:S,Key:O,UploadId:Ue,tracker:s.tracker,calledBySdk:"sliceCopyFile"},function(Ze,$e){if(Ze)b.removeUploadId(Ue),Se(be+1);else{if(b.using[Ue])return Se(be+1);var Xe={},st=0;E.each($e.PartList,function(De){var et=parseInt(De.Size),Ct=st+et-1;Xe[De.PartNumber+"|"+st+"|"+Ct]=De.ETag,st+=et}),E.each(s.PartList,function(De){var et=Xe[De.PartNumber+"|"+De.start+"|"+De.end];et&&(De.ETag=et,De.Uploaded=!0)}),t.emit("get_copy_data_finish",{UploadId:Ue,PartList:s.PartList})}})};Se(0)}),t.on("get_file_size_finish",function(){if(function(){for(var ve=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],Ce=1024*1024,Se=0;Se<ve.length&&(Ce=ve[Se]*1024*1024,!(J/Ce<=i.options.MaxPartNumber));Se++);s.ChunkSize=ee=Math.max(ee,Ce),re=Math.ceil(J/ee);for(var Ae=[],be=1;be<=re;be++){var Ue=(be-1)*ee,Ze=be*ee<J?be*ee-1:J-1,$e={PartNumber:be,start:Ue,end:Ze,CopySourceRange:"bytes="+Ue+"-"+Ze};Ae.push($e)}s.PartList=Ae}(),s.Headers["x-cos-metadata-directive"]==="Replaced"?ce=s.Headers:ce=ae,ce["x-cos-storage-class"]=s.Headers["x-cos-storage-class"]||ae["x-cos-storage-class"],ce=E.clearKey(ce),ae["x-cos-storage-class"]==="ARCHIVE"||ae["x-cos-storage-class"]==="DEEP_ARCHIVE"){var ue=ae["x-cos-restore"];if(!ue||ue==='ongoing-request="true"'){n(E.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete ce["x-cos-copy-source"],delete ce["x-cos-metadata-directive"],delete ce["x-cos-copy-source-If-Modified-Since"],delete ce["x-cos-copy-source-If-Unmodified-Since"],delete ce["x-cos-copy-source-If-Match"],delete ce["x-cos-copy-source-If-None-Match"],t.emit("get_chunk_size_finish")}),i.headObject({Bucket:j,Region:G,Key:D,tracker:s.tracker,calledBySdk:"sliceCopyFile"},function(ue,ve){if(ue){ue.statusCode&&ue.statusCode===404?n(E.error(ue,{ErrorStatus:D+" Not Exist"})):n(ue);return}if(J=s.FileSize=ve.headers["content-length"],J===void 0||!J){n(E.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')));return}if(s.tracker&&s.tracker.setParams({httpSize:J}),oe=E.throttleOnProgress.call(i,J,s.onProgress),J<=Z)s.Headers["x-cos-metadata-directive"]||(s.Headers["x-cos-metadata-directive"]="Copy"),i.putObjectCopy(Object.assign(s,{calledBySdk:"sliceCopyFile"}),function(Se,Ae){if(Se)return oe(null,!0),n(Se);oe({loaded:J,total:J},!0),n(Se,Ae)});else{var Ce=ve.headers;le=Ce,ae={"Cache-Control":Ce["cache-control"],"Content-Disposition":Ce["content-disposition"],"Content-Encoding":Ce["content-encoding"],"Content-Type":Ce["content-type"],Expires:Ce.expires,"x-cos-storage-class":Ce["x-cos-storage-class"]},E.each(Ce,function(Se,Ae){var be="x-cos-meta-";Ae.indexOf(be)===0&&Ae.length>be.length&&(ae[Ae]=Se)}),t.emit("get_file_size_finish")}})}function p(s,n){var t=s.TaskId,i=s.Bucket,u=s.Region,S=s.Key,O=s.CopySource,m=s.UploadId,F=s.PartNumber*1,j=s.CopySourceRange,G=this.options.ChunkRetryTimes+1,D=this;B.retry(G,function(Z){D.uploadPartCopy({TaskId:t,Bucket:i,Region:u,Key:S,CopySource:O,UploadId:m,PartNumber:F,CopySourceRange:j,tracker:s.tracker,calledBySdk:s.calledBySdk},function(ee,he){Z(ee||null,he)})},function(Z,ee){return n(Z,ee)})}var P={sliceUploadFile:c,abortUploadTask:L,uploadFile:$,uploadFiles:q,sliceCopyFile:k};f.exports.init=function(s,n){n.transferToTaskMethod(P,"sliceUploadFile"),E.each(P,function(t,i){s.prototype[i]=E.apiWrapper(i,t)})}},"./src/async.js":function(f,I){var g=function(A,E,o,c){if(c=c||function(){},!A.length||E<=0)return c();var l=0,_=0,h=0;(function x(){if(l>=A.length)return c();for(;h<E&&_<A.length;)_+=1,h+=1,o(A[_-1],function(w){w?(c(w),c=function(){}):(l+=1,h-=1,l>=A.length?c():x())})})()},y=function(A,E,o){var c=function(_){E(function(h,x){h&&_<A?c(_+1):o(h,x)})};A<1?o():c(1)},b={eachLimit:g,retry:y};f.exports=b},"./src/base.js":function(f,I,g){var y=g("./node_modules/@babel/runtime/helpers/defineProperty.js"),b=g("./node_modules/@babel/runtime/helpers/typeof.js");function B(e,d){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);d&&(a=a.filter(function(R){return Object.getOwnPropertyDescriptor(e,R).enumerable})),r.push.apply(r,a)}return r}function A(e){for(var d=1;d<arguments.length;d++){var r=arguments[d]!=null?arguments[d]:{};d%2?B(Object(r),!0).forEach(function(a){y(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var E=g("./lib/request.js"),o=g("./src/util.js");function c(e,d){var r=this.options.Protocol||(o.isBrowser&&(typeof location>"u"?"undefined":b(location))==="object"&&location.protocol==="http:"?"http:":"https:"),a=this.options.ServiceDomain,R=e.AppId||this.options.appId,T=e.Region;a?(a=a.replace(/\{\{AppId\}\}/gi,R||"").replace(/\{\{Region\}\}/gi,T||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(a)||(a=r+"//"+a),a.slice(-1)==="/"&&(a=a.slice(0,-1))):T?a=r+"//cos."+T+".myqcloud.com":a=r+"//service.cos.myqcloud.com";var U="",H=T?"cos."+T+".myqcloud.com":"service.cos.myqcloud.com",W=a.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");H===W&&(U=H),se.call(this,{Action:"name/cos:GetService",url:a,method:"GET",headers:e.Headers,SignHost:U,tracker:e.tracker},function(ge,fe){if(ge)return d(ge);var me=fe&&fe.ListAllMyBucketsResult&&fe.ListAllMyBucketsResult.Buckets&&fe.ListAllMyBucketsResult.Buckets.Bucket||[];me=o.isArray(me)?me:[me];var X=fe&&fe.ListAllMyBucketsResult&&fe.ListAllMyBucketsResult.Owner||{};d(null,{Buckets:me,Owner:X,statusCode:fe.statusCode,headers:fe.headers})})}function l(e,d){var r=this,a="";if(e.BucketAZConfig){var R={BucketAZConfig:e.BucketAZConfig};a=o.json2xml({CreateBucketConfiguration:R})}se.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:a,tracker:e.tracker},function(T,U){if(T)return d(T);var H=We({protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});d(null,{Location:H,statusCode:U.statusCode,headers:U.headers})})}function _(e,d){se.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD",tracker:e.tracker},d)}function h(e,d){var r={};r.prefix=e.Prefix||"",r.delimiter=e.Delimiter,r.marker=e.Marker,r["max-keys"]=e.MaxKeys,r["encoding-type"]=e.EncodingType,se.call(this,{Action:"name/cos:GetBucket",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,tracker:e.tracker},function(a,R){if(a)return d(a);var T=R.ListBucketResult||{},U=T.Contents||[],H=T.CommonPrefixes||[];U=o.isArray(U)?U:[U],H=o.isArray(H)?H:[H];var W=o.clone(T);o.extend(W,{Contents:U,CommonPrefixes:H,statusCode:R.statusCode,headers:R.headers}),d(null,W)})}function x(e,d){se.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE",tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode,headers:a.headers})})}function w(e,d){var r=e.Headers,a="";if(e.AccessControlPolicy){var R=o.clone(e.AccessControlPolicy||{}),T=R.Grants||R.Grant;T=o.isArray(T)?T:[T],delete R.Grant,delete R.Grants,R.AccessControlList={Grant:T},a=o.json2xml({AccessControlPolicy:R}),r["Content-Type"]="application/xml",r["Content-MD5"]=o.b64(o.md5(a))}o.each(r,function(U,H){H.indexOf("x-cos-grant-")===0&&(r[H]=Ye(r[H]))}),se.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:r,action:"acl",body:a,tracker:e.tracker},function(U,H){if(U)return d(U);d(null,{statusCode:H.statusCode,headers:H.headers})})}function N(e,d){se.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl",tracker:e.tracker},function(r,a){if(r)return d(r);var R=a.AccessControlPolicy||{},T=R.Owner||{},U=R.AccessControlList.Grant||[];U=o.isArray(U)?U:[U];var H=xe(R);a.headers&&a.headers["x-cos-acl"]&&(H.ACL=a.headers["x-cos-acl"]),H=o.extend(H,{Owner:T,Grants:U,statusCode:a.statusCode,headers:a.headers}),d(null,H)})}function L(e,d){var r=e.CORSConfiguration||{},a=r.CORSRules||e.CORSRules||[];a=o.clone(o.isArray(a)?a:[a]),o.each(a,function(H){o.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(W){var ge=W+"s",fe=H[ge]||H[W]||[];delete H[ge],H[W]=o.isArray(fe)?fe:[fe]})});var R={CORSRule:a};e.ResponseVary&&(R.ResponseVary=e.ResponseVary);var T=o.json2xml({CORSConfiguration:R}),U=e.Headers;U["Content-Type"]="application/xml",U["Content-MD5"]=o.b64(o.md5(T)),se.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:T,action:"cors",headers:U,tracker:e.tracker},function(H,W){if(H)return d(H);d(null,{statusCode:W.statusCode,headers:W.headers})})}function K(e,d){se.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(r,a){if(r){if(r.statusCode===404&&r.error&&r.error.Code==="NoSuchCORSConfiguration"){var R={CORSRules:[],statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=a.CORSConfiguration||{},U=T.CORSRules||T.CORSRule||[];U=o.clone(o.isArray(U)?U:[U]);var H=T.ResponseVary;o.each(U,function(W){o.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(ge){var fe=ge+"s",me=W[fe]||W[ge]||[];delete W[ge],W[fe]=o.isArray(me)?me:[me]})}),d(null,{CORSRules:U,ResponseVary:H,statusCode:a.statusCode,headers:a.headers})})}function $(e,d){se.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode||r.statusCode,headers:a.headers})})}function q(e,d){se.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location",tracker:e.tracker},d)}function k(e,d){var r=e.Policy;try{typeof r=="string"&&(r=JSON.parse(r))}catch{}if(!r||typeof r=="string")return d(o.error(new Error("Policy format error")));var a=JSON.stringify(r);r.version||(r.version="2.0");var R=e.Headers;R["Content-Type"]="application/json",R["Content-MD5"]=o.b64(o.md5(a)),se.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:a,headers:R,tracker:e.tracker},function(T,U){if(T&&T.statusCode===204)return d(null,{statusCode:T.statusCode});if(T)return d(T);d(null,{statusCode:U.statusCode,headers:U.headers})})}function p(e,d){se.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0,tracker:e.tracker},function(r,a){if(r)return r.statusCode&&r.statusCode===403?d(o.error(r,{ErrorStatus:"Access Denied"})):r.statusCode&&r.statusCode===405?d(o.error(r,{ErrorStatus:"Method Not Allowed"})):r.statusCode&&r.statusCode===404?d(o.error(r,{ErrorStatus:"Policy Not Found"})):d(r);var R={};try{R=JSON.parse(a.body)}catch{}d(null,{Policy:R,statusCode:a.statusCode,headers:a.headers})})}function P(e,d){se.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode||r.statusCode,headers:a.headers})})}function s(e,d){var r=e.Tagging||{},a=r.TagSet||r.Tags||e.Tags||[];a=o.clone(o.isArray(a)?a:[a]);var R=o.json2xml({Tagging:{TagSet:{Tag:a}}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"tagging",headers:T,tracker:e.tracker},function(U,H){if(U&&U.statusCode===204)return d(null,{statusCode:U.statusCode});if(U)return d(U);d(null,{statusCode:H.statusCode,headers:H.headers})})}function n(e,d){se.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(r,a){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="NoSuchTagSet")){var R={Tags:[],statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=[];try{T=a.Tagging.TagSet.Tag||[]}catch{}T=o.clone(o.isArray(T)?T:[T]),d(null,{Tags:T,statusCode:a.statusCode,headers:a.headers})})}function t(e,d){se.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode,headers:a.headers})})}function i(e,d){var r=e.LifecycleConfiguration||{},a=r.Rules||e.Rules||[];a=o.clone(a);var R=o.json2xml({LifecycleConfiguration:{Rule:a}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"lifecycle",headers:T,tracker:e.tracker},function(U,H){if(U&&U.statusCode===204)return d(null,{statusCode:U.statusCode});if(U)return d(U);d(null,{statusCode:H.statusCode,headers:H.headers})})}function u(e,d){se.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(r,a){if(r){if(r.statusCode===404&&r.error&&r.error.Code==="NoSuchLifecycleConfiguration"){var R={Rules:[],statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=[];try{T=a.LifecycleConfiguration.Rule||[]}catch{}T=o.clone(o.isArray(T)?T:[T]),d(null,{Rules:T,statusCode:a.statusCode,headers:a.headers})})}function S(e,d){se.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode,headers:a.headers})})}function O(e,d){if(!e.VersioningConfiguration){d(o.error(new Error("missing param VersioningConfiguration")));return}var r=e.VersioningConfiguration||{},a=o.json2xml({VersioningConfiguration:r}),R=e.Headers;R["Content-Type"]="application/xml",R["Content-MD5"]=o.b64(o.md5(a)),se.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:a,action:"versioning",headers:R,tracker:e.tracker},function(T,U){if(T&&T.statusCode===204)return d(null,{statusCode:T.statusCode});if(T)return d(T);d(null,{statusCode:U.statusCode,headers:U.headers})})}function m(e,d){se.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning",tracker:e.tracker},function(r,a){r||!a.VersioningConfiguration&&(a.VersioningConfiguration={}),d(r,a)})}function F(e,d){var r=o.clone(e.ReplicationConfiguration),a=o.json2xml({ReplicationConfiguration:r});a=a.replace(/<(\/?)Rules>/gi,"<$1Rule>"),a=a.replace(/<(\/?)Tags>/gi,"<$1Tag>");var R=e.Headers;R["Content-Type"]="application/xml",R["Content-MD5"]=o.b64(o.md5(a)),se.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:a,action:"replication",headers:R,tracker:e.tracker},function(T,U){if(T&&T.statusCode===204)return d(null,{statusCode:T.statusCode});if(T)return d(T);d(null,{statusCode:U.statusCode,headers:U.headers})})}function j(e,d){se.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(r,a){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="ReplicationConfigurationnotFoundError")){var R={ReplicationConfiguration:{Rules:[]},statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}!a.ReplicationConfiguration&&(a.ReplicationConfiguration={}),a.ReplicationConfiguration.Rule&&(a.ReplicationConfiguration.Rules=o.makeArray(a.ReplicationConfiguration.Rule),delete a.ReplicationConfiguration.Rule),d(r,a)})}function G(e,d){se.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode,headers:a.headers})})}function D(e,d){if(!e.WebsiteConfiguration){d(o.error(new Error("missing param WebsiteConfiguration")));return}var r=o.clone(e.WebsiteConfiguration||{}),a=r.RoutingRules||r.RoutingRule||[];a=o.isArray(a)?a:[a],delete r.RoutingRule,delete r.RoutingRules,a.length&&(r.RoutingRules={RoutingRule:a});var R=o.json2xml({WebsiteConfiguration:r}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"website",headers:T,tracker:e.tracker},function(U,H){if(U&&U.statusCode===204)return d(null,{statusCode:U.statusCode});if(U)return d(U);d(null,{statusCode:H.statusCode,headers:H.headers})})}function Z(e,d){se.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website",tracker:e.tracker},function(r,a){if(r){if(r.statusCode===404&&r.error.Code==="NoSuchWebsiteConfiguration"){var R={WebsiteConfiguration:{},statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=a.WebsiteConfiguration||{};if(T.RoutingRules){var U=o.clone(T.RoutingRules.RoutingRule||[]);U=o.makeArray(U),T.RoutingRules=U}d(null,{WebsiteConfiguration:T,statusCode:a.statusCode,headers:a.headers})})}function ee(e,d){se.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website",tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode,headers:a.headers})})}function he(e,d){if(!e.RefererConfiguration){d(o.error(new Error("missing param RefererConfiguration")));return}var r=o.clone(e.RefererConfiguration||{}),a=r.DomainList||{},R=a.Domains||a.Domain||[];R=o.isArray(R)?R:[R],R.length&&(r.DomainList={Domain:R});var T=o.json2xml({RefererConfiguration:r}),U=e.Headers;U["Content-Type"]="application/xml",U["Content-MD5"]=o.b64(o.md5(T)),se.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:T,action:"referer",headers:U,tracker:e.tracker},function(H,W){if(H&&H.statusCode===204)return d(null,{statusCode:H.statusCode});if(H)return d(H);d(null,{statusCode:W.statusCode,headers:W.headers})})}function ie(e,d){se.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer",tracker:e.tracker},function(r,a){if(r){if(r.statusCode===404&&r.error.Code==="NoSuchRefererConfiguration"){var R={WebsiteConfiguration:{},statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=a.RefererConfiguration||{};if(T.DomainList){var U=o.makeArray(T.DomainList.Domain||[]);T.DomainList={Domains:U}}d(null,{RefererConfiguration:T,statusCode:a.statusCode,headers:a.headers})})}function re(e,d){var r=e.DomainConfiguration||{},a=r.DomainRule||e.DomainRule||[];a=o.clone(a);var R=o.json2xml({DomainConfiguration:{DomainRule:a}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"domain",headers:T,tracker:e.tracker},function(U,H){if(U&&U.statusCode===204)return d(null,{statusCode:U.statusCode});if(U)return d(U);d(null,{statusCode:H.statusCode,headers:H.headers})})}function ne(e,d){se.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(r,a){if(r)return d(r);var R=[];try{R=a.DomainConfiguration.DomainRule||[]}catch{}R=o.clone(o.isArray(R)?R:[R]),d(null,{DomainRule:R,statusCode:a.statusCode,headers:a.headers})})}function J(e,d){se.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode,headers:a.headers})})}function oe(e,d){var r=e.OriginConfiguration||{},a=r.OriginRule||e.OriginRule||[];a=o.clone(a);var R=o.json2xml({OriginConfiguration:{OriginRule:a}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"origin",headers:T,tracker:e.tracker},function(U,H){if(U&&U.statusCode===204)return d(null,{statusCode:U.statusCode});if(U)return d(U);d(null,{statusCode:H.statusCode,headers:H.headers})})}function le(e,d){se.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(r,a){if(r)return d(r);var R=[];try{R=a.OriginConfiguration.OriginRule||[]}catch{}R=o.clone(o.isArray(R)?R:[R]),d(null,{OriginRule:R,statusCode:a.statusCode,headers:a.headers})})}function ae(e,d){se.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode,headers:a.headers})})}function ce(e,d){var r=o.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=o.b64(o.md5(r)),se.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"logging",headers:a,tracker:e.tracker},function(R,T){if(R&&R.statusCode===204)return d(null,{statusCode:R.statusCode});if(R)return d(R);d(null,{statusCode:T.statusCode,headers:T.headers})})}function ue(e,d){se.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging",tracker:e.tracker},function(r,a){if(r)return d(r);d(null,{BucketLoggingStatus:a.BucketLoggingStatus,statusCode:a.statusCode,headers:a.headers})})}function ve(e,d,r){var a=o.clone(d.InventoryConfiguration);if(a.OptionalFields){var R=a.OptionalFields||[];a.OptionalFields={Field:R}}if(a.Destination&&a.Destination.COSBucketDestination&&a.Destination.COSBucketDestination.Encryption){var T=a.Destination.COSBucketDestination.Encryption;Object.keys(T).indexOf("SSECOS")>-1&&(T["SSE-COS"]=T.SSECOS,delete T.SSECOS)}var U=o.json2xml({InventoryConfiguration:a}),H=d.Headers;H["Content-Type"]="application/xml",H["Content-MD5"]=o.b64(o.md5(U));var W=e==="PUT"?"name/cos:PutBucketInventory":"name/cos:PostBucketInventory";se.call(this,{Action:W,method:e,Bucket:d.Bucket,Region:d.Region,body:U,action:"inventory",qs:{id:d.Id},headers:H,tracker:d.tracker},function(ge,fe){if(ge&&ge.statusCode===204)return r(null,{statusCode:ge.statusCode});if(ge)return r(ge);r(null,{statusCode:fe.statusCode,headers:fe.headers})})}function Ce(e,d){return ve.call(this,"PUT",e,d)}function Se(e,d){return ve.call(this,"POST",e,d)}function Ae(e,d){se.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(r,a){if(r)return d(r);var R=a.InventoryConfiguration;if(R&&R.OptionalFields&&R.OptionalFields.Field){var T=R.OptionalFields.Field;o.isArray(T)||(T=[T]),R.OptionalFields=T}if(R.Destination&&R.Destination.COSBucketDestination&&R.Destination.COSBucketDestination.Encryption){var U=R.Destination.COSBucketDestination.Encryption;Object.keys(U).indexOf("SSE-COS")>-1&&(U.SSECOS=U["SSE-COS"],delete U["SSE-COS"])}d(null,{InventoryConfiguration:R,statusCode:a.statusCode,headers:a.headers})})}function be(e,d){se.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken},tracker:e.tracker},function(r,a){if(r)return d(r);var R=a.ListInventoryConfigurationResult,T=R.InventoryConfiguration||[];T=o.isArray(T)?T:[T],delete R.InventoryConfiguration,o.each(T,function(U){if(U&&U.OptionalFields&&U.OptionalFields.Field){var H=U.OptionalFields.Field;o.isArray(H)||(H=[H]),U.OptionalFields=H}if(U.Destination&&U.Destination.COSBucketDestination&&U.Destination.COSBucketDestination.Encryption){var W=U.Destination.COSBucketDestination.Encryption;Object.keys(W).indexOf("SSE-COS")>-1&&(W.SSECOS=W["SSE-COS"],delete W["SSE-COS"])}}),R.InventoryConfigurations=T,o.extend(R,{statusCode:a.statusCode,headers:a.headers}),d(null,R)})}function Ue(e,d){se.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode,headers:a.headers})})}function Ze(e,d){if(!e.AccelerateConfiguration){d(o.error(new Error("missing param AccelerateConfiguration")));return}var r={AccelerateConfiguration:e.AccelerateConfiguration||{}},a=o.json2xml(r),R={};R["Content-Type"]="application/xml",R["Content-MD5"]=o.b64(o.md5(a)),se.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:a,action:"accelerate",headers:R,tracker:e.tracker},function(T,U){if(T)return d(T);d(null,{statusCode:U.statusCode,headers:U.headers})})}function $e(e,d){se.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate",tracker:e.tracker},function(r,a){r||!a.AccelerateConfiguration&&(a.AccelerateConfiguration={}),d(r,a)})}function Xe(e,d){var r=e.ServerSideEncryptionConfiguration||{},a=r.Rule||r.Rules||[],R=o.json2xml({ServerSideEncryptionConfiguration:{Rule:a}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"encryption",headers:T,tracker:e.tracker},function(U,H){if(U&&U.statusCode===204)return d(null,{statusCode:U.statusCode});if(U)return d(U);d(null,{statusCode:H.statusCode,headers:H.headers})})}function st(e,d){se.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(r,a){if(r){if(r.statusCode===404&&r.code==="NoSuchEncryptionConfiguration"){var R={EncryptionConfiguration:{Rules:[]},statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=o.makeArray(a.EncryptionConfiguration&&a.EncryptionConfiguration.Rule||[]);a.EncryptionConfiguration={Rules:T},d(r,a)})}function De(e,d){se.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode,headers:a.headers})})}function et(e,d){se.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(r,a){if(r){var R=r.statusCode;return e.Headers["If-Modified-Since"]&&R&&R===304?d(null,{NotModified:!0,statusCode:R}):d(r)}a.ETag=o.attr(a.headers,"etag",""),d(null,a)})}function Ct(e,d){var r={};r.prefix=e.Prefix||"",r.delimiter=e.Delimiter,r["key-marker"]=e.KeyMarker,r["version-id-marker"]=e.VersionIdMarker,r["max-keys"]=e.MaxKeys,r["encoding-type"]=e.EncodingType,se.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"versions",tracker:e.tracker},function(a,R){if(a)return d(a);var T=R.ListVersionsResult||{},U=T.DeleteMarker||[];U=o.isArray(U)?U:[U];var H=T.Version||[];H=o.isArray(H)?H:[H];var W=o.clone(T);delete W.DeleteMarker,delete W.Version,o.extend(W,{DeleteMarkers:U,Versions:H,statusCode:R.statusCode,headers:R.headers}),d(null,W)})}function jt(e,d){var r=this;if(r.logger.info({cate:"PROCESS",tag:"download",msg:"[key=".concat(e.Key,"] getObject开始")}),this.options.ObjectKeySimplifyCheck){var a=o.simplifyPath(e.Key);if(a==="/"){d(o.error(new Error("The Getobject Key is illegal")));return}}var R=e.Query||{},T=e.QueryString||"",U=o.throttleOnProgress.call(this,0,e.onProgress),H=e.tracker;H&&H.setParams({signStartTime:new Date().getTime()}),R["response-content-type"]=e.ResponseContentType,R["response-content-language"]=e.ResponseContentLanguage,R["response-expires"]=e.ResponseExpires,R["response-cache-control"]=e.ResponseCacheControl,R["response-content-disposition"]=e.ResponseContentDisposition,R["response-content-encoding"]=e.ResponseContentEncoding,se.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:R,qsStr:T,rawBody:!0,onDownloadProgress:U,tracker:H},function(W,ge){if(U(null,!0),W){var fe=W.statusCode;return e.Headers["If-Modified-Since"]&&fe&&fe===304?d(null,{NotModified:!0}):d(W)}d(null,{Body:ge.body,ETag:o.attr(ge.headers,"etag",""),statusCode:ge.statusCode,headers:ge.headers}),r.logger.info({cate:"PROCESS",tag:"download",msg:"[key=".concat(e.Key,"] getObject结束")})})}function Lt(e,d){var r=this,a=e.ContentLength,R=o.throttleOnProgress.call(r,a,e.onProgress);r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] putObject开始")});var T=e.Headers;!T["Cache-Control"]&&!T["cache-control"]&&(T["Cache-Control"]=""),!T["Content-Type"]&&!T["content-type"]&&(T["Content-Type"]=e.Body&&e.Body.type||"");var U=e.UploadAddMetaMd5||r.options.UploadAddMetaMd5||r.options.UploadCheckContentMd5,H=e.tracker;U&&H&&H.setParams({md5StartTime:new Date().getTime()}),U&&r.logger.debug({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] 开始计算 md5")}),o.getBodyMd5(U,e.Body,function(W){W&&(r.logger.debug({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] md5: ").concat(W,"，md5Base64=").concat(o.b64(W))}),H&&H.setParams({md5EndTime:new Date().getTime()}),r.options.UploadCheckContentMd5&&(T["Content-MD5"]=o.b64(W)),(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5)&&(T["x-cos-meta-md5"]=W)),e.ContentLength!==void 0&&(T["Content-Length"]=e.ContentLength),R(null,!0),se.call(r,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:R,tracker:H},function(ge,fe){if(ge)return r.logger.error({cate:"ERROR",tag:"upload",msg:"上传失败，错误信息：".concat(JSON.stringify(ge))}),R(null,!0),d(ge);R({loaded:a,total:a},!0);var me=We({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:r.options.UseAccelerate?"accelerate":e.Region,object:e.Key});me=me.substr(me.indexOf("://")+3),fe.Location=me,fe.ETag=o.attr(fe.headers,"etag",""),r.logger.info({cate:"RESULT",tag:"upload",msg:"上传成功，Location=".concat(me)}),r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] putObject结束")}),d(null,fe)})},e.onHashProgress)}function Ft(e,d){se.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":"",tracker:e.tracker},function(r,a){if(r){var R=r.statusCode;return R&&R===404?d(null,{BucketNotFound:!0,statusCode:R}):d(r)}d(null,{statusCode:a.statusCode,headers:a.headers})})}function Ht(e,d){var r={};e.VersionId&&(r.versionId=e.VersionId),se.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,action:"acl",tracker:e.tracker},function(a,R){if(a)return d(a);var T=R.AccessControlPolicy||{},U=T.Owner||{},H=T.AccessControlList&&T.AccessControlList.Grant||[];H=o.isArray(H)?H:[H];var W=xe(T);delete W.GrantWrite,R.headers&&R.headers["x-cos-acl"]&&(W.ACL=R.headers["x-cos-acl"]),W=o.extend(W,{Owner:U,Grants:H,statusCode:R.statusCode,headers:R.headers}),d(null,W)})}function Kt(e,d){var r=e.Headers,a="";if(e.AccessControlPolicy){var R=o.clone(e.AccessControlPolicy||{}),T=R.Grants||R.Grant;T=o.isArray(T)?T:[T],delete R.Grant,delete R.Grants,R.AccessControlList={Grant:T},a=o.json2xml({AccessControlPolicy:R}),r["Content-Type"]="application/xml",r["Content-MD5"]=o.b64(o.md5(a))}o.each(r,function(U,H){H.indexOf("x-cos-grant-")===0&&(r[H]=Ye(r[H]))}),se.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:r,body:a,tracker:e.tracker},function(U,H){if(U)return d(U);d(null,{statusCode:H.statusCode,headers:H.headers})})}function Vt(e,d){var r=e.Headers;r.Origin=e.Origin,r["Access-Control-Request-Method"]=e.AccessControlRequestMethod,r["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,se.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:r,tracker:e.tracker},function(a,R){if(a)return a.statusCode&&a.statusCode===403?d(null,{OptionsForbidden:!0,statusCode:a.statusCode}):d(a);var T=R.headers||{};d(null,{AccessControlAllowOrigin:T["access-control-allow-origin"],AccessControlAllowMethods:T["access-control-allow-methods"],AccessControlAllowHeaders:T["access-control-allow-headers"],AccessControlExposeHeaders:T["access-control-expose-headers"],AccessControlMaxAge:T["access-control-max-age"],statusCode:R.statusCode,headers:R.headers})})}function zt(e,d){var r=this,a=e.Headers;!a["Cache-Control"]&&!a["cache-control"]&&(a["Cache-Control"]="");var R=e.CopySource||"",T=o.getSourceParams.call(this,R);if(!T){d(o.error(new Error("CopySource format error")));return}var U=T.Bucket,H=T.Region,W=decodeURIComponent(T.Key);se.call(this,{Scope:[{action:"name/cos:GetObject",bucket:U,region:H,prefix:W},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(ge,fe){if(ge)return d(ge);var me=o.clone(fe.CopyObjectResult||{}),X=We({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});o.extend(me,{Location:X,statusCode:fe.statusCode,headers:fe.headers}),d(null,me)})}function Ke(e,d){var r=e.CopySource||"",a=o.getSourceParams.call(this,r);if(!a){d(o.error(new Error("CopySource format error")));return}var R=a.Bucket,T=a.Region,U=decodeURIComponent(a.Key);se.call(this,{Scope:[{action:"name/cos:GetObject",bucket:R,region:T,prefix:U},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,tracker:e.tracker},function(H,W){if(H)return d(H);var ge=o.clone(W.CopyPartResult||{});o.extend(ge,{statusCode:W.statusCode,headers:W.headers}),d(null,ge)})}function Q(e,d){var r=e.Objects||[],a=e.Quiet;r=o.isArray(r)?r:[r];var R=o.json2xml({Delete:{Object:r,Quiet:a||!1}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R));var U=o.map(r,function(H){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:H.Key}});se.call(this,{Scope:U,method:"POST",Bucket:e.Bucket,Region:e.Region,body:R,action:"delete",headers:T,tracker:e.tracker},function(H,W){if(H)return d(H);var ge=W.DeleteResult||{},fe=ge.Deleted||[],me=ge.Error||[];fe=o.isArray(fe)?fe:[fe],me=o.isArray(me)?me:[me];var X=o.clone(ge);o.extend(X,{Error:me,Deleted:fe,statusCode:W.statusCode,headers:W.headers}),d(null,X)})}function M(e,d){var r=e.Headers;if(!e.RestoreRequest){d(o.error(new Error("missing param RestoreRequest")));return}var a=e.RestoreRequest||{},R=o.json2xml({RestoreRequest:a});r["Content-Type"]="application/xml",r["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:R,action:"restore",headers:r,tracker:e.tracker},d)}function V(e,d){var r=e.Tagging||{},a=r.TagSet||r.Tags||e.Tags||[];a=o.clone(o.isArray(a)?a:[a]);var R=o.json2xml({Tagging:{TagSet:{Tag:a}}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:R,action:"tagging",headers:T,VersionId:e.VersionId,tracker:e.tracker},function(U,H){if(U&&U.statusCode===204)return d(null,{statusCode:U.statusCode});if(U)return d(U);d(null,{statusCode:H.statusCode,headers:H.headers})})}function z(e,d){se.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(r,a){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="NoSuchTagSet")){var R={Tags:[],statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=[];try{T=a.Tagging.TagSet.Tag||[]}catch{}T=o.clone(o.isArray(T)?T:[T]),d(null,{Tags:T,statusCode:a.statusCode,headers:a.headers})})}function Y(e,d){se.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(r,a){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:a.statusCode,headers:a.headers})})}function te(e,d){var r=e.SelectType;if(!r)return d(o.error(new Error("missing param SelectType")));var a=e.SelectRequest||{},R=o.json2xml({SelectRequest:a}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:R,DataType:"arraybuffer",rawBody:!0,tracker:e.tracker},function(U,H){if(U&&U.statusCode===204)return d(null,{statusCode:U.statusCode});if(U)return d(U);var W=o.parseSelectPayload(H.body);d(null,{statusCode:H.statusCode,headers:H.headers,Body:W.body,Payload:W.payload})})}function de(e,d){var r=this,a=e.Headers,R=e.tracker;!a["Cache-Control"]&&!a["cache-control"]&&(a["Cache-Control"]=""),!a["Content-Type"]&&!a["content-type"]&&(a["Content-Type"]=e.Body&&e.Body.type||"");var T=e.Body&&(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5);T&&R&&R.setParams({md5StartTime:new Date().getTime()}),o.getBodyMd5(T,e.Body,function(U){U&&(e.Headers["x-cos-meta-md5"]=U),T&&R&&R.setParams({md5EndTime:new Date().getTime()}),se.call(r,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query,tracker:R},function(H,W){if(H)return R&&R.parent&&R.parent.setParams({errorNode:"multipartInit"}),d(H);if(W=o.clone(W||{}),W&&W.InitiateMultipartUploadResult)return d(null,o.extend(W.InitiateMultipartUploadResult,{statusCode:W.statusCode,headers:W.headers}));d(null,W)})},e.onHashProgress)}function ye(e,d){var r=this;o.getFileSize("multipartUpload",e,function(){var a=e.tracker,R=r.options.UploadCheckContentMd5;R&&a&&a.setParams({md5StartTime:new Date().getTime()}),o.getBodyMd5(R,e.Body,function(T){T&&(e.Headers["Content-MD5"]=o.b64(T)),R&&a&&a.setParams({md5EndTime:new Date().getTime()}),a&&a.setParams({partNumber:e.PartNumber}),se.call(r,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:a},function(U,H){if(U)return a&&a.parent&&a.parent.setParams({errorNode:"multipartUpload"}),d(U);d(null,{ETag:o.attr(H.headers,"etag",""),statusCode:H.statusCode,headers:H.headers})})})})}function _e(e,d){for(var r=this,a=e.UploadId,R=e.Parts,T=e.tracker,U=0,H=R.length;U<H;U++)R[U].ETag&&R[U].ETag.indexOf('"')===0||(R[U].ETag='"'+R[U].ETag+'"');var W=o.json2xml({CompleteMultipartUpload:{Part:R}});W=W.replace(/\n\s*/g,"");var ge=e.Headers;ge["Content-Type"]="application/xml",ge["Content-MD5"]=o.b64(o.md5(W)),se.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:a},body:W,headers:ge,tracker:T},function(fe,me){if(fe)return T&&T.parent&&T.parent.setParams({errorNode:"multipartComplete"}),d(fe);var X=We({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:r.options.UseAccelerate?"accelerate":e.Region,object:e.Key,isLocation:!0}),Re=me.CompleteMultipartUploadResult||{};if(Re.ProcessResults&&(Re.UploadResult={OriginalInfo:{Key:Re.Key,Location:X,ETag:Re.ETag,ImageInfo:Re.ImageInfo},ProcessResults:Re.ProcessResults},delete Re.ImageInfo,delete Re.ProcessResults),Re.CallbackResult){var Me=Re.CallbackResult;if(Me.Status==="200"&&Me.CallbackBody)try{Re.CallbackBody=JSON.parse(o.decodeBase64(Me.CallbackBody))}catch{Re.CallbackBody={}}else Re.CallbackError=Me.Error||{};delete Re.CallbackResult}if(Re.ReturnBodyResult){var He=Re.ReturnBodyResult;if(He.Status==="200"&&He.ReturnBody)try{Re.ReturnBody=JSON.parse(o.decodeBase64(He.ReturnBody))}catch{Re.ReturnBody={}}else Re.ReturnError={Code:He.Code,Message:He.Message,Status:He.Status};delete Re.ReturnBodyResult}var Ve=o.extend(Re,{Location:X,statusCode:me.statusCode,headers:me.headers});d(null,Ve)})}function Be(e,d){var r={};r.delimiter=e.Delimiter,r["encoding-type"]=e.EncodingType,r.prefix=e.Prefix||"",r["max-uploads"]=e.MaxUploads,r["key-marker"]=e.KeyMarker,r["upload-id-marker"]=e.UploadIdMarker,r=o.clearKey(r);var a=e.tracker;a&&a.setParams({signStartTime:new Date().getTime()}),se.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"uploads",tracker:a},function(R,T){if(R)return a&&a.parent&&a.parent.setParams({errorNode:"multipartList"}),d(R);if(T&&T.ListMultipartUploadsResult){var U=T.ListMultipartUploadsResult.Upload||[];U=o.isArray(U)?U:[U],T.ListMultipartUploadsResult.Upload=U}var H=o.clone(T.ListMultipartUploadsResult||{});o.extend(H,{statusCode:T.statusCode,headers:T.headers}),d(null,H)})}function Pe(e,d){var r={},a=e.tracker;r.uploadId=e.UploadId,r["encoding-type"]=e.EncodingType,r["max-parts"]=e.MaxParts,r["part-number-marker"]=e.PartNumberMarker,se.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,tracker:a},function(R,T){if(R)return a&&a.parent&&a.parent.setParams({errorNode:"multipartListPart"}),d(R);var U=T.ListPartsResult||{},H=U.Part||[];H=o.isArray(H)?H:[H],U.Part=H;var W=o.clone(U);o.extend(W,{statusCode:T.statusCode,headers:T.headers}),d(null,W)})}function Le(e,d){var r={};r.uploadId=e.UploadId,se.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,tracker:e.tracker},function(a,R){if(a)return d(a);d(null,{statusCode:R.statusCode,headers:R.headers})})}function Ne(e,d){se.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType,tracker:e.tracker},function(r,a){if(r)return d(r);a&&a.body&&(a.Body=a.body,delete a.body),d(r,a)})}function Ge(e,d){var r=e.Headers;!r["Cache-Control"]&&!r["cache-control"]&&(r["Cache-Control"]=""),!r["Content-Type"]&&!r["content-type"]&&(r["Content-Type"]=e.Body&&e.Body.type||""),se.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers,tracker:e.tracker},function(a,R){if(a)return d(a);d(null,R)})}function at(e){var d=this;return o.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:d.options.UseRawKey,SystemClockOffset:d.options.SystemClockOffset})}function qe(e,d){var r=this,a=e.UseAccelerate===void 0?r.options.UseAccelerate:e.UseAccelerate,R=We({ForcePathStyle:r.options.ForcePathStyle,protocol:e.Protocol||r.options.Protocol,domain:e.Domain||r.options.Domain,bucket:e.Bucket,region:a?"accelerate":e.Region,object:e.Key}),T="";e.Query&&(T+=o.obj2str(e.Query)),e.QueryString&&(T+=(T?"&":"")+e.QueryString);var U=R;if(e.Sign!==void 0&&!e.Sign)return T&&(U+="?"+T),d(null,{Url:U}),U;var H=ft.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:R}),W=Tt.call(this,{Action:(e.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:H,ForceSignHost:e.ForceSignHost===!1?!1:r.options.ForceSignHost},function(ge,fe){if(d){if(ge){d(ge);return}var me=function(Me){var He=Me.match(/q-url-param-list.*?(?=&)/g)[0],Ve="q-url-param-list="+encodeURIComponent(He.replace(/q-url-param-list=/,"")).toLowerCase(),ze=new RegExp(He,"g"),tt=Me.replace(ze,Ve);return tt},X=R;X+="?"+(fe.Authorization.indexOf("q-signature")>-1?me(fe.Authorization):"sign="+encodeURIComponent(fe.Authorization)),fe.SecurityToken&&(X+="&x-cos-security-token="+fe.SecurityToken),fe.ClientIP&&(X+="&clientIP="+fe.ClientIP),fe.ClientUA&&(X+="&clientUA="+fe.ClientUA),fe.Token&&(X+="&token="+fe.Token),T&&(X+="&"+T),setTimeout(function(){d(null,{Url:X})})}});return W?(U+="?"+W.Authorization+(W.SecurityToken?"&x-cos-security-token="+W.SecurityToken:""),T&&(U+="&"+T)):T&&(U+="?"+T),U}function xe(e){var d={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},r={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},a=e&&e.AccessControlList||{},R=a.Grant;R&&(R=o.isArray(R)?R:[R]);var T={READ:0,WRITE:0,FULL_CONTROL:0};return R&&R.length&&o.each(R,function(U){var H=U.Grantee.URI&&U.Grantee.URI.endsWith("/groups/global/AllUsers");U.Grantee.ID==="qcs::cam::anyone:anyone"||H?T[U.Permission]=1:U.Grantee.ID!==e.Owner.ID&&d[r[U.Permission]].push('id="'+U.Grantee.ID+'"')}),T.FULL_CONTROL||T.WRITE&&T.READ?d.ACL="public-read-write":T.READ?d.ACL="public-read":d.ACL="private",o.each(r,function(U){d[U]=Ye(d[U].join(","))}),d}function Ye(e){var d=e.split(","),r={},a,R;for(a=0;a<d.length;)R=d[a].trim(),r[R]?d.splice(a,1):(r[R]=!0,d[a]=R,a++);return d.join(",")}function We(e){var d=e.region||"",r=e.bucket||"",a=r.substr(0,r.lastIndexOf("-")),R=r.substr(r.lastIndexOf("-")+1),T=e.domain,U=e.object;typeof T=="function"&&(T=T({Bucket:r,Region:d})),["http","https"].includes(e.protocol)&&(e.protocol=e.protocol+":");var H=e.protocol||(o.isBrowser&&(typeof location>"u"?"undefined":b(location))==="object"&&location.protocol==="http:"?"http:":"https:");T||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(d)>-1?T="{Region}.myqcloud.com":T="cos.{Region}.myqcloud.com",e.ForcePathStyle||(T="{Bucket}."+T)),T=T.replace(/\{\{AppId\}\}/gi,R).replace(/\{\{Bucket\}\}/gi,a).replace(/\{\{Region\}\}/gi,d).replace(/\{\{.*?\}\}/gi,""),T=T.replace(/\{AppId\}/gi,R).replace(/\{BucketName\}/gi,a).replace(/\{Bucket\}/gi,r).replace(/\{Region\}/gi,d).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(T)||(T=H+"//"+T),T.slice(-1)==="/"&&(T=T.slice(0,-1));var W=T;return e.ForcePathStyle&&(W+="/"+r),W+="/",U&&(W+=o.camSafeUrlEncode(U).replace(/%2F/g,"/")),e.isLocation&&(W=W.replace(/^https?:\/\//,"")),W}var ft=function(d){var r=d.Url||d.Bucket&&d.Region;if(!r)return"";var a=d.UseAccelerate===void 0?this.options.UseAccelerate:d.UseAccelerate,R=d.Url||We({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:d.Bucket,region:a?"accelerate":d.Region}),T=R.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");return T};function Tt(e,d){var r=o.clone(e.Headers),a="";o.each(r,function(Ee,ke){(Ee===""||["content-type","cache-control","expires"].indexOf(ke.toLowerCase())>-1)&&delete r[ke],ke.toLowerCase()==="host"&&(a=Ee)});var R=e.ForceSignHost!==!1;!a&&e.SignHost&&R&&(r.Host=e.SignHost);var T=!1,U=function(ke,Oe){T||(T=!0,Oe&&Oe.XCosSecurityToken&&!Oe.SecurityToken&&(Oe=o.clone(Oe),Oe.SecurityToken=Oe.XCosSecurityToken,delete Oe.XCosSecurityToken),d&&d(ke,Oe))},H=this,W=e.Bucket||"",ge=e.Region||"",fe=e.Key||"";H.options.ForcePathStyle&&W&&(fe=W+"/"+fe);var me="/"+fe,X={},Re=e.Scope;if(!Re){var Me=e.Action||"",He=e.ResourceKey||e.Key||"";Re=e.Scope||[{action:Me,bucket:W,region:ge,prefix:He}]}var Ve=o.md5(JSON.stringify(Re));H._StsCache=H._StsCache||[],function(){var Ee,ke;for(Ee=H._StsCache.length-1;Ee>=0;Ee--){ke=H._StsCache[Ee];var Oe=Math.round(o.getSkewTime(H.options.SystemClockOffset)/1e3)+30;if(ke.StartTime&&Oe<ke.StartTime||Oe>=ke.ExpiredTime){H._StsCache.splice(Ee,1);continue}if(!ke.ScopeLimit||ke.ScopeLimit&&ke.ScopeKey===Ve){X=ke;break}}}();var ze=function(){var ke="";X.StartTime&&e.Expires?ke=X.StartTime+";"+(X.StartTime+e.Expires*1):X.StartTime&&X.ExpiredTime&&(ke=X.StartTime+";"+X.ExpiredTime);var Oe=o.getAuth({SecretId:X.TmpSecretId,SecretKey:X.TmpSecretKey,Method:e.Method,Pathname:me,Query:e.Query,Headers:r,Expires:e.Expires,UseRawKey:H.options.UseRawKey,SystemClockOffset:H.options.SystemClockOffset,KeyTime:ke,ForceSignHost:R}),Te={Authorization:Oe,SecurityToken:X.SecurityToken||X.XCosSecurityToken||"",Token:X.Token||"",ClientIP:X.ClientIP||"",ClientUA:X.ClientUA||"",SignFrom:"client"};U(null,Te)},tt=function(ke){if(ke.Authorization){var Oe=!1,Te=ke.Authorization;if(Te)if(Te.indexOf(" ")>-1)Oe=!1;else if(Te.indexOf("q-sign-algorithm=")>-1&&Te.indexOf("q-ak=")>-1&&Te.indexOf("q-sign-time=")>-1&&Te.indexOf("q-key-time=")>-1&&Te.indexOf("q-url-param-list=")>-1)Oe=!0;else try{Te=atob(Te),Te.indexOf("a=")>-1&&Te.indexOf("k=")>-1&&Te.indexOf("t=")>-1&&Te.indexOf("r=")>-1&&Te.indexOf("b=")>-1&&(Oe=!0)}catch{}if(!Oe)return o.error(new Error("getAuthorization callback params format error"))}else{if(!ke.TmpSecretId)return o.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!ke.TmpSecretKey)return o.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!ke.SecurityToken&&!ke.XCosSecurityToken)return o.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!ke.ExpiredTime)return o.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(ke.ExpiredTime&&ke.ExpiredTime.toString().length!==10)return o.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(ke.StartTime&&ke.StartTime.toString().length!==10)return o.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(X.ExpiredTime&&X.ExpiredTime-o.getSkewTime(H.options.SystemClockOffset)/1e3>60)ze();else if(H.options.getAuthorization)H.options.getAuthorization.call(H,{Bucket:W,Region:ge,Method:e.Method,Key:fe,Pathname:me,Query:e.Query,Headers:r,Scope:Re,SystemClockOffset:H.options.SystemClockOffset,ForceSignHost:R},function(Ee){typeof Ee=="string"&&(Ee={Authorization:Ee});var ke=tt(Ee);if(ke)return U(ke);Ee.Authorization?U(null,Ee):(X=Ee||{},X.Scope=Re,X.ScopeKey=Ve,H._StsCache.push(X),ze())});else if(H.options.getSTS)H.options.getSTS.call(H,{Bucket:W,Region:ge},function(Ee){X=Ee||{},X.Scope=Re,X.ScopeKey=Ve,X.TmpSecretId||(X.TmpSecretId=X.SecretId),X.TmpSecretKey||(X.TmpSecretKey=X.SecretKey);var ke=tt(X);if(ke)return U(ke);H._StsCache.push(X),ze()});else return function(){var Ee="";if(H.options.StartTime&&e.Expires){if(H.options.StartTime.toString().length!==10)return U(o.error(new Error('params "StartTime" should be 10 digits')));Ee=H.options.StartTime+";"+(H.options.StartTime+e.Expires*1)}else if(H.options.StartTime&&H.options.ExpiredTime){if(H.options.StartTime.toString().length!==10)return U(o.error(new Error('params "StartTime" should be 10 digits')));if(H.options.ExpiredTime.toString().length!==10)return U(o.error(new Error('params "ExpiredTime" should be 10 digits')));Ee=H.options.StartTime+";"+H.options.ExpiredTime*1}var ke=o.getAuth({SecretId:e.SecretId||H.options.SecretId,SecretKey:e.SecretKey||H.options.SecretKey,Method:e.Method,Pathname:me,Query:e.Query,Headers:r,Expires:e.Expires,KeyTime:Ee,UseRawKey:H.options.UseRawKey,SystemClockOffset:H.options.SystemClockOffset,ForceSignHost:R}),Oe={Authorization:ke,SecurityToken:H.options.SecurityToken||H.options.XCosSecurityToken,SignFrom:"client"};return U(null,Oe),Oe}();return""}function $t(e){var d=this,r=!1,a=!1,R=!1,T=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var U=e.error.Code,H=e.error.Message;(U==="RequestTimeTooSkewed"||U==="AccessDenied"&&H==="Request has expired")&&(a=!0)}catch{}if(e)if(a&&T){var W=Date.parse(T);this.options.CorrectClockSkew&&Math.abs(o.getSkewTime(this.options.SystemClockOffset)-W)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=W-Date.now(),r=!0)}else Math.floor(e.statusCode/100)===5?(r=!0,R=!1):(e.message==="timeout"||e.message==="CORS blocked or network error")&&(r=!0,R=d.options.AutoSwitchHost);return{canRetry:r,networkError:R}}function Dt(e){var d=e.requestUrl,r=e.clientCalcSign,a=e.networkError;if(!this.options.AutoSwitchHost||!d||!r||!a)return!1;var R=/^https?:\/\/[^\/]*\.cos\.[^\/]*\.myqcloud\.com(\/.*)?$/,T=/^https?:\/\/[^\/]*\.cos\.accelerate\.myqcloud\.com(\/.*)?$/,U=R.test(d)&&!T.test(d);return U}function se(e,d){var r=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=o.clearKey(e.qs),e.headers&&(e.headers=o.clearKey(e.headers)),e.qs&&(e.qs=o.clearKey(e.qs));var a=o.clone(e.qs);e.action&&(a[e.action]="");var R=e.url||e.Url,T=e.SignHost||ft.call(this,{Bucket:e.Bucket,Region:e.Region,Url:R}),U=e.tracker,H=function(ge){var fe=r.options.SystemClockOffset;U&&U.setParams({signStartTime:new Date().getTime(),httpRetryTimes:ge-1}),e.SwitchHost&&(T=T.replace(/myqcloud.com/,"tencentcos.cn"));var me=A(A({},e),{},{Query:a,SignHost:T,ForceSignHost:r.options.ForceSignHost});delete me.tracker,r.logger.debug({cate:"PROCESS",tag:"base",msg:"开始计算签名, opt=".concat(JSON.stringify(me))}),Tt.call(r,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:a,Headers:e.headers,SignHost:T,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:r.options.ForceSignHost,SwitchHost:e.SwitchHost},function(X,Re){if(X){r.logger.error({cate:"PROCESS",tag:"base",msg:"签名获取失败, err=".concat(JSON.stringify(X.message))}),d(X);return}U&&U.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),e.AuthData=Re,r.logger.debug({cate:"PROCESS",tag:"base",msg:"签名获取成功"}),r.logger.info({cate:"PROCESS",tag:"base",msg:"准备发起请求"}),Gt.call(r,e,function(Me,He){U&&U.setParams({httpEndTime:new Date().getTime()});var Ve=!1,ze=!1;if(Me){var tt=$t.call(r,Me);Ve=tt.canRetry||fe!==r.options.SystemClockOffset,ze=tt.networkError,r.logger.error({cate:"PROCESS",tag:"network",msg:"请求失败, err=".concat(JSON.stringify(Me),", canRetry=").concat(Ve,", networkError=").concat(ze,", tryTimes=").concat(ge)})}if(Me&&ge<4&&Ve){e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,e.headers["x-cos-security-token"]&&delete e.headers["x-cos-security-token"],e.headers["x-ci-security-token"]&&delete e.headers["x-ci-security-token"]);var Ee=Dt.call(r,{requestUrl:(Me==null?void 0:Me.url)||"",clientCalcSign:Re.SignFrom==="client",networkError:ze});e.SwitchHost=Ee,e.headers["x-cos-sdk-retry"]=!0,r.logger.info({cate:"PROCESS",tag:"base",msg:"重试请求, 重试第".concat(ge,"次")}),H(ge+1)}else r.logger.info({cate:"PROCESS",tag:"base",msg:"请求完成"}),d(Me,He)})})};H(1)}function Gt(e,d){var r=this,a=e.TaskId;if(!(a&&!r._isRunningTask(a))){var R=e.Bucket,T=e.Region,U=e.Key,H=e.method||"GET",W=e.Url||e.url,ge=e.body,fe=e.rawBody;r.options.UseAccelerate&&(T="accelerate"),W=W||We({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:R,region:T,object:U}),e.SwitchHost&&(W=W.replace(/myqcloud.com/,"tencentcos.cn"));var me=U?W:"";e.action&&(W=W+"?"+(o.isIOS_QQ?"".concat(e.action,"="):e.action)),e.qsStr&&(W.indexOf("?")>-1?W=W+"&"+e.qsStr:W=W+"?"+e.qsStr);var X={method:H,url:W,headers:e.headers,qs:e.qs,body:ge},Re="x-cos-security-token";if(o.isCIHost(W)&&(Re="x-ci-security-token"),X.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(X.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(X.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(X.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(X.headers[Re]=e.AuthData.SecurityToken),e.Action&&(X.action=e.Action),X.key=e.Key||e.ResourceKey,X.headers&&(X.headers=o.clearKey(X.headers)),X=o.clearKey(X),e.onProgress&&typeof e.onProgress=="function"){var Me=ge&&(ge.size||ge.length)||0;X.onProgress=function(Te){if(!(a&&!r._isRunningTask(a))){var Qe=Te?Te.loaded:0;e.onProgress({loaded:Qe,total:Me})}}}e.onDownloadProgress&&(X.onDownloadProgress=e.onDownloadProgress),e.DataType&&(X.dataType=e.DataType),this.options.Timeout&&(X.timeout=this.options.Timeout),r.options.ForcePathStyle&&(X.pathStyle=r.options.ForcePathStyle);var He=o.uuid();r.logger.info({cate:"PROCESS",tag:"network",msg:"[Request] ".concat(He,", requestOpt=").concat(JSON.stringify(X))}),r.emit("before-send",X);var Ve=X.url.includes("accelerate."),ze=X.qs?Object.keys(X.qs).map(function(Te){return"".concat(Te,"=").concat(X.qs[Te])}).join("&"):"",tt=ze?X.url+"?"+ze:X.url;if(e.tracker){var Ee;e.tracker.setParams({url:tt,httpMethod:X.method,accelerate:Ve,httpSize:((Ee=X.body)===null||Ee===void 0?void 0:Ee.size)||0}),e.tracker.parent&&!e.tracker.parent.params.url&&e.tracker.parent.setParams({url:me,accelerate:Ve})}var ke=(r.options.Request||E)(X,function(Te){if(!(Te&&Te.error==="abort")){var Qe={options:X,error:Te&&Te.error,statusCode:Te&&Te.statusCode||0,statusMessage:Te&&Te.statusMessage||"",headers:Te&&Te.headers||{},body:Te&&Te.body};r.emit("after-receive",Qe);var Wt=Qe.error,Rt=Qe.body,nt={statusCode:Qe.statusCode,statusMessage:Qe.statusMessage,headers:Qe.headers},Xn=Wt?"[error]":"[success]";r.logger.info({cate:"PROCESS",tag:"network",msg:"[Response] ".concat(He,", ").concat(Xn,", response=").concat(JSON.stringify(nt))});var gn,ut=function(lt,Fe){if(a&&r.off("inner-kill-task",Oe),!gn){gn=!0;var ht={};if(nt&&nt.statusCode&&(ht.statusCode=nt.statusCode),nt&&nt.headers&&(ht.headers=nt.headers),lt)X.url&&(ht.url=X.url),X.method&&(ht.method=X.method),lt=o.extend(lt||{},ht),d(lt,null);else{if(e.Action==="name/cos:PutObject"){var Qt={};for(var yn in e.headers){var er=yn.toLowerCase();Qt[er]=e.headers[yn]}Qt["x-cos-callback"]?Fe.Error?(Fe.CallbackError=o.clone(Fe.Error),delete Fe.Error):Fe.CallbackBody=o.clone(Fe):Qt["x-cos-return-body"]&&(Fe.Error?(Fe.ReturnError=o.clone(Fe.Error),delete Fe.Error):Fe.ReturnBody=o.clone(Fe))}Fe=o.extend(Fe||{},ht),d(null,Fe)}ke=null}};if(Wt)return ut(o.error(Wt));var xt=nt.statusCode,pn=Math.floor(xt/100)===2;if(fe){if(pn)return ut(null,{body:Rt});if(Rt instanceof Blob){o.readAsBinaryString(Rt,function(vn){var lt=o.parseResBody(vn),Fe=lt.Error||lt;return ut(o.error(new Error(Fe.Message||"response body error"),{code:Fe.Code,error:Fe}))});return}}var qt=o.parseResBody(Rt),Bt=qt.Error||qt;pn?ut(null,qt):Bt?ut(o.error(new Error(Bt.Message),{code:Bt.Code,error:Bt})):xt?ut(o.error(new Error(nt.statusMessage),{code:""+xt})):xt&&ut(o.error(new Error("statusCode error")))}}),Oe=function(Qe){Qe.TaskId===a&&(ke&&ke.abort&&ke.abort(),r.off("inner-kill-task",Oe))};a&&r.on("inner-kill-task",Oe)}}var hn={getService:c,putBucket:l,headBucket:_,getBucket:h,deleteBucket:x,putBucketAcl:w,getBucketAcl:N,putBucketCors:L,getBucketCors:K,deleteBucketCors:$,getBucketLocation:q,getBucketPolicy:p,putBucketPolicy:k,deleteBucketPolicy:P,putBucketTagging:s,getBucketTagging:n,deleteBucketTagging:t,putBucketLifecycle:i,getBucketLifecycle:u,deleteBucketLifecycle:S,putBucketVersioning:O,getBucketVersioning:m,putBucketReplication:F,getBucketReplication:j,deleteBucketReplication:G,putBucketWebsite:D,getBucketWebsite:Z,deleteBucketWebsite:ee,putBucketReferer:he,getBucketReferer:ie,putBucketDomain:re,getBucketDomain:ne,deleteBucketDomain:J,putBucketOrigin:oe,getBucketOrigin:le,deleteBucketOrigin:ae,putBucketLogging:ce,getBucketLogging:ue,putBucketInventory:Ce,postBucketInventory:Se,getBucketInventory:Ae,listBucketInventory:be,deleteBucketInventory:Ue,putBucketAccelerate:Ze,getBucketAccelerate:$e,putBucketEncryption:Xe,getBucketEncryption:st,deleteBucketEncryption:De,getObject:jt,headObject:et,listObjectVersions:Ct,putObject:Lt,deleteObject:Ft,getObjectAcl:Ht,putObjectAcl:Kt,optionsObject:Vt,putObjectCopy:zt,deleteMultipleObject:Q,restoreObject:M,putObjectTagging:V,getObjectTagging:z,deleteObjectTagging:Y,selectObjectContent:te,appendObject:Ge,uploadPartCopy:Ke,multipartInit:de,multipartUpload:ye,multipartComplete:_e,multipartList:Be,multipartListPart:Pe,multipartAbort:Le,request:Ne,getObjectUrl:qe,getAuth:at};function Yn(e,d,r){o.each(["Cors","Acl"],function(a){if(e.slice(-a.length)===a){var R=e.slice(0,-a.length)+a.toUpperCase(),T=o.apiWrapper(e,d),U=!1;r[R]=function(){!U&&console.warn("warning: cos."+R+" has been deprecated. Please Use cos."+e+" instead."),U=!0,T.apply(this,arguments)}}})}f.exports.init=function(e,d){d.transferToTaskMethod(hn,"putObject"),o.each(hn,function(r,a){e.prototype[a]=o.apiWrapper(a,r),Yn(a,r,e.prototype)})}},"./src/cos.js":function(f,I,g){var y=g("./src/util.js"),b=g("./src/event.js"),B=g("./src/task.js"),A=g("./src/base.js"),E=g("./src/advance.js"),o=g("./src/logger.js"),c=g("./package.json"),l={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",StartTime:0,ExpiredTime:0,ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,AutoSwitchHost:!0,CopySourceParser:null,ObjectKeySimplifyCheck:!0,DeepTracker:!1,TrackerDelay:5e3,CustomId:"",BeaconReporter:null,ClsReporter:null,EnableLog:!1,EnableLogcat:!1,LogLevel:"VERBOSE",ClsLogger:null,LogExtras:{}},_=function(x){var w,N,L=this;if(this.options=y.extend(y.clone(l),x||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.EnableReporter=this.options.BeaconReporter||this.options.ClsReporter,this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId格式错误，请检查"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey格式错误，请检查"),console.error("error: SecretKey format is incorrect. Please check")),y.isNode()&&(console.log("Tip: Next.js、Nuxt.js 等服务端渲染技术可正常使用JavaScript SDK，请忽略下方 nodejs 环境警告"),console.warn("warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),this.options.ForcePathStyle)throw console.warn("cos-js-sdk-v5不再支持使用path-style，仅支持使用virtual-hosted-style，参考文档：https://cloud.tencent.com/document/product/436/96243"),new Error("ForcePathStyle is not supported");b.init(this),B.init(this),this.logger=new o({enableLog:this.options.EnableLog,enableLogcat:this.options.EnableLogcat,level:(w=this.options.LogLevel)!==null&&w!==void 0?w:"VERBOSE",clsLogger:this.options.ClsLogger,logExtras:(N=this.options.LogExtras)!==null&&N!==void 0?N:{}}),this.options.EnableLog&&(b.init(this.logger),this.logger.on("log-message",function(K){L.emit("log-message",K)}))};A.init(_,B),E.init(_,B),_.util={md5:y.md5,xml2json:y.xml2json,json2xml:y.json2xml,encodeBase64:y.encodeBase64},_.getAuthorization=y.getAuth,_.version=c.version,f.exports=_},"./src/event.js":function(f,I){var g=function(B){var A={},E=function(c){return!A[c]&&(A[c]=[]),A[c]};B.on=function(o,c){o==="task-list-update"&&console.warn('warning: Event "'+o+'" has been deprecated. Please use "list-update" instead.'),E(o).push(c)},B.off=function(o,c){for(var l=E(o),_=l.length-1;_>=0;_--)c===l[_]&&l.splice(_,1)},B.emit=function(o,c){for(var l=E(o).map(function(h){return h}),_=0;_<l.length;_++)l[_](c)}},y=function(){g(this)};f.exports.init=g,f.exports.EventProxy=y},"./src/logger.js":function(f,I,g){var y=g("./node_modules/@babel/runtime/helpers/classCallCheck.js"),b=g("./node_modules/@babel/runtime/helpers/createClass.js"),B=g("./node_modules/@babel/runtime/helpers/defineProperty.js"),A=g("./package.json"),E=A.version,o=["VERBOSE","DEBUG","INFO","WARN","ERROR"],c=function(){function l(_){var h;y(this,l),B(this,"level","VERBOSE"),B(this,"clsLogger",null),B(this,"logExtras",{}),this.enableLog=(h=_.enableLog)!==null&&h!==void 0?h:!1,this.level=_.level||"VERBOSE",o.includes(this.level)||(this.level="VERBOSE"),this.enableLogcat=_.enableLogcat,this.clsLogger=_.clsLogger,this.logExtras=_.logExtras}return b(l,[{key:"info",value:function(){if(["VERBOSE","INFO"].includes(this.level)){for(var h=arguments.length,x=new Array(h),w=0;w<h;w++)x[w]=arguments[w];this.log.apply(this,["info"].concat(x))}}},{key:"debug",value:function(){if(["VERBOSE","DEBUG"].includes(this.level)){for(var h=arguments.length,x=new Array(h),w=0;w<h;w++)x[w]=arguments[w];this.log.apply(this,["debug"].concat(x))}}},{key:"warn",value:function(){if(["VERBOSE","WARN"].includes(this.level)){for(var h=arguments.length,x=new Array(h),w=0;w<h;w++)x[w]=arguments[w];this.log.apply(this,["warn"].concat(x))}}},{key:"error",value:function(){if(["VERBOSE","ERROR"].includes(this.level)){for(var h=arguments.length,x=new Array(h),w=0;w<h;w++)x[w]=arguments[w];this.log.apply(this,["error"].concat(x))}}},{key:"log",value:function(){if(this.enableLog){var h=arguments.length<=0?void 0:arguments[0],x=arguments.length<=1?void 0:arguments[1],w=x.cate,N=w===void 0?"base":w,L=x.tag,K=L===void 0?"base":L,$=x.msg,q={version:"cos-js-sdk-v5-".concat(E),timestamp:new Date().toISOString(),cate:"[".concat(N.toUpperCase(),"]"),tag:"[".concat(K.toUpperCase(),"]"),msg:$,extras:this.logExtras};this.enableLogcat&&console[h]("[".concat(q.version,"] ").concat(q.timestamp," ").concat(q.cate," ").concat(q.tag," ").concat(q.msg," ").concat(q.extras?JSON.stringify(q.extras):"")),this.clsLogger&&this.clsLogger.log(q,!1),this.emit("log-message",q)}}}])}();f.exports=c},"./src/session.js":function(f,I,g){var y=g("./src/util.js"),b="cos_sdk_upload_cache",B=30*24*3600,A,E,o=function(){try{var w=JSON.parse(localStorage.getItem(b))}catch{}w||(w=[]),A=w},c=function(){try{A.length?localStorage.setItem(b,JSON.stringify(A)):localStorage.removeItem(b)}catch{}},l=function(){if(!A){o.call(this);for(var w=!1,N=Math.round(Date.now()/1e3),L=A.length-1;L>=0;L--){var K=A[L][2];(!K||K+B<N)&&(A.splice(L,1),w=!0)}w&&c()}},_=function(){E||(E=setTimeout(function(){c(),E=null},400))},h={using:{},setUsing:function(w){h.using[w]=!0},removeUsing:function(w){delete h.using[w]},getFileId:function(w,N,L,K){return w.name&&w.size&&w.lastModifiedDate&&N?y.md5([w.name,w.size,w.lastModifiedDate,N,L,K].join("::")):null},getCopyFileId:function(w,N,L,K,$){var q=N["content-length"],k=N.etag||"",p=N["last-modified"];return w&&L?y.md5([w,q,k,p,L,K,$].join("::")):null},getUploadIdList:function(w){if(!w)return null;l.call(this);for(var N=[],L=0;L<A.length;L++)A[L][0]===w&&N.push(A[L][1]);return N.length?N:null},saveUploadId:function(w,N,L){if(l.call(this),!!w){for(var K=A.length-1;K>=0;K--){var $=A[K];$[0]===w&&$[1]===N&&A.splice(K,1)}A.unshift([w,N,Math.round(Date.now()/1e3)]),A.length>L&&A.splice(L),_()}},removeUploadId:function(w){l.call(this),delete h.using[w];for(var N=A.length-1;N>=0;N--)A[N][1]===w&&A.splice(N,1);_()}};f.exports=h},"./src/task.js":function(f,I,g){var y=g("./src/session.js"),b=g("./src/util.js"),B={},A=function(c,l){B[l]=c[l],c[l]=function(_,h){_.SkipTask?B[l].call(this,_,h):this._addTask(l,_,h)}},E=function(c){var l=[],_={},h=0,x=0,w=function(p){var P={id:p.id,Bucket:p.Bucket,Region:p.Region,Key:p.Key,FilePath:p.FilePath,state:p.state,loaded:p.loaded,size:p.size,speed:p.speed,percent:p.percent,hashPercent:p.hashPercent,error:p.error};return p.FilePath&&(P.FilePath=p.FilePath),p._custom&&(P._custom=p._custom),P},N=function(){var k,p=function(){k=0,c.emit("task-list-update",{list:b.map(l,w)}),c.emit("list-update",{list:b.map(l,w)})};return function(){k||(k=setTimeout(p))}}(),L=function(){if(!(l.length<=c.options.UploadQueueSize)){for(var p=0;p<x&&p<l.length&&l.length>c.options.UploadQueueSize;){var P=l[p].state==="waiting"||l[p].state==="checking"||l[p].state==="uploading";!l[p]||!P?(_[l[p].id]&&delete _[l[p].id],l.splice(p,1),x--):p++}N()}},K=function(){if(!(h>=c.options.FileParallelLimit)){for(;l[x]&&l[x].state!=="waiting";)x++;if(!(x>=l.length)){var p=l[x];x++,h++,p.state="checking",p.params.onTaskStart&&p.params.onTaskStart(w(p)),!p.params.UploadData&&(p.params.UploadData={});var P=b.formatParams(p.api,p.params);B[p.api].call(c,P,function(s,n){c._isRunningTask(p.id)&&((p.state==="checking"||p.state==="uploading")&&(p.state=s?"error":"success",s&&(p.error=s),h--,N(),K(),p.callback&&p.callback(s,n),p.state==="success"&&(p.params&&(delete p.params.UploadData,delete p.params.Body,delete p.params),delete p.callback)),L())}),N(),setTimeout(K)}}},$=function(p,P){var s=_[p];if(s){var n=s&&s.state==="waiting",t=s&&(s.state==="checking"||s.state==="uploading");if(P==="canceled"&&s.state!=="canceled"||P==="paused"&&n||P==="paused"&&t){s.state=P,c.emit("inner-kill-task",{TaskId:p,toState:P});try{var i=s&&s.params&&s.params.UploadData.UploadId}catch{}P==="canceled"&&i&&y.removeUsing(i),N(),t&&(h--,K()),P==="canceled"&&(s.params&&(delete s.params.UploadData,delete s.params.Body,delete s.params),delete s.callback)}L()}};c._addTasks=function(k){b.each(k,function(p){c._addTask(p.api,p.params,p.callback,!0)}),N()};var q=!0;c._addTask=function(k,p,P,s){p=b.formatParams(k,p);var n=b.uuid();p.TaskId=n,p.onTaskReady&&p.onTaskReady(n),p.TaskReady&&(p.TaskReady(n),q&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),q=!1);var t={params:p,callback:P,api:k,index:l.length,id:n,Bucket:p.Bucket,Region:p.Region,Key:p.Key,FilePath:p.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:p._custom},i=p.onHashProgress;p.onHashProgress=function(S){c._isRunningTask(t.id)&&(t.hashPercent=S.percent,i&&i(S),N())};var u=p.onProgress;return p.onProgress=function(S){c._isRunningTask(t.id)&&(t.state==="checking"&&(t.state="uploading"),t.loaded=S.loaded,t.speed=S.speed,t.percent=S.percent,u&&u(S),N())},b.getFileSize(k,p,function(S,O){if(S)return P(b.error(S));_[n]=t,l.push(t),t.size=O,!s&&N(),K(),L()}),n},c._isRunningTask=function(k){var p=_[k];return!!(p&&(p.state==="checking"||p.state==="uploading"))},c.getTaskList=function(){return b.map(l,w)},c.cancelTask=function(k){$(k,"canceled")},c.pauseTask=function(k){$(k,"paused")},c.restartTask=function(k){var p=_[k];p&&(p.state==="paused"||p.state==="error")&&(p.state="waiting",N(),x=Math.min(x,p.index),K())},c.isUploadRunning=function(){return h||x<l.length}};f.exports.transferToTaskMethod=A,f.exports.init=E},"./src/tracker.js":function(f,I,g){var y=g("./node_modules/@babel/runtime/helpers/classCallCheck.js"),b=g("./node_modules/@babel/runtime/helpers/createClass.js"),B=g("./node_modules/@babel/runtime/helpers/typeof.js"),A=g("./package.json"),E=null,o=function(P,s){if(!E){if(typeof P!="function")throw new Error("Beacon not found");E=new P({appkey:"0WEB05PY6MHRGK0U",versionCode:A.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:s,sessionDuration:60*1e3})}return E},c=function(P){return!P||P<0?0:(P/1e3).toFixed(3)},l={getUid:function(){var P=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return P()+P()+"-"+P()+"-"+P()+"-"+P()+"-"+P()+P()+P()},getNetType:function(){if((typeof navigator>"u"?"undefined":B(navigator))==="object"){var P=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(P==null?void 0:P.type)||(P==null?void 0:P.effectiveType)||"unknown"}return"unknown"},getProtocol:function(){return(typeof location>"u"?"undefined":B(location))==="object"?location.protocol.replace(/:/,""):"unknown protocol"},getOsType:function(){if((typeof navigator>"u"?"undefined":B(navigator))!=="object")return"unknown os";var P=navigator.userAgent.toLowerCase(),s=/macintosh|mac os x/i.test(navigator.userAgent);return P.indexOf("win32")>=0||P.indexOf("wow32")>=0?"win32":P.indexOf("win64")>=0||P.indexOf("wow64")>=0?"win64":s?"mac":"unknown os"},isMobile:function(){var P=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator>"u"?"undefined":B(navigator))==="object"&&navigator.userAgent.match(P))},isAndroid:function(){var P=/(Android|Adr|Linux)/i;return!!((typeof navigator>"u"?"undefined":B(navigator))==="object"&&navigator.userAgent.match(P))},isIOS:function(){var P=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator>"u"?"undefined":B(navigator))==="object"&&navigator.userAgent.match(P))},isOtherMobile:function(){return _&&!isAndroid&&!isIOS},getUA:function(){if((typeof navigator>"u"?"undefined":B(navigator))!=="object")return"unknown device";var P=navigator.userAgent;return P}},_=l.isMobile(),h=l.isAndroid()?"android":l.isIOS?"ios":"other_mobile",x=l.getOsType(),w=_?h:x,N=l.getUA(),L=l.getProtocol(),K=function(P){return["putObject","sliceUploadFile","uploadFile","uploadFiles"].includes(P)?"UploadTask":P==="getObject"?"DownloadTask":["putObjectCopy","sliceCopyFile"].includes(P)?"CopyTask":P};function $(p){return p.replace(/([A-Z])/g,"_$1").toLowerCase()}function q(p){var P={},s=["sdkVersionName","sdkVersionCode","osName","networkType","requestName","requestResult","bucket","region","appid","accelerate","url","host","requestPath","userAgent","networkProtocol","httpMethod","httpSize","httpSpeed","httpTookTime","httpMd5","httpSign","httpFullTime","httpDomain","partNumber","httpRetryTimes","customId","traceId","realApi"],n=[].concat(s,["errorNode","errorCode","errorName","errorMessage","errorRequestId","errorHttpCode","errorServiceName","errorType","fullError"]),t=p.requestResult==="Success"?s:n;for(var i in p)if(t.includes(i)){var u=$(i);P[u]=p[i]}return P.request_name=p.realApi?K(p.realApi):p.requestName,P}var k=function(){function p(P){y(this,p);var s=P.parent,n=P.traceId,t=P.bucket,i=P.region,u=P.apiName,S=P.realApi,O=P.httpMethod,m=P.fileKey,F=P.fileSize,j=P.accelerate,G=P.customId,D=P.delay,Z=P.deepTracker,ee=P.Beacon,he=P.clsReporter,ie=t&&t.substr(t.lastIndexOf("-")+1)||"";this.parent=s,this.deepTracker=Z,this.delay=D,he&&!this.clsReporter&&(this.clsReporter=he),this.params={sdkVersionName:"cos-js-sdk-v5",sdkVersionCode:A.version,osName:w,networkType:"",requestName:u||"",requestResult:"",realApi:S,bucket:t,region:i,accelerate:j,httpMethod:O,url:"",host:"",httpDomain:"",requestPath:m||"",userAgent:N,networkProtocol:L,errorType:"",errorCode:"",errorName:"",errorMessage:"",errorRequestId:"",errorHttpCode:0,errorServiceName:"",errorNode:"",httpTookTime:0,httpSize:F||0,httpMd5:0,httpSign:0,httpFullTime:0,httpSpeed:0,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0,traceId:n||l.getUid(),appid:ie,partNumber:0,httpRetryTimes:0,customId:G||"",partTime:0},ee&&(this.beacon=o(ee,D))}return b(p,[{key:"formatResult",value:function(s,n){var t,i,u,S,O,m,F=new Date().getTime(),j=l.getNetType(),G=s?(s==null?void 0:s.code)||(s==null||(t=s.error)===null||t===void 0?void 0:t.code)||(s==null||(i=s.error)===null||i===void 0?void 0:i.Code):"",D=s?(s==null?void 0:s.message)||(s==null||(u=s.error)===null||u===void 0?void 0:u.message)||(s==null||(S=s.error)===null||S===void 0?void 0:S.Message):"",Z=D,ee=s?(s==null?void 0:s.resource)||(s==null||(O=s.error)===null||O===void 0?void 0:O.resource)||(s==null||(m=s.error)===null||m===void 0?void 0:m.Resource):"",he=s?s==null?void 0:s.statusCode:n.statusCode,ie=s?(s==null?void 0:s.headers)&&(s==null?void 0:s.headers["x-cos-request-id"]):(n==null?void 0:n.headers)&&(n==null?void 0:n.headers["x-cos-request-id"]),re=s?ie?"Server":"Client":"";this.params.requestName==="getObject"&&(this.params.httpSize=n?n.headers&&n.headers["content-length"]:0);var ne=this.params.realApi==="sliceUploadFile",J=this.params.realApi==="sliceCopyFile";if(ne||J){var oe=this.params.httpSize/1024/this.params.partTime;Object.assign(this.params,{httpSpeed:oe<0?0:oe.toFixed(3)})}else{var le=F-this.params.startTime,ae=this.params.httpEndTime-this.params.httpStartTime,ce=this.params.httpSize/1024/(ae/1e3),ue=this.params.md5EndTime-this.params.md5StartTime,ve=this.params.signEndTime-this.params.signStartTime;this.parent&&(this.parent.addParamValue("httpTookTime",c(ae)),this.parent.addParamValue("httpFullTime",c(le)),this.parent.addParamValue("httpMd5",c(ue)),this.parent.addParamValue("httpSign",c(ve)),["multipartUpload","uploadPartCopy","putObjectCopy"].includes(this.params.requestName)&&this.parent.addParamValue("partTime",c(ae))),Object.assign(this.params,{httpFullTime:c(le),httpMd5:c(ue),httpSign:c(ve),httpTookTime:c(ae),httpSpeed:ce<0?0:ce.toFixed(3)})}if(Object.assign(this.params,{networkType:j,requestResult:s?"Failure":"Success",errorType:re,errorCode:G,errorHttpCode:he,errorName:Z,errorMessage:D,errorServiceName:ee,errorRequestId:ie}),s&&(!G||!D)&&(this.params.fullError=s?JSON.stringify(s):""),this.params.url){try{var Ce=/^http(s)?:\/\/(.*?)\//.exec(this.params.url);this.params.host=Ce[2]}catch{this.params.host=this.params.url}this.params.httpDomain=this.params.host}}},{key:"report",value:function(s,n){if(!(!this.beacon&&!this.clsReporter)){this.formatResult(s,n);var t=q(this.params);this.beacon&&this.sendEventsToBeacon(t),this.clsReporter&&this.sendEventsToCLS(t)}}},{key:"setParams",value:function(s){Object.assign(this.params,s)}},{key:"addParamValue",value:function(s,n){this.params[s]=(+this.params[s]+ +n).toFixed(3)}},{key:"sendEventsToBeacon",value:function(s){var n=this.params.requestName==="sliceUploadFile"||this.params.realApi==="sliceUploadFile";if(!(n&&!this.deepTracker)){var t="qcloud_track_cos_sdk";this.delay===0?this.beacon&&this.beacon.onDirectUserAction(t,s):this.beacon&&this.beacon.onUserAction(t,s)}}},{key:"sendEventsToCLS",value:function(s){var n=this.delay===0;this.clsReporter.log(s,n)}},{key:"generateSubTracker",value:function(s){return Object.assign(s,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,accelerate:this.params.accelerate,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay,clsReporter:this.clsReporter}),new p(s)}}])}();f.exports=k},"./src/util.js":function(f,I,g){(function(y){var b=g("./node_modules/@babel/runtime/helpers/typeof.js");function B(Q,M){var V=typeof Symbol<"u"&&Q[Symbol.iterator]||Q["@@iterator"];if(!V){if(Array.isArray(Q)||(V=A(Q))||M){V&&(Q=V);var z=0,Y=function(){};return{s:Y,n:function(){return z>=Q.length?{done:!0}:{done:!1,value:Q[z++]}},e:function(Be){throw Be},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te,de=!0,ye=!1;return{s:function(){V=V.call(Q)},n:function(){var Be=V.next();return de=Be.done,Be},e:function(Be){ye=!0,te=Be},f:function(){try{de||V.return==null||V.return()}finally{if(ye)throw te}}}}function A(Q,M){if(Q){if(typeof Q=="string")return E(Q,M);var V={}.toString.call(Q).slice(8,-1);return V==="Object"&&Q.constructor&&(V=Q.constructor.name),V==="Map"||V==="Set"?Array.from(Q):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?E(Q,M):void 0}}function E(Q,M){(M==null||M>Q.length)&&(M=Q.length);for(var V=0,z=Array(M);V<M;V++)z[V]=Q[V];return z}var o=g("./lib/md5.js"),c=g("./lib/crypto.js"),l=g("./node_modules/fast-xml-parser/src/fxp.js"),_=l.XMLParser,h=l.XMLBuilder,x=new _({ignoreDeclaration:!0,ignoreAttributes:!0,parseTagValue:!1,trimValues:!1}),w=new h,N=g("./lib/base64.js"),L=g("./src/tracker.js"),K="#text",$=function(M){if(le(M))for(var V in M){var z=M[V];typeof z=="string"?V===K&&delete M[V]:Array.isArray(z)?z.forEach(function(Y){$(Y)}):le(z)&&$(z)}},q=function(M){var V=x.parse(M);return $(V),V},k=function(M){var V=w.build(M);return V};function p(Q){return encodeURIComponent(Q).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function P(Q,M){var V=[];for(var z in Q)Q.hasOwnProperty(z)&&V.push(M?p(z).toLowerCase():z);return V.sort(function(Y,te){return Y=Y.toLowerCase(),te=te.toLowerCase(),Y===te?0:Y>te?1:-1})}var s=function(M,V){var z,Y,te,de=[],ye=P(M);for(z=0;z<ye.length;z++)Y=ye[z],te=M[Y]===void 0||M[Y]===null?"":""+M[Y],Y=V?p(Y).toLowerCase():p(Y),te=p(te)||"",de.push(Y+"="+te);return de.join("&")},n=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding","pic-operations"],t=function(M){var V={};for(var z in M){var Y=z.toLowerCase();(Y.indexOf("x-cos-")>-1||Y.indexOf("x-ci-")>-1||n.indexOf(Y)>-1)&&(V[z]=M[z])}return V},i=function(M){M=M||{};var V=M.SecretId,z=M.SecretKey,Y=M.KeyTime,te=(M.method||M.Method||"get").toLowerCase(),de=re(M.Query||M.params||{}),ye=t(re(M.Headers||M.headers||{})),_e=M.Key||"",Be;M.UseRawKey?Be=M.Pathname||M.pathname||"/"+_e:(Be=M.Pathname||M.pathname||_e,Be.indexOf("/")!==0&&(Be="/"+Be));var Pe=M.ForceSignHost!==!1;if(!ye.Host&&!ye.host&&M.Bucket&&M.Region&&Pe&&(ye.Host=M.Bucket+".cos."+M.Region+".myqcloud.com"),!V)throw new Error("missing param SecretId");if(!z)throw new Error("missing param SecretKey");var Le=Math.round(st(M.SystemClockOffset)/1e3)-1,Ne=Le,Ge=M.Expires||M.expires;Ge===void 0?Ne+=900:Ne+=Ge*1||0;var at="sha1",qe=V,xe=Y||Le+";"+Ne,Ye=Y||Le+";"+Ne,We=P(ye,!0).join(";").toLowerCase(),ft=P(de,!0).join(";").toLowerCase(),Tt=c.HmacSHA1(Ye,z).toString(),$t=[te,Be,Ke.obj2str(de,!0),Ke.obj2str(ye,!0),""].join(`
`),Dt=["sha1",xe,c.SHA1($t).toString(),""].join(`
`),se=c.HmacSHA1(Dt,Tt).toString(),Gt=["q-sign-algorithm="+at,"q-ak="+qe,"q-sign-time="+xe,"q-key-time="+Ye,"q-header-list="+We,"q-url-param-list="+ft,"q-signature="+se].join("&");return Gt},u=function(M,V,z){var Y=V/8,te=M.slice(z,z+Y);return new Uint8Array(te).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[V](te)[0]},S=function(M,V,z,Y){var te=M.slice(V,z),de="";return new Uint8Array(te).forEach(function(ye){de+=String.fromCharCode(ye)}),Y&&(de=decodeURIComponent(escape(de))),de},O=function(M){for(var V={},z=S(M),Y={records:[]};M.byteLength;){var te=u(M,32,0),de=u(M,32,4),ye=te-de-16,_e=0,Be;for(M=M.slice(12);_e<de;){var Pe=u(M,8,_e),Le=S(M,_e+1,_e+1+Pe),Ne=u(M,16,_e+Pe+2),Ge=S(M,_e+Pe+4,_e+Pe+4+Ne);V[Le]=Ge,_e+=Pe+4+Ne}if(V[":event-type"]==="Records")Be=S(M,_e,_e+ye,!0),Y.records.push(Be);else if(V[":event-type"]==="Stats")Be=S(M,_e,_e+ye,!0),Y.stats=Ke.xml2json(Be).Stats;else if(V[":event-type"]==="error"){var at=V[":error-code"],qe=V[":error-message"],xe=new Error(qe);xe.message=qe,xe.name=xe.code=at,Y.error=xe}M=M.slice(_e+ye+4)}return{payload:Y.records.join(""),body:z}},m=function(M){var V=this.options.CopySourceParser;if(V)return V(M);var z=M.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return z?{Bucket:z[1],Region:z[3],Key:z[7]}:null},F=function(){},j=function(M){var V={};for(var z in M)M.hasOwnProperty(z)&&M[z]!==void 0&&M[z]!==null&&(V[z]=M[z]);return V},G=function(M,V){var z,Y=new FileReader;FileReader.prototype.readAsBinaryString?(z=FileReader.prototype.readAsBinaryString,Y.onload=function(){V(this.result)}):FileReader.prototype.readAsArrayBuffer?z=function(de){var ye="",_e=new FileReader;_e.onload=function(Be){for(var Pe=new Uint8Array(_e.result),Le=Pe.byteLength,Ne=0;Ne<Le;Ne++)ye+=String.fromCharCode(Pe[Ne]);V(ye)},_e.readAsArrayBuffer(de)}:console.error("FileReader not support readAsBinaryString"),z.call(Y,M)},D=function(){var Q=function(z,Y){z=z.split("."),Y=Y.split(".");for(var te=0;te<Y.length;te++)if(z[te]!==Y[te])return parseInt(z[te])>parseInt(Y[te])?1:-1;return 0},M=function(z){if(!z)return!1;var Y=(z.match(/Chrome\/([.\d]+)/)||[])[1],te=(z.match(/QBCore\/([.\d]+)/)||[])[1],de=(z.match(/QQBrowser\/([.\d]+)/)||[])[1],ye=Y&&Q(Y,"53.0.2785.116")<0&&te&&Q(te,"3.53.991.400")<0&&de&&Q(de,"9.0.2524.400")<=0||!1;return ye};return M(typeof navigator<"u"&&navigator.userAgent)}(),Z=function(M,V,z,Y,te){var de;if(M.slice?de=M.slice(V,z):M.mozSlice?de=M.mozSlice(V,z):M.webkitSlice&&(de=M.webkitSlice(V,z)),Y&&D){var ye=new FileReader;ye.onload=function(_e){de=null,te(new Blob([ye.result]))},ye.readAsArrayBuffer(de)}else te(de)},ee=function(M,V,z,Y){z=z||F,M?typeof V=="string"?z(Ke.md5(V,!0)):Blob&&V instanceof Blob?Ke.getFileMd5(V,function(te,de){z(de)},Y):z():z()},he=1024*1024,ie=function(M,V,z){var Y=M.size,te=0,de=o.getCtx(),ye=function(Be){if(Be>=Y){var Pe=de.digest("hex");V(null,Pe);return}var Le=Math.min(Y,Be+he);Ke.fileSlice(M,Be,Le,!1,function(Ne){G(Ne,function(Ge){Ne=null,de=de.update(Ge,!0),te+=Ge.length,Ge=null,z&&z({loaded:te,total:Y,percent:Math.round(te/Y*1e4)/1e4}),ye(Be+he)})})};ye(0)};function re(Q){return ve(Q,function(M){return b(M)==="object"&&M!==null?re(M):M})}function ne(Q,M,V){return Q&&M in Q?Q[M]:V}function J(Q,M){return ue(M,function(V,z){Q[z]=M[z]}),Q}function oe(Q){return Q instanceof Array}function le(Q){return Object.prototype.toString.call(Q)==="[object Object]"}function ae(Q,M){for(var V=!1,z=0;z<Q.length;z++)if(M===Q[z]){V=!0;break}return V}function ce(Q){return oe(Q)?Q:[Q]}function ue(Q,M){for(var V in Q)Q.hasOwnProperty(V)&&M(Q[V],V)}function ve(Q,M){var V=oe(Q)?[]:{};for(var z in Q)Q.hasOwnProperty(z)&&(V[z]=M(Q[z],z));return V}function Ce(Q,M){var V=oe(Q),z=V?[]:{};for(var Y in Q)Q.hasOwnProperty(Y)&&M(Q[Y],Y)&&(V?z.push(Q[Y]):z[Y]=Q[Y]);return z}var Se=function(M){var V,z,Y,te="";for(V=0,z=M.length/2;V<z;V++)Y=parseInt(M[V*2]+M[V*2+1],16),te+=String.fromCharCode(Y);return btoa(te)},Ae=function(){var M=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return M()+M()+"-"+M()+"-"+M()+"-"+M()+"-"+M()+M()+M()},be=function(M,V){var z=V.Bucket,Y=V.Region,te=V.Key,de=this.options.Domain,ye=!de||typeof de=="string"&&de.indexOf("{Bucket}")>-1,_e=!de||typeof de=="string"&&de.indexOf("{Region}")>-1;if(M.indexOf("Bucket")>-1||M==="deleteMultipleObject"||M==="multipartList"||M==="listObjectVersions"){if(ye&&!z)return"Bucket";if(_e&&!Y)return"Region"}else if(M.indexOf("Object")>-1||M.indexOf("multipart")>-1||M==="sliceUploadFile"||M==="abortUploadTask"||M==="uploadFile"){if(ye&&!z)return"Bucket";if(_e&&!Y)return"Region";if(!te)return"Key"}return!1},Ue=function(M,V){if(V=J({},V),M!=="getAuth"&&M!=="getV4Auth"&&M!=="getObjectUrl"){var z=V.Headers||{};if(V&&b(V)==="object"){(function(){for(var te in V)V.hasOwnProperty(te)&&te.indexOf("x-cos-")>-1&&(z[te]=V[te])})();var Y={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations","x-cos-callback":"Callback","x-cos-callback-var":"CallbackVar","x-cos-return-body":"ReturnBody"};Ke.each(Y,function(te,de){V[te]!==void 0&&(z[de]=V[te])}),V.Headers=j(z)}}return V},Ze=function(M,V){return function(z,Y){var te=this;typeof z=="function"&&(Y=z,z={}),z=Ue(M,z);var de;if(te.options.EnableReporter)if(z.calledBySdk==="sliceUploadFile"||z.calledBySdk==="sliceCopyFile")de=z.tracker&&z.tracker.generateSubTracker({apiName:M});else if(["uploadFile","uploadFiles"].includes(M))de=null;else{var ye=0;z.Body&&(ye=typeof z.Body=="string"?z.Body.length:z.Body.size||z.Body.byteLength||0);var _e=te.options.UseAccelerate||typeof te.options.Domain=="string"&&te.options.Domain.includes("accelerate.");de=new L({Beacon:te.options.BeaconReporter,clsReporter:te.options.ClsReporter,bucket:z.Bucket,region:z.Region,apiName:M,realApi:M,accelerate:_e,fileKey:z.Key,fileSize:ye,deepTracker:te.options.DeepTracker,customId:te.options.CustomId,delay:te.options.TrackerDelay})}z.tracker=de;var Be=function(xe){return xe&&xe.headers&&(xe.headers["x-ci-request-id"]&&(xe.RequestId=xe.headers["x-ci-request-id"]),xe.headers["x-cos-request-id"]&&(xe.RequestId=xe.headers["x-cos-request-id"]),xe.headers["x-cos-version-id"]&&(xe.VersionId=xe.headers["x-cos-version-id"]),xe.headers["x-cos-delete-marker"]&&(xe.DeleteMarker=xe.headers["x-cos-delete-marker"])),xe},Pe=function(xe,Ye){de&&de.report(xe,Ye),Y&&Y(Be(xe),Be(Ye))},Le=function(){if(M!=="getService"&&M!=="abortUploadTask"){var xe=be.call(te,M,z);if(xe)return"missing param "+xe;if(z.Region){if(te.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(z.Region))return"Region format error."}else{if(z.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(z.Region))return"Region format error."}!te.options.CompatibilityMode&&z.Region.indexOf("-")===-1&&z.Region!=="yfb"&&z.Region!=="default"&&z.Region!=="accelerate"&&console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(z.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(z.Bucket))if(z.AppId)z.Bucket=z.Bucket+"-"+z.AppId;else if(te.options.AppId)z.Bucket=z.Bucket+"-"+te.options.AppId;else return'Bucket should format as "test-1250000000".';z.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete z.AppId)}!te.options.UseRawKey&&z.Key&&z.Key.substr(0,1)==="/"&&(z.Key=z.Key.substr(1))}},Ne=Le(),Ge=["getAuth","getObjectUrl"].includes(M);if(typeof Promise=="function"&&!Ge&&!Y)return new Promise(function(qe,xe){if(Y=function(We,ft){We?xe(We):qe(ft)},Ne)return Pe(Ke.error(new Error(Ne)));V.call(te,z,Pe)});if(Ne)return Pe(Ke.error(new Error(Ne)));var at=V.call(te,z,Pe);if(Ge)return at}},$e=function(M,V){var z=this,Y=0,te=0,de=Date.now(),ye,_e;function Be(){if(_e=0,V&&typeof V=="function"){ye=Date.now();var Pe=Math.max(0,Math.round((te-Y)/((ye-de)/1e3)*100)/100)||0,Le;te===0&&M===0?Le=1:Le=Math.floor(te/M*100)/100||0,de=ye,Y=te;try{V({loaded:te,total:M,speed:Pe,percent:Le})}catch{}}}return function(Pe,Le){if(Pe&&(te=Pe.loaded,M=Pe.total),Le)clearTimeout(_e),Be();else{if(_e)return;_e=setTimeout(Be,z.options.ProgressInterval)}}},Xe=function(M,V,z){var Y;if(typeof V.Body=="string"?V.Body=new Blob([V.Body],{type:"text/plain"}):V.Body instanceof ArrayBuffer&&(V.Body=new Blob([V.Body])),V.Body&&(V.Body instanceof Blob||V.Body.toString()==="[object File]"||V.Body.toString()==="[object Blob]"))Y=V.Body.size;else{z(Ke.error(new Error("params body format error, Only allow File|Blob|String.")));return}V.ContentLength=Y,z(null,Y)},st=function(M){return Date.now()+(M||0)},De=function(M,V){var z=M;return M.message=M.message||null,typeof V=="string"?(M.error=V,M.message=V):b(V)==="object"&&V!==null&&(J(M,V),(V.code||V.name)&&(M.code=V.code||V.name),V.message&&(M.message=V.message),V.stack&&(M.stack=V.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(M,"name",{writable:!0,enumerable:!1}),Object.defineProperty(M,"message",{enumerable:!0})),M.name=V&&V.name||M.name||M.code||"Error",M.code||(M.code=M.name),M.error||(M.error=re(z)),M},et=function(){return(typeof globalThis>"u"?"undefined":b(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},Ct=function(){return(typeof window>"u"?"undefined":b(window))!=="object"&&(typeof y>"u"?"undefined":b(y))==="object"&&!0&&!et()},jt=function(M){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(M)},Lt=function(){if((typeof navigator>"u"?"undefined":b(navigator))!=="object")return!1;var Q=navigator.userAgent,M=!!Q.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return M}(),Ft=function(){return(typeof navigator>"u"?"undefined":b(navigator))!=="object"?!1:/\sQQ/i.test(navigator.userAgent)}(),Ht=function(M,V){var z=N.encode(M);return V&&(z=z.replaceAll("+","-").replaceAll("/","_").replaceAll("=","")),z},Kt=function(M){return M?N.decode(M):""},Vt=function(M){var V=M.split("/"),z=[],Y=B(V),te;try{for(Y.s();!(te=Y.n()).done;){var de=te.value;de===".."?z.length&&z.pop():de.length&&de!=="."&&z.push(de)}}catch(ye){Y.e(ye)}finally{Y.f()}return"/"+z.join("/")},zt=function(M){var V;if(M&&typeof M=="string"){var z=M.trim(),Y=z.indexOf("<")===0,te=z.indexOf("{")===0;if(Y)V=Ke.xml2json(M)||{};else if(te)try{var de=M.replace(/\n/g," "),ye=JSON.parse(de);Object.prototype.toString.call(ye)==="[object Object]"?V=ye:V=M}catch{V=M}else V=M}else V=M||{};return V},Ke={noop:F,formatParams:Ue,apiWrapper:Ze,xml2json:q,json2xml:k,md5:o,clearKey:j,fileSlice:Z,getBodyMd5:ee,getFileMd5:ie,b64:Se,extend:J,isArray:oe,isInArray:ae,makeArray:ce,each:ue,map:ve,filter:Ce,clone:re,attr:ne,uuid:Ae,camSafeUrlEncode:p,throttleOnProgress:$e,getFileSize:Xe,getSkewTime:st,error:De,obj2str:s,getAuth:i,parseSelectPayload:O,getSourceParams:m,isBrowser:!0,isNode:Ct,isCIHost:jt,isIOS_QQ:Lt&&Ft,encodeBase64:Ht,decodeBase64:Kt,simplifyPath:Vt,readAsBinaryString:G,parseResBody:zt};f.exports=Ke}).call(this,g("./node_modules/process/browser.js"))}})})})(Qn);var br=Qn.exports;const un=Wn(br),ln="eyJjIjoiUGMrQjlvL0RyYUhKSXRnanRFaHJySlFEKzcxcjFRRWhGc0F1ellQNGp2aml2aHcyVm1mdnlSYklCQWJzQUhBMmo0dkhHQT09IiwiaXYiOiJKNmFRdE5sN2dZeWM1c1JtIiwiayI6Ikp0L0l0eDRQenk5cml5TUN4UUpNcFNFM25rQldrTTdqeFlHVXRRc25OVmhDUTlOdk40U1R2QmpHSXgyek01WXc4MkM4QTVxRU1BekdvV3g5cDhUZGhtdkdZSVRpVjRhSERsT0tOUXJER0c1QUlSTmZ6VFpWSDFQNzNjY3ZZNDBsbldlcDAyTCthUWx3aUdQSHF1bnpxQUtGZGVxVkk5NjlBdVZGQjVkZlRHU0RkUFZDN3ViOG1GRTJ5ZXdsc0s4aXdHRG81YTM5emtGTSsvYmt3Q1BXSXF5cUFmRlc4aUx0ejNsTDhaaG1ZN3NhejJSZitDTU11bjBwTFBrWlFPc1p4VGFLQmtsYm15ZitmWlVOTm5XdGxsQlRZZ3dydE00T1lMUGVJcDR2dFFpMHFkb2NNMStRbDZ5YnNUR0Z6K0FodzFVNEFjYnRHeDhEOEtxOXFNSnBvUT09In0",dn="eyJjIjoiOU5LdVBVTC92bEF4cHVaektSdVlCUmlZQnJ6Z0JpdmVHVDJGS2tNTXU5ejk0TmRHU2tVSjBGdXNqLzIxbHdNTCIsIml2IjoiZkFyaFp6UVZRWGYxeHkzSCIsImsiOiJYZXJ0ekI4ZyszMkswSk16bDllcjdCS01vNVozNW4vbU1TajhjaGVCdkIwQXo2M1drR0I5emVWeHJHRlROWGQxRDMwMzlwUzF6cjBjSytvTmlhYkpLU01iR2gxdUhyaWZjb3hyZnQvZXBpZFVxUlpGemhMKzhuUkw5N0FoWEZSakVDNTZwSFYxT3hidXo5ZVc2MmNneHV1YVRFNXFZcUxmcEZiTlRjSFgxd2taVlo4R3Zrd3FmTStaZUlXNEhPNHFHaU5QdFV6dmowb3VGSnFVUEV3ZnhYVGVtV0ZoN3dvM1d2Z0lucUMwakVlcmJsa2xydTBWU1BBTzRDYnBtNlNsQnE5akpsNDBnazhoM2thYnRoL1doeEV1RkNlRFFyQm1JS0dsTFhjamRoSGZYSGowYVJOV0F3cDB2VjR2UThQWG44L2pKblpGb1lnR0NyQzI4TkRjL2c9PSJ9",fn="eyJjIjoiWXNraTZTR2VqLzJwTTdKNzl3WldhOW5HRXNpY2tCWlBKdFQwamprSjhDVnNpdz09IiwiaXYiOiJGUmhjelJ5cW5nRUFrYXFxIiwiayI6ImJTY3FVbWI2RWNMdE5KU3F2dm1rVHhaWUhuSytFSUdrNDBZZ0pzZzV4UzkyYnorSjVBdWVSZ2lCTmFlaDVoTVc5WDJyZjYrd2ErYTRsVEJkbWtlYW1Sd3F2MGhiMS8rMkNHK20yVUthU2RXU0o0dGVVMXhsby9PcWFkVURFMVpjUG1rcGd4L0xvTnFIbGRFaDZVc003Q1V2b3pwQTBOMDVPUC9sUEpkYXM4ZVlnZUJXajdGQVZ6WGhjOTc3VlhBWHZLWXY0aGlNRmlaSk51OGozd1N6aTdBVWVlc2xSVldlN3RzeFduTFdrOVNBUEpydFZQa0JCWWNHU0w2MmprTE9kdFUvVkNMUCtLMVVjWmtvNGYzaFlpWnoyOHBnVHdwb1lZbi9IUUxOWEJiSUN2ZzlPdWQwWUlFTm85RDE0dWs0WUtyTXlnWEt0UjFuR0t0T3BzNmdwQT09In0",Tr=async()=>{const v=await Je(ln).then(g=>g.text()),C=await Je(dn).then(g=>g.text()),f=await Je(fn).then(g=>g.text()),I=new un({SecretId:v,SecretKey:C});return new Promise((g,y)=>{I.getBucket({Bucket:f,Region:"ap-beijing"},function(b,B){if(b){y(b);return}const A={};B.Contents.forEach(({Key:E})=>{const[o,c]=E.split("_");A[o]||(A[o]=[]),A[o][c]=E}),Object.keys(A).forEach(E=>{A[E]=A[E].filter(Boolean).reverse()}),g({data:A})})})},Rr=async v=>{const C=await Je(ln).then(y=>y.text()),f=await Je(dn).then(y=>y.text()),I=await Je(fn).then(y=>y.text()),g=new un({SecretId:C,SecretKey:f});return new Promise((y,b)=>{g.getObject({Bucket:I,Region:"ap-beijing",Key:v},function(B,A){if(B){b(B);return}y({data:A.Body.toString()})})})},xr=async(v,C)=>{const f=await Je(ln).then(B=>B.text()),I=await Je(dn).then(B=>B.text()),g=await Je(fn).then(B=>B.text()),y=new un({SecretId:f,SecretKey:I}),b=new File([v],C,{type:"text/plain"});return new Promise((B,A)=>{y.putObject({Bucket:g,Region:"ap-beijing",Key:b.name,Body:b},function(E,o){if(E){A(E);return}B({data:C})})})};let kt=null,gt=null;const Jn=async()=>kt||gt||(gt=fetch("./b.txt").then(v=>v.text()).then(v=>Je(v)).then(v=>v.text()).then(v=>(kt=v,gt=null,kt)).catch(()=>(kt="",gt=null,"")),gt);Jn();const Br=({date:v,index:C})=>{const[f,I]=yt(!1);return mt(()=>{Jn().then(g=>{I(g)})},[]),f&&pe("div",{class:"date-mark-container",children:pe("div",{class:"date-mark-wrapper",style:{backgroundImage:`url(data:image/png;base64,${f})`},children:[pe("svg",{viewBox:"0 0 300 300",children:[pe("defs",{children:pe("path",{id:"topArc",d:"M 84 141 A 66 66 0 0 1 216 141"})}),pe("text",{children:pe("textPath",{class:"date-mark-date",href:"#topArc",startOffset:"50%","text-anchor":"middle",children:v})})]}),pe("div",{class:"date-mark-index",children:["#",C]})]})})},Er=({src:v})=>{const[C,f]=yt(""),[I,g]=yt(!0);mt(()=>{let B="",A=!0;return v?(g(!0),Rr(v).then(({data:E})=>Je(E)).then(E=>{A&&(B=URL.createObjectURL(E),f(B),g(!1))}).catch(()=>{A&&g(!1)})):g(!1),()=>{A=!1,B&&URL.revokeObjectURL(B)}},[v]);const[y,b]=(v||"").split("_");return pe("div",{className:"w-full h-full flex items-center justify-center",children:I?pe("div",{className:"flex items-center justify-center",children:pe("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):C?pe("div",{className:"relative w-full h-full",children:[pe("img",{src:C,className:"w-full h-full object-contain rounded-lg",alt:"加密图片",loading:"lazy"}),pe("div",{className:"absolute bottom-2 right-2",children:pe(Br,{date:y,index:+b+1})})]}):pe("div",{className:"text-gray-400 text-sm",children:"图片加载失败"})})},Ar=()=>{const[{checkDay:v,checkData:C},f]=Dn(),I=ct().format("YYYY-MM-DD"),g=I===v,y=(()=>{if(/^\d{4}-\d{2}-\d{2}$/.test(v))return C[v]||[];{const A=[];return Object.keys(C).filter(o=>o.startsWith(v)).sort((o,c)=>ct(c).valueOf()-ct(o).valueOf()).forEach(o=>{A.push(...C[o])}),A}})(),b=async A=>{const E=await mr(A),{data:o}=await xr(E,`${I}_${y.length}`),c={...C,[I]:[o,...C[I]||[]]};f({checkData:c})},B=()=>{const A=document.createElement("input");A.type="file",A.onchange=async E=>{const o=E.target.files[0];o&&await b(o),document.body.removeChild(A)},A.accept="image/*",A.capture="environment",A.className="hidden",document.body.appendChild(A),A.click()};return pe("div",{className:"flex flex-col h-screen",children:[pe("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 px-4 py-3 shadow-sm sticky top-0 z-10",children:pe("div",{className:"flex items-center justify-between",children:[pe("div",{className:"flex items-center space-x-4",children:[pe("button",{onClick:()=>f({page:it.MAIN}),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium transition-colors",children:"← 返回"}),pe("div",{className:"flex items-center space-x-2",children:[pe("div",{className:"text-lg font-semibold text-gray-800",children:v}),!!y.length&&pe("div",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:y.length})]})]}),g&&pe("label",{className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md text-sm font-medium transition-colors",onClick:B,children:"上传图片"})]})}),pe("div",{className:"flex-1 overflow-auto p-4",children:y.length===0?pe("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[pe("svg",{className:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:pe("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),pe("p",{className:"text-lg",children:"暂无图片"}),g&&pe("p",{className:"text-sm mt-2",children:"点击上方上传按钮添加图片"})]}):pe("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((A,E)=>pe("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:pe("div",{style:{aspectRatio:"4/3"},children:pe(Er,{src:A})})},`${A}_${E}`))})})]})},it={LOADING:0,CONFIG:1,MAIN:2,CHECK:3},wr={[it.LOADING]:()=>pe(bt,{}),[it.CONFIG]:Cr,[it.MAIN]:Sr,[it.CHECK]:Ar},Zn=ar({}),Or=()=>{const[v,C]=yt({page:it.LOADING,checkData:{}}),f=b=>{C(B=>({...B,...b}))},[I,g]=yt(!1);mt(()=>{I&&$n().then(b=>{if(b.pub&&b.pri)return f({page:it.MAIN}),Tr();throw new Error("No keys found")}).then(({data:b})=>{f({checkData:b})}).catch(()=>{f({page:it.CONFIG})})},[I]);const y=wr[v.page];return pe(Zn.Provider,{value:{globalState:v,setGlobalState:f},children:[!I&&pe("input",{type:"text",className:"w-full",onChange:b=>{const B=ct().format("HHmm");b.target.value===B&&g(!0)}}),pe(y,{})]})};cr(pe(Or,{}),document.getElementById("app"));</script>
      <style rel="stylesheet" crossorigin>.date-mark-container{width:150px;height:143.1px;overflow:visible}.date-mark-wrapper{transform:scale(.1);transform-origin:0 0;position:relative;width:1500px;height:1431px;font-family:-apple-system,BlinkMacSystemFont,PingFang SC,Helvetica Neue,Helvetica,Arial,sans-serif;background-size:100% 100%}.date-mark-index{font-size:80px;position:absolute;top:855px;left:50%;transform:translate(-50%);font-weight:700;color:#132540}.date-mark-date{font-size:24px;font-weight:700;fill:#132540}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.bottom-2{bottom:.5rem}.right-0{right:0}.right-2{right:.5rem}.top-0{top:0}.z-10{z-index:10}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.mt-2{margin-top:.5rem}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-16{height:4rem}.h-4{height:1rem}.h-8{height:2rem}.h-full{height:100%}.h-screen{height:100vh}.w-16{width:4rem}.w-4{width:1rem}.w-8{width:2rem}.w-full{width:100%}.max-w-4xl{max-width:56rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-7{grid-template-columns:repeat(7,minmax(0,1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-4{gap:1rem}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-green-400{--tw-border-opacity: 1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.object-contain{-o-object-fit:contain;object-fit:contain}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.text-center{text-align:center}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding-top:env(safe-area-inset-top);padding-top:constant(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom);padding-bottom:constant(safe-area-inset-bottom)}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:shadow-lg:hover{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 1024px){.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}</style>
    </head>
    <body>
        <div id="app"></div>
    </body>
</html>
